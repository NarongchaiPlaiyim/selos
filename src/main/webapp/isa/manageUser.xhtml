<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html>
<html>
<f:view xmlns="http://www.w3.org/1999/xhtml"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:p="http://primefaces.org/ui"
        xmlns:ui="http://java.sun.com/jsf/facelets">
    <h:head>
        <title>ManageUser</title>
        <h:outputStylesheet name="css/style.css" />
        <!--<script type="text/javascript" language="javascript"-->
                <!--src="#{request.contextPath}/resources/js/jquery.numeric.js"/>-->
        <h:outputScript library="js" name="jquery.numeric.js"/>
        <h:outputScript library="js" name="custom.js" />
    </h:head>
    <h:body>
        <p:panel id="pnl_maincontainer">

            <h:form id="userTableData">
            <div id="main_container">

                <ui:include src="../site/include/header_logo.xhtml"/>
                <ui:include src="../site/include/menubar_isa.xhtml"/>
                <div id="content_container">
                    <!-- L pane-->
                    <div class="body_lpane">
                       <label class="subject">Manage User</label>
                        <a class="step_border_select" href="manageUser.xhtml">User Profile</a>
                        <a class="step_border" href="userProfileUpload.xhtml">Upload User Profile</a>
                    </div>
                    <!--R pane-->
                    <div class="body_rpane">
                        <label class="subject">User Profile</label>


                            <p:panelGrid id="search" columns="2" columnClasses="isa_searchColumn1,isa_searchColumn2" styleClass="isaPanelGridSearch">
                                <h:outputText value="เลขที่ผู้ใช้:" />
                                <h:inputText value="#{isa.isaSearchView.id}"/>
                                <h:outputText value="ชื่อผู้ใช้:"/>
                                <h:inputText value="#{isa.isaSearchView.username}"/>
                                <h:outputText value="Role:"/>
                                <p:selectOneMenu value="#{isa.isaSearchView.roleId.id}">
                                    <f:selectItem itemLabel=" - Please Select Item! - " itemValue=""/>
                                    <f:selectItems value="#{isa.userRoleList}"
                                                   var="roleItem"
                                                   itemLabel="#{roleItem.name}"
                                                   itemValue="#{roleItem.id}"/>
                                </p:selectOneMenu>
                                <h:outputText value="Department:"/>
                                <p:selectOneMenu value="#{isa.isaSearchView.departmentId.id}">
                                    <f:selectItem itemLabel=" - Please Select Item! - " itemValue=""/>
                                    <f:selectItems value="#{isa.userDepartmentList}"
                                                   var="departmentItem"
                                                   itemLabel="#{departmentItem.name}"
                                                   itemValue="#{departmentItem.id}"/>
                                </p:selectOneMenu>
                                <h:outputText value="Division:"/>
                                <p:selectOneMenu value="#{isa.isaSearchView.divisionId.id}">
                                    <f:selectItem itemLabel=" - Please Select Item! - " itemValue=""/>
                                    <f:selectItems value="#{isa.userDivisionList}"
                                                   var="divisionItem"
                                                   itemLabel="#{divisionItem.name}"
                                                   itemValue="#{divisionItem.id}"/>
                                </p:selectOneMenu>
                                <h:outputText value="Region:"/>
                                <p:selectOneMenu value="#{isa.isaSearchView.regionId.id}">
                                    <f:selectItem itemLabel=" - Please Select Item! - " itemValue=""/>
                                    <f:selectItems value="#{isa.userRegionList}"
                                                   var="regionItem"
                                                   itemLabel="#{regionItem.name}"
                                                   itemValue="#{regionItem.id}"/>
                                </p:selectOneMenu>
                                <h:outputText value="Team:"/>
                                <p:selectOneMenu value="#{isa.isaSearchView.teamId.id}">
                                    <f:selectItem itemLabel=" - Please Select Item! - " itemValue=""/>
                                    <f:selectItems value="#{isa.userTeamList}"
                                                   var="teamItem"
                                                   itemLabel="#{teamItem.name}"
                                                   itemValue="#{teamItem.id}"/>
                                </p:selectOneMenu>
                                <h:outputText value="Title:"/>
                                <p:selectOneMenu value="#{isa.isaSearchView.titleId.id}">
                                    <f:selectItem itemLabel=" - Please Select Item! - " itemValue=""/>
                                    <f:selectItems value="#{isa.userTitleList}"
                                                   var="titleItem"
                                                   itemLabel="#{titleItem.name}"
                                                   itemValue="#{titleItem.id}"/>
                                </p:selectOneMenu>
                                <h:outputText value="Zone:"/>
                                <p:selectOneMenu value="#{isa.isaSearchView.zoneId.id}">
                                    <f:selectItem itemLabel=" - Please Select Item! - " itemValue=""/>
                                    <f:selectItems value="#{isa.userZoneList}"
                                                   var="zoneItem"
                                                   itemLabel="#{zoneItem.name}"
                                                   itemValue="#{zoneItem.id}"/>
                                </p:selectOneMenu>
                                <h:inputHidden/>
                                <p:commandButton value="ค้นหา" actionListener="#{isa.onSearchUser()}" update=":userTableData,:msgBoxSystemMessagePanel"/>
                            </p:panelGrid>



                            <div>
                                <h:outputText value=" TotalUser : #{isa.userSize}"/>

                                <p:commandButton value="Add New User" actionListener="#{isa.onOpenNewUserForm()}"
                                                 oncomplete="PF('manageUserDlg').show()"
                                                 update=":manageDialogForm">
                                    <p:resetInput target=":manageDialogForm"/>
                                                 </p:commandButton>

                                <p:commandButton value="เปิดการใช้งาน" oncomplete="confirmEditUserActiveDlg.show()">
                                    <f:setPropertyActionListener value="1" target="#{isa.active}"/>
                                </p:commandButton>
                                <p:commandButton value="ปิดการใช้งาน" oncomplete="confirmEditUserActiveDlg.show()">
                                    <f:setPropertyActionListener value="0" target="#{isa.active}"/>
                                </p:commandButton>

                                <p:commandButton value="Delete" actionListener="#{isa.onDeleteUserList()}"
                                                 update=":msgBoxSystemMessagePanel"/>
                            </div>

                        <p:dataTable id="dataTable" var="c" value="#{isa.userDetail}" styleClass="center"
                                     selection="#{isa.selectUserDetail}" rowKey="#{c.id}"
                                     rowIndexVar="rowIndex" rows="20" paginator="true" >

                            <p:column selectionMode="multiple"/>

                            <p:column headerText="userId">
                                <h:outputText value="#{c.id}"/>
                            </p:column>
                            <p:column headerText="Username">
                                <h:outputText value="#{c.userName}"/>
                            </p:column>
                            <!--<p:column headerText="EmailAddress">-->
                                <!--<h:outputText value="#{c.emailAddress}"/>-->
                            <!--</p:column>-->
                            <p:column headerText="Active">
                                <h:outputText value="#{c.active}"/>
                            </p:column>
                            <!--<p:column headerText="BuCode">-->
                                <!--<h:outputText value="#{c.buCode}"/>-->
                            <!--</p:column>-->
                            <!--<p:column headerText="LastIp">-->
                                <!--<h:outputText value="#{c.lastIP}"/>-->
                            <!--</p:column>-->
                            <!--<p:column headerText="LastLogon">-->
                                <!--<h:outputText value="#{c.lastLogon}"/>-->
                            <!--</p:column>-->
                            <!--<p:column headerText="PhoneNumber">-->
                                <!--<h:outputText value="#{c.phoneNumber}"/>-->
                            <!--</p:column>-->
                            <p:column headerText="Role">
                                <h:outputText value="#{c.role.name}"/>
                            </p:column>
                            <p:column headerText="Department">
                                <h:outputText value="#{c.department.name}"/>
                            </p:column>
                            <p:column headerText="Division">
                                <h:outputText value="#{c.division.name}"/>
                            </p:column>
                            <p:column headerText="Region">
                                <h:outputText value="#{c.region.name}"/>
                            </p:column>
                            <p:column headerText="Team">
                                <h:outputText value="#{c.team.name}"/>
                            </p:column>
                            <p:column headerText="Title">
                                <h:outputText value="#{c.title.name}"/>
                            </p:column>
                            <p:column headerText="Zone">
                                <h:outputText value="#{c.zone.name}"/>
                            </p:column>

                            <p:column headerText="Status">
                                <h:outputText value="#{c.userStatus}"/>
                            </p:column>
                            <p:column headerText="Management">
                                <p:commandButton icon="ui-icon-pencil"
                                                 title="${c.id}"
                                                 action="#{isa.onOpenEditForm()}"
                                                 oncomplete="manageUserDlg.show()"
                                                 update=":manageDialogForm">
                                    <f:setPropertyActionListener value="#{c.id}"
                                                                 target="#{isa.id}"  />
                                    <p:resetInput target=":manageDialogForm"/>
                                        </p:commandButton>

                                <p:commandButton icon="ui-icon-trash"
                                                 title="Remove"
                                                 oncomplete="confirmDeleteUserDlg.show()">
                                        <f:setPropertyActionListener value="#{c.id}"
                                                                     target="#{isa.id}"  />

                                        </p:commandButton>

                            </p:column>
                        </p:dataTable>

                    </div>         <!-- R pane -->
                </div>
            </div>  <!-- main Contianenr -->
        </h:form>


        </p:panel>




    <p:dialog id="manageUserDialog" widgetVar="manageUserDlg" header="Manage User !"
                                   onShow="hideWindowsScrollBar()" onHide="showWindowsScrollBar()" resizable="false"
                                   modal="true" width="600" height="450">
        <ui:include src="../site/dialog/isaManageDialog.xhtml"/>
    </p:dialog>



        <p:panel id="msgBoxSystemMessagePanel" styleClass="panel">
            <p:confirmDialog id="msgBoxSystemMessageDialog" widgetVar="msgBoxSystemMessageDlg"
                             header="#{isa.messageHeader}" message="#{isa.message}" >
                <p:commandButton value="OK"
                                 process="@this"
                                 update=":userTableData"
                                 oncomplete="msgBoxSystemMessageDlg.hide()"/>
            </p:confirmDialog>
        </p:panel>


        <ui:include src="../site/dialog/confirmDeleteDlg.xhtml">
            <ui:param name="id" value="confirmDeleteUserDialog"/>
            <ui:param name="name" value="confirmDeleteUserDlg"/>
            <ui:param name="formId" value="frmConfirmDeleteUser"/>
            <ui:param name="controller" value="#{isa}"/>
            <ui:param name="action" value="onDelete"/>
            <ui:param name="update" value=":userTableData"/>
        </ui:include>

        <ui:include src="../site/dialog/confirmDeleteDlg.xhtml">
            <ui:param name="id" value="confirmDeleteUserListDialog"/>
            <ui:param name="name" value="confirmDeleteUserListDlg"/>
            <ui:param name="formId" value="frmConfirmDeleteUserList"/>
            <ui:param name="controller" value="#{isa}"/>
            <ui:param name="action" value="deleteUserList"/>
            <ui:param name="update" value=":userTableData"/>
        </ui:include>

        <ui:include src="../site/dialog/confirmEditDlg.xhtml">
            <ui:param name="id" value="confirmEditUserDialog"/>
            <ui:param name="name" value="confirmEditUserDlg"/>
            <ui:param name="formId" value="frmConfirmEditUser"/>
            <ui:param name="controller" value="#{isa}"/>
            <ui:param name="action" value="editUser"/>
            <ui:param name="update" value=":userTableData"/>
        </ui:include>

        <ui:include src="../site/dialog/confirmEditDlg.xhtml">
            <ui:param name="id" value="confirmEditUserActiveDialog"/>
            <ui:param name="name" value="confirmEditUserActiveDlg"/>
            <ui:param name="formId" value="frmConfirmEditUserActive"/>
            <ui:param name="controller" value="#{isa}"/>
            <ui:param name="action" value="onEditUserActive"/>
            <ui:param name="update" value=":userTableData,:msgBoxSystemMessagePanel"/>
        </ui:include>

    </h:body>

</f:view>
</html>