<!DOCTYPE html>
<html>
<f:view xmlns="http://www.w3.org/1999/xhtml"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:p="http://primefaces.org/ui">

<h:head>
    <title>SE-LOS : Prescreen Initial</title>
    <link type="text/css" rel="stylesheet" href="#{request.contextPath}/resources/css/style.css"/>
    <script type="text/javascript" language="javascript" src="#{request.contextPath}/resources/js/jquery.numeric.js"/>
    <script type="text/javascript" language="javascript" src="#{request.contextPath}/resources/js/custom.js"/>
</h:head>

<h:body>
<f:event type="preRenderView" listener="#{prescreenMaker.preRender()}" />
<p:panel id="pnl_maincontainer" styleClass="panel">
    <h:form id="frmMain">
        <div id="main_container">
            <!-- Start Header Logo -->
            <ui:include src="include/header_logo.xhtml" />
            <!-- End Header Logo -->
            <!-- Start Header Detail -->
            <ui:include src="include/header_detail.xhtml" />
            <!-- End Header Detail -->
            <!-- Start Menu -->
            <ui:include src="include/menubar.xhtml" />
            <!-- End Menu -->
            <div id="content_container">
                <div id="content_name">Prescreen - Prescreen Initial</div>
                <div id="content">
                <div id="content_info">
                    <div id="content_trackchange">[ View Track Change ]</div>
                    <div id="content_lastupdate">Last update by <h:outputText value="#{prescreenMaker.prescreenView.modifyBy.userName}"/>, <h:outputText value="#{prescreenMaker.prescreenView.modifyDate}"/></div>
                </div>
                    <div id="content_form">
                        <!-- start content -->
                        <table class="content_table_form">
                            <tr>
                                <td class="title" style="min-width: 200px; width: 200px;"><h:outputText value="#{msg.get('app.label.productgroup')}"/> :</td>
                                <td>
                                    <p:selectOneMenu id="selProdGroupId"
                                                     styleClass="largest"
                                                     size="1"
                                                     value="#{prescreenMaker.prescreenView.productGroup.id}" >
                                        <f:selectItem itemLabel="- Please Select -" itemValue="0"/>
                                        <f:selectItems value="#{prescreenMaker.productGroupList}"
                                                       var="productGroupList"
                                                       itemLabel="#{productGroupList.name}"
                                                       itemValue="#{productGroupList.id}"/>
                                        <p:ajax event="change" listener="#{prescreenMaker.checkOnChangeProductGroup()}" />
                                    </p:selectOneMenu>
                                    <p:confirmDialog id="msgBoxFacilityDialog" widgetVar="msgBoxFacilityDlg" message="Are you want to change Productgroup? If you click 'YES' facility added will be remove!!">`
                                        <p:commandButton value="YES"
                                                         process="@this"
                                                         actionListener="#{prescreenMaker.onChangeProductGroup()}"
                                                         oncomplete="msgBoxFacilityDlg.hide()"
                                                         update=":frmMain:resultTableFacility,:facilityDlgForm" />
                                        <p:commandButton value="NO" onclick="msgBoxFacilityDlg.hide()"/>
                                    </p:confirmDialog>
                                </td>
                            </tr>
                            <tr>
                                <td class="title"><h:outputText value="#{msg.get('app.label.producgprogram')}"/> <h:outputText value="*" styleClass="require-field"/> :</td>
                                <td>
                                    <p:commandButton id="btnAddFacility"
                                                     value="Add"
                                                     styleClass="smaller"
                                                     process="@this, selProdGroupId"
                                                     actionListener="#{prescreenMaker.onAddFacility}"
                                                     update=":facilityDlgForm"
                                                     oncomplete="facilityDlg.show();">
                                        <p:resetInput target=":facilityDlgForm" />
                                    </p:commandButton>
                                </td>
                            </tr>
                            <tr>
                                <td></td>
                                <td>
                                    <p:dataTable id="resultTableFacility" var="item" value="#{prescreenMaker.facilityViewList}"
                                                 paginator="false" rowKey="#{item.facility}" rowIndexVar="rowIndex">

                                        <p:column headerText="" styleClass="center" style="width:22px;">
                                            <h:outputText value="#{rowIndex+1}"/>
                                        </p:column>

                                        <p:column headerText="Product Program" styleClass="center" style="width: 130px;">
                                            <h:outputText value="#{item.productProgram.name}"/>
                                        </p:column>

                                        <p:column headerText="Facility" styleClass="center" style="width: 110px;">
                                            <h:outputText value="#{item.creditType.name}"/>
                                        </p:column>

                                        <p:column headerText="Request Amount" style="width: 120px;">
                                            <div class="right">
                                                <h:outputText value="#{item.requestAmount}">
                                                    <f:convertNumber pattern="#,##0" minFractionDigits="2" maxFractionDigits="2" />
                                                </h:outputText>
                                            </div>
                                        </p:column>

                                        <p:column headerText="" styleClass="center" style="width:54px;">
                                            <p:commandButton title="Edit"
                                                             icon="ui-icon-pencil"
                                                             action="#{prescreenMaker.onEditFacility()}"
                                                             update=":facilityDlgForm"
                                                             oncomplete="facilityDlg.show();">
                                                <f:setPropertyActionListener value="#{item}"
                                                                             target="#{prescreenMaker.selectFacilityItem}"/>
                                                <f:setPropertyActionListener value="#{rowIndex}"
                                                                             target="#{prescreenMaker.rowIndex}"/>
                                            </p:commandButton>
                                            <p:commandButton title="Remove"
                                                             icon="ui-icon-trash"
                                                             oncomplete="confirmDeleteFacilityDlg.show()" >
                                                <f:setPropertyActionListener value="#{item}"
                                                                             target="#{prescreenMaker.selectFacilityItem}"/>
                                            </p:commandButton>
                                        </p:column>
                                    </p:dataTable>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="2">
                                    <div class="separate"><!-- --></div>
                                </td>
                            </tr>
                            <tr>
                                <td class="title">Customer Information </td>
                                <td>
                                    <p:commandButton id="btnAddCustomerInfo"
                                                     value="Add"
                                                     styleClass="smaller"
                                                     process="@this"
                                                     actionListener="#{prescreenMaker.onAddCustomerInfo()}"
                                                     update=":customerDlgForm"
                                                     oncomplete="customerDlg.show();">
                                        <p:resetInput target=":customerDlgForm" />
                                    </p:commandButton>
                                </td>
                            </tr>
                            <tr>
                                <td class="title top">Borrower :</td>
                                <td>
                                    <p:dataTable id="resultTableBorrower" var="borrowerItem" value="#{prescreenMaker.borrowerInfoViewList}"
                                                 paginator="false" rowKey="#{borrowerItem.id}" rowIndexVar="rowIndex">

                                        <p:column headerText="" styleClass="center" style="width:22px;">
                                            <h:outputText value="#{rowIndex+1}"/>
                                        </p:column>

                                        <p:column headerText="Customer Name" styleClass="center">
                                            <h:outputText value="#{borrowerItem.titleTh.titleTh}"/><p:spacer width="2"/>
                                            <h:outputText value="#{borrowerItem.firstNameTh}"/><p:spacer width="3"/>
                                            <h:outputText value="#{borrowerItem.lastNameTh}"/>
                                        </p:column>

                                        <p:column headerText="Customer Type" styleClass="center">
                                            <h:outputText value="#{borrowerItem.customerEntity.description}"/>
                                        </p:column>

                                        <p:column headerText="Age" styleClass="center">
                                            <h:outputText value="#{borrowerItem.age}"/>
                                        </p:column>

                                        <p:column headerText="Citizen ID/Registration ID" styleClass="center">
                                            <h:outputText value="#{borrowerItem.citizenId}"/>
                                        </p:column>

                                        <p:column headerText="Customer ID" styleClass="center">
                                            <h:outputText value="#{borrowerItem.customerId}"/>
                                        </p:column>

                                        <p:column headerText="" styleClass="center" style="width:54px;">
                                            <p:commandButton title="Edit"
                                                             icon="ui-icon-pencil"
                                                             action="#{prescreenMaker.onEditCustomerInfo()}"
                                                             update=":customerDlgForm"
                                                             oncomplete="customerDlg.show();">
                                                <f:setPropertyActionListener value="#{borrowerItem}"
                                                                             target="#{prescreenMaker.selectCustomerInfoItem}"/>
                                                <f:setPropertyActionListener value="#{rowIndex}"
                                                                             target="#{prescreenMaker.rowIndex}"/>
                                            </p:commandButton>
                                            <p:commandButton title="Remove"
                                                             icon="ui-icon-trash"
                                                             oncomplete="confirmDeleteCustomerDlg.show()" >
                                                <f:setPropertyActionListener value="#{borrowerItem}"
                                                                             target="#{prescreenMaker.selectCustomerInfoItem}"/>
                                            </p:commandButton>
                                        </p:column>
                                    </p:dataTable>
                                </td>
                            </tr>
                            <tr>
                                <td class="title top">Guarantor :</td>
                                <td>
                                    <p:dataTable id="resultTableGuarantor" var="guarantorItem" value="#{prescreenMaker.guarantorInfoViewList}"
                                                 paginator="false" rowKey="#{guarantorItem.id}" rowIndexVar="rowIndex">

                                        <p:column headerText="" styleClass="center" style="width:22px;">
                                            <h:outputText value="#{rowIndex+1}"/>
                                        </p:column>

                                        <p:column headerText="Customer Name" styleClass="center">
                                            <h:outputText value="#{guarantorItem.titleTh.titleTh}"/><p:spacer width="2"/>
                                            <h:outputText value="#{guarantorItem.firstNameTh}"/><p:spacer width="3"/>
                                            <h:outputText value="#{guarantorItem.lastNameTh}"/>
                                        </p:column>

                                        <p:column headerText="Customer Type" styleClass="center">
                                            <h:outputText value="#{guarantorItem.customerEntity.description}"/>
                                        </p:column>

                                        <p:column headerText="Age" styleClass="center">
                                            <h:outputText value="#{guarantorItem.age}"/>
                                        </p:column>

                                        <p:column headerText="Citizen ID/Registration ID" styleClass="center">
                                            <h:outputText value="#{guarantorItem.citizenId}"/>
                                        </p:column>

                                        <p:column headerText="Customer ID" styleClass="center">
                                            <h:outputText value="#{guarantorItem.customerId}"/>
                                        </p:column>

                                        <p:column headerText="" styleClass="center" style="width:54px;">
                                            <p:commandButton title="Edit"
                                                             icon="ui-icon-pencil"
                                                             action="#{prescreenMaker.onEditCustomerInfo()}"
                                                             update=":customerDlgForm"
                                                             oncomplete="customerDlg.show();">
                                                <f:setPropertyActionListener value="#{guarantorItem}"
                                                                             target="#{prescreenMaker.selectCustomerInfoItem}"/>
                                                <f:setPropertyActionListener value="#{rowIndex}"
                                                                             target="#{prescreenMaker.rowIndex}"/>
                                            </p:commandButton>
                                            <p:commandButton title="Remove"
                                                             icon="ui-icon-trash"
                                                             oncomplete="confirmDeleteCustomerDlg.show()" >
                                                <f:setPropertyActionListener value="#{guarantorItem}"
                                                                             target="#{prescreenMaker.selectCustomerInfoItem}"/>
                                            </p:commandButton>
                                        </p:column>
                                    </p:dataTable>
                                </td>
                            </tr>
                            <tr>
                                <td class="title top">Related Person :</td>
                                <td>
                                    <p:dataTable id="resultTableRelated" var="relatedItem" value="#{prescreenMaker.relatedInfoViewList}"
                                                 paginator="false" rowKey="#{relatedItem.id}" rowIndexVar="rowIndex">

                                        <p:column headerText="" styleClass="center" style="width:22px;">
                                            <h:outputText value="#{rowIndex+1}"/>
                                        </p:column>

                                        <p:column headerText="Customer Name" styleClass="center">
                                            <h:outputText value="#{relatedItem.titleTh.titleTh}"/><p:spacer width="2"/>
                                            <h:outputText value="#{relatedItem.firstNameTh}"/><p:spacer width="3"/>
                                            <h:outputText value="#{relatedItem.lastNameTh}"/>
                                        </p:column>

                                        <p:column headerText="Customer Type" styleClass="center">
                                            <h:outputText value="#{relatedItem.customerEntity.description}"/>
                                        </p:column>

                                        <p:column headerText="Age" styleClass="center">
                                            <h:outputText value="#{relatedItem.age}"/>
                                        </p:column>

                                        <p:column headerText="Citizen ID/Registration ID" styleClass="center">
                                            <h:outputText value="#{relatedItem.citizenId}"/>
                                        </p:column>

                                        <p:column headerText="Customer ID" styleClass="center">
                                            <h:outputText value="#{relatedItem.customerId}"/>
                                        </p:column>

                                        <p:column headerText="" styleClass="center" style="width:54px;">
                                            <p:commandButton title="Edit"
                                                             icon="ui-icon-pencil"
                                                             action="#{prescreenMaker.onEditCustomerInfo()}"
                                                             update=":customerDlgForm"
                                                             oncomplete="customerDlg.show();">
                                                <f:setPropertyActionListener value="#{relatedItem}"
                                                                             target="#{prescreenMaker.selectCustomerInfoItem}"/>
                                                <f:setPropertyActionListener value="#{rowIndex}"
                                                                             target="#{prescreenMaker.rowIndex}"/>
                                            </p:commandButton>
                                            <p:commandButton title="Remove"
                                                             icon="ui-icon-trash"
                                                             oncomplete="confirmDeleteCustomerDlg.show()" >
                                                <f:setPropertyActionListener value="#{relatedItem}"
                                                                             target="#{prescreenMaker.selectCustomerInfoItem}"/>
                                            </p:commandButton>
                                        </p:column>
                                    </p:dataTable>
                                </td>
                            </tr>
                            <!--<tr>
                                <td class="title top">Borrower :</td>
                                <td>
                                    <table class="table_content" >
                                        <tr>
                                            <th style="width:30px;"></th>
                                            <th style="width:210px;">Customer Name</th>
                                            <th style="width:100px;">Customer Type</th>
                                            <th style="width:30px;">Age</th>
                                            <th style="width:160px;">Citizen ID /<br/> Registration ID</th>
                                            <th style="width:90px;">Customer ID</th>
                                            &lt;!&ndash;<th style="width:30px;">NCB</th>
                                            <th style="width:40px;">Eligible</th>&ndash;&gt;
                                            <th style="width:50px;"></th>
                                        </tr>
                                        <tr>
                                            <td class="center">1</td>
                                            <td>Mr.A Example</td>
                                            <td class="center">Individual</td>
                                            <td class="center">48</td>
                                            <td class="center">312320123123</td>
                                            <td class="center">30232</td>
                                            &lt;!&ndash;<td class="center"></td>
                                            <td class="center"></td>&ndash;&gt;
                                            <td class="option">
                                                <p:commandButton icon="ui-icon-pencil" title="Edit"/>
                                                <p:commandButton icon="ui-icon-trash" title="Remove"/>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="center">2</td>
                                            <td>Mrs.B Example</td>
                                            <td class="center">Individual</td>
                                            <td class="center">36</td>
                                            <td class="center">412420124124</td>
                                            <td class="center">30234</td>
                                            &lt;!&ndash;<td class="center"></td>
                                            <td class="center"></td>&ndash;&gt;
                                            <td class="option">
                                                <p:commandButton icon="ui-icon-pencil" title="Edit"/>
                                                <p:commandButton icon="ui-icon-trash" title="Remove"/>
                                            </td>
                                        </tr>
                                    </table>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="2"></td>
                            </tr>
                            <tr>
                                <td class="title top">Guarantor :</td>
                                <td>
                                    <table class="table_content" cellpadding="0" cellspacing="0">
                                        <tr>
                                            <th style="width:30px;"></th>
                                            <th style="width:210px;">Customer Name</th>
                                            <th style="width:100px;">Customer Type</th>
                                            <th style="width:30px;">Age</th>
                                            <th style="width:160px;">Citizen ID /<br/> Registration ID</th>
                                            <th style="width:90px;">Customer ID</th>
                                            <th style="width:140px;">Relationship</th>
                                            &lt;!&ndash;<th style="width:30px;">CSI</th>&ndash;&gt;
                                            <th style="width:50px;"></th>
                                        </tr>
                                        <tr>
                                            <td class="center">1</td>
                                            <td>Mr.C Guarantor</td>
                                            <td class="center">Individual</td>
                                            <td class="center">30</td>
                                            <td class="center">312320123123</td>
                                            <td class="center">40432</td>
                                            <td class="center">Director</td>
                                            &lt;!&ndash;<td class="result_green"></td>&ndash;&gt;
                                            <td class="option">
                                                <p:commandButton icon="ui-icon-pencil" title="Edit"/>
                                                <p:commandButton icon="ui-icon-trash" title="Remove"/>
                                            </td>
                                        </tr>
                                    </table>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="2"></td>
                            </tr>
                            <tr>
                                <td class="title top">Related :</td>
                                <td>
                                    <table class="table_content" cellpadding="0" cellspacing="0">
                                        <tr>
                                            <th width="30"></th>
                                            <th width="210">Customer Name</th>
                                            <th width="100">Customer Type</th>
                                            <th width="30">Age</th>
                                            <th width="160">Citizen ID /<br/> Registration ID</th>
                                            <th width="90">Customer ID</th>
                                            <th width="140">Relationship</th>
                                            &lt;!&ndash;<th width="30">CSI</th>&ndash;&gt;
                                            <th width="50"></th>
                                        </tr>
                                        <tr>
                                            <td class="center">1</td>
                                            <td>Mr.D Related</td>
                                            <td class="center">Individual</td>
                                            <td class="center">30</td>
                                            <td class="center">312320123123</td>
                                            <td class="center">50637</td>
                                            <td class="center">Shareholders</td>
                                            &lt;!&ndash;<td class="result_red"></td>&ndash;&gt;
                                            <td class="option">
                                                <p:commandButton icon="ui-icon-pencil" title="Edit"/>
                                                <p:commandButton icon="ui-icon-trash" title="Remove"/>
                                            </td>
                                        </tr>
                                    </table>
                                </td>
                            </tr>-->
                            <tr>
                                <td colspan="2">
                                    <div class="separate"><!-- --></div>
                                </td>
                            </tr>
                            <tr><td colspan="2"><p:spacer width="5"/></td></tr>
                            <tr>
                                <td class="center" colspan="100%">
                                    <p:commandButton id="btnSave" value="Save"
                                                     styleClass="medium"
                                                     process="@form"
                                                     action="#{prescreenMaker.onSavePrescreenInitial()}"
                                                     update=":frmMain"/>
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
                <div id="bottom_line"><!-- --></div>
            </div>
            <div class="clear"></div>
            <!-- Start Footer -->
            <ui:include src="include/footer.xhtml" />
            <!-- End Footer -->
            <h:inputHidden id="pagename" value="mnuprescreen"/>
            <h:inputHidden id="subpagename" value="submnuprescreen"/>
        </div>
    </h:form>
</p:panel>
<!--<p:panel id="waitingDialogPanel" widgetVar="waitingDlgPnl">
    <p:dialog id="waitingDialog" widgetVar="waitingDlg" modal="true" draggable="false" closeOnEscape="false" closable="false"
              header="#{prescreenMaker.messageHeader}">
        <h:outputText value="#{prescreenMaker.message}"/><br />
        <p:graphicImage value="/resources/images/shared/ajax-loader.gif"/>
    </p:dialog>
</p:panel>
<p:panel id="waitingDialogPanel2" widgetVar="waitingDlgPnl2">
    <p:confirmDialog id="waitingDialog2" widgetVar="waitingDlg2" modal="true" closeOnEscape="false" closable="false"
              header="#{prescreenMaker.messageHeader}">
        LOADING<br />
        <p:graphicImage value="/resources/images/shared/ajax-loader.gif"/>
    </p:confirmDialog>
</p:panel>
 -->
<p:panel id="msgBoxSystemMessagePanel" styleClass="panel">
    <p:confirmDialog id="msgBoxSystemMessageDialog" widgetVar="msgBoxSystemMessageDlg"
                     header="#{prescreenMaker.messageHeader}" message="#{prescreenMaker.message}" >
        <p:commandButton value="YES"
                         process="@this"
                         actionListener="#{prescreenMaker.onChangeProductGroup()}"
                         oncomplete="msgBoxFacilityDlg.hide()" />
        <p:commandButton value="NO" onclick="msgBoxFacilityDlg.hide()"/>
    </p:confirmDialog>
</p:panel>
<p:dialog id="facilityDialog" header="Facility Information" widgetVar="facilityDlg"
          modal="true" width="400" height="150">
    <ui:include src="dialog/prescreenFacilityDialog.xhtml"/>
</p:dialog>
<p:dialog id="customerDialog" onShow="removeWindowsScrollbar()" onHide="showWindowsScrollbar()" header="Customer Information" widgetVar="customerDlg"
          modal="true" width="800" height="500">
    <ui:include src="dialog/prescreenCustomerDialog.xhtml"/>
</p:dialog>
<p:dialog id="assignCheckerDialog" onShow="removeWindowsScrollbar()" onHide="showWindowsScrollbar()" header="Check NCB - Assign to BDM Checker" widgetVar="assignCheckerDlg"
          modal="true" width="300" height="200">
    <ui:include src="dialog/prescreenAssignChecker.xhtml"/>
</p:dialog>
<ui:include src="dialog/confirmDeleteDlg.xhtml">
    <ui:param name="id" value="confirmDeleteFacilityDialog"/>
    <ui:param name="name" value="confirmDeleteFacilityDlg"/>
    <ui:param name="formId" value="frmConfirmDeleteFacility"/>
    <ui:param name="controller" value="#{prescreenMaker}"/>
    <ui:param name="action" value="onDeleteFacility"/>
    <ui:param name="update" value=":frmMain"/>
</ui:include>
<ui:include src="dialog/confirmDeleteDlg.xhtml">
    <ui:param name="id" value="confirmDeleteCustomerDialog"/>
    <ui:param name="name" value="confirmDeleteCustomerDlg"/>
    <ui:param name="formId" value="frmConfirmDeleteCustomer"/>
    <ui:param name="controller" value="#{prescreenMaker}"/>
    <ui:param name="action" value="onDeleteCustomer"/>
    <ui:param name="update" value=":frmMain"/>
</ui:include>
</h:body>
</f:view>
</html>