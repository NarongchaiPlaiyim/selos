<!DOCTYPE html>
<html>
<f:view xmlns="http://www.w3.org/1999/xhtml"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:p="http://primefaces.org/ui"
        xmlns:clv="http://clevel.com/ui">

<h:head>
    <title>SE-LOS : Prescreen Maker</title>
    <h:outputStylesheet name="css/style.css" />
    <h:outputScript library="js" name="custom.js" />
    <h:outputScript library="js" name="jquery.ui.datepicker.min.js" />
</h:head>

<h:body>
    <f:event type="preRenderView" listener="#{prescreenMaker.preRender()}" />
    <p:panel id="pnl_maincontainer" styleClass="panel">
        <h:form id="frmMain">
            <div id="main_container">
            <!-- Start Header Logo -->
            <ui:include src="include/header_logo.xhtml" />
            <!-- End Header Logo -->
            <!-- Start Header Detail -->
            <ui:include src="include/header_detail.xhtml" />
            <!-- End Header Detail -->
            <!-- Start Menu -->
            <ui:include src="include/menubar.xhtml" />
            <!-- End Menu -->
            <div id="content_container">
                <div id="content_name">Prescreen - Prescreen Maker</div>
                <div id="content">
                    <div id="content_info">
                        <div id="content_trackchange">[ View Track Change ]</div>
                        <div id="content_lastupdate">Last update by <h:outputText value="#{prescreenMaker.prescreenView.modifyBy.userName}"/>, <h:outputText value="#{prescreenMaker.prescreenView.modifyDate}"/></div>
                    </div>
                    <div id="content_form">
                        <!-- start content -->
                        <table class="content_table_form">
                            <tr>
                                <td class="title" style="min-width: 200px; width: 200px;">Product Group :</td>
                                <td>
                                    <h:inputHidden value="#{prescreenMaker.previousProductGroupId}"/>
                                    <p:selectOneMenu id="selProdGroupId"
                                                     styleClass="largest"
                                                     size="1"
                                                     value="#{prescreenMaker.prescreenView.productGroup.id}"
                                                     required="#{not empty param[btnAddFacility.clientId] || not empty param[btnSaveInitialButton.clientId]}">
                                        <f:selectItem itemLabel="- Please Select -" itemValue=""/>
                                        <f:selectItems value="#{prescreenMaker.productGroupList}"
                                                       var="productGroupList"
                                                       itemLabel="#{productGroupList.name}"
                                                       itemValue="#{productGroupList.id}"/>
                                        <p:ajax event="change" listener="#{prescreenMaker.checkOnChangeProductGroup()}" />
                                    </p:selectOneMenu>
                                    <p:confirmDialog id="msgBoxFacilityDialog" widgetVar="msgBoxFacilityDlg" header="Confirm" message="#{msg.get('app.prescreen.message.changeproductgroup')}">`
                                        <p:commandButton value="YES"
                                                         process="@this"
                                                         actionListener="#{prescreenMaker.onChangeProductGroup()}"
                                                         oncomplete="PF('msgBoxFacilityDlg').hide()"
                                                         update=":frmMain:resultTableFacility,:facilityDlgForm" />
                                        <p:commandButton value="NO"
                                                         process="@this"
                                                         actionListener="#{prescreenMaker.onCancelChangeProductGroup()}"
                                                         oncomplete="PF('msgBoxFacilityDlg').hide()"
                                                         update=":frmMain"/>
                                    </p:confirmDialog>
                                </td>
                            </tr>
                            <tr>
                                <td class="title">Product Program <h:outputText value="*" styleClass="require-field"/> :</td>
                                <td>
                                    <p:commandButton id="btnAddFacility"
                                                     value="Add"
                                                     styleClass="smaller"
                                                     process="@this, selProdGroupId"
                                                     actionListener="#{prescreenMaker.onAddFacility}"
                                                     update=":facilityDlgForm"
                                                     oncomplete="facilityDlg.show();">
                                        <p:resetInput target=":facilityDlgForm" />
                                    </p:commandButton>
                                </td>
                            </tr>
                            <tr>
                                <td></td>
                                <td>
                                    <p:dataTable id="resultTableFacility" var="item" value="#{prescreenMaker.facilityViewList}"
                                                 paginator="false" rowKey="#{item.facility}" rowIndexVar="rowIndex">

                                        <p:column headerText="" styleClass="center" style="width:22px;">
                                            <h:outputText value="#{rowIndex+1}"/>
                                        </p:column>

                                        <p:column headerText="Product Program" styleClass="center" style="width: 130px;">
                                            <h:outputText value="#{item.productProgram.name}"/>
                                        </p:column>

                                        <p:column headerText="Facility" styleClass="center" style="width: 110px;">
                                            <h:outputText value="#{item.creditType.name}"/>
                                        </p:column>

                                        <p:column headerText="Request Amount" style="width: 120px;">
                                            <div class="right">
                                                <h:outputText value="#{item.requestAmount}">
                                                    <f:convertNumber pattern="#,##0" minFractionDigits="2" maxFractionDigits="2" />
                                                </h:outputText>
                                            </div>
                                        </p:column>

                                        <p:column headerText="" styleClass="center" style="width:54px;">
                                            <p:commandButton title="Edit"
                                                             icon="ui-icon-pencil"
                                                             action="#{prescreenMaker.onEditFacility()}"
                                                             update=":facilityDlgForm"
                                                             oncomplete="facilityDlg.show();">
                                                <f:setPropertyActionListener value="#{item}"
                                                                             target="#{prescreenMaker.selectFacilityItem}"/>
                                                <f:setPropertyActionListener value="#{rowIndex}"
                                                                             target="#{prescreenMaker.rowIndex}"/>
                                            </p:commandButton>
                                            <p:commandButton title="Remove"
                                                             icon="ui-icon-trash"
                                                             oncomplete="confirmDeleteFacilityDlg.show()" >
                                                <f:setPropertyActionListener value="#{item}"
                                                                             target="#{prescreenMaker.selectFacilityItem}"/>
                                            </p:commandButton>
                                        </p:column>
                                    </p:dataTable>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="2">
                                    <div class="separate"><!-- --></div>
                                </td>
                            </tr>
                            <tr>
                                <td class="title">Expected submission date :</td>
                                <td>
                                    <clv:BECalendar id="expectSumitDate" showOn="button" showButtonPanel="true" navigator="true"
                                                    yearRange="1950:2100"
                                                    defaultdate="#{prescreenMaker.currentDateDDMMYY}"
                                                    mindate="#{prescreenMaker.currentDateDDMMYY}"
                                                    pattern="dd/MM/yyyy"
                                                    value="#{prescreenMaker.prescreenView.expectedSubmitDate}"
                                                    locale="th_TH"
                                                    required="#{not empty param[savePreMakerButton.clientId]}">
                                        <p:ajax event="change"
                                                listener="#{prescreenMaker.onCheckMaxDate('dateOfexpected')}"
                                                process="@form"
                                                update=":frmMain"/>
                                    </clv:BECalendar>
                                </td>
                            </tr>
                            <tr>
                                <td class="title">Customer Information </td>
                                <td>
                                    <p:commandButton id="btnAddCustomerInfo"
                                                     value="Add"
                                                     styleClass="smaller"
                                                     process="@this"
                                                     actionListener="#{prescreenMaker.onAddCustomerInfo()}"
                                                     update=":customerDlgForm"
                                                     oncomplete="customerDlg.show();">
                                        <p:resetInput target=":customerDlgForm" />
                                    </p:commandButton>
                                </td>
                            </tr>
                            <tr>
                                <td class="title top">Borrower :</td>
                                <td>
                                    <p:dataTable id="resultTableBorrower" var="borrowerItem" value="#{prescreenMaker.borrowerInfoViewList}"
                                                 paginator="false" rowKey="#{borrowerItem.id}" rowIndexVar="rowIndex">

                                        <p:column headerText="" styleClass="center" style="width:22px;">
                                            <h:outputText value="#{rowIndex+1}"/>
                                        </p:column>

                                        <p:column headerText="Customer Name" styleClass="center">
                                            <h:outputText value="#{borrowerItem.titleTh.titleTh}"/><p:spacer width="2"/>
                                            <h:outputText value="#{borrowerItem.firstNameTh}"/><p:spacer width="3"/>
                                            <h:outputText value="#{borrowerItem.lastNameTh}"/>
                                        </p:column>

                                        <p:column headerText="Customer Type" styleClass="center">
                                            <h:outputText value="#{borrowerItem.customerEntity.description}"/>
                                        </p:column>

                                        <p:column headerText="Age" styleClass="center">
                                            <h:outputText value="#{borrowerItem.age}"/>
                                        </p:column>

                                        <p:column headerText="Citizen ID/Registration ID" styleClass="center">
                                            <h:outputText value="#{borrowerItem.citizenId}"/><h:outputText value="#{borrowerItem.registrationId}"/>
                                        </p:column>

                                        <p:column headerText="Customer ID" styleClass="center">
                                            <h:outputText value="#{borrowerItem.tmbCustomerId}"/>
                                        </p:column>

                                        <p:column headerText="" styleClass="center" style="width:54px;">
                                            <p:commandButton title="Edit"
                                                             icon="ui-icon-pencil"
                                                             process="@this"
                                                             action="#{prescreenMaker.onEditCustomerInfo()}"
                                                             update=":customerDlgForm"
                                                             oncomplete="customerDlg.show();">
                                                <p:resetInput target=":customerDlgForm" />
                                                <f:setPropertyActionListener value="#{borrowerItem}"
                                                                             target="#{prescreenMaker.selectCustomerInfoItem}"/>
                                                <f:setPropertyActionListener value="#{rowIndex}"
                                                                             target="#{prescreenMaker.rowIndex}"/>
                                            </p:commandButton>
                                        </p:column>
                                    </p:dataTable>
                                </td>
                            </tr>
                            <tr><td colspan="2"></td></tr>
                            <tr>
                                <td class="title top">Guarantor :</td>
                                <td>
                                    <p:dataTable id="resultTableGuarantor" var="guarantorItem" value="#{prescreenMaker.guarantorInfoViewList}"
                                                 paginator="false" rowKey="#{guarantorItem.id}" rowIndexVar="rowIndex">

                                        <p:column headerText="" styleClass="center" style="width:22px;">
                                            <h:outputText value="#{rowIndex+1}"/>
                                        </p:column>

                                        <p:column headerText="Customer Name" styleClass="center">
                                            <h:outputText value="#{guarantorItem.titleTh.titleTh}"/><p:spacer width="2"/>
                                            <h:outputText value="#{guarantorItem.firstNameTh}"/><p:spacer width="3"/>
                                            <h:outputText value="#{guarantorItem.lastNameTh}"/>
                                        </p:column>

                                        <p:column headerText="Customer Type" styleClass="center">
                                            <h:outputText value="#{guarantorItem.customerEntity.description}"/>
                                        </p:column>

                                        <p:column headerText="Age" styleClass="center">
                                            <h:outputText value="#{guarantorItem.age}"/>
                                        </p:column>

                                        <p:column headerText="Citizen ID/Registration ID" styleClass="center">
                                            <h:outputText value="#{guarantorItem.citizenId}"/><h:outputText value="#{guarantorItem.registrationId}"/>
                                        </p:column>

                                        <p:column headerText="Customer ID" styleClass="center">
                                            <h:outputText value="#{guarantorItem.tmbCustomerId}"/>
                                        </p:column>

                                        <p:column headerText="" styleClass="center" style="width:54px;">
                                            <p:commandButton title="Edit"
                                                             icon="ui-icon-pencil"
                                                             process="@this"
                                                             action="#{prescreenMaker.onEditCustomerInfo()}"
                                                             update=":customerDlgForm"
                                                             oncomplete="customerDlg.show();">
                                                <p:resetInput target=":customerDlgForm" />
                                                <f:setPropertyActionListener value="#{guarantorItem}"
                                                                             target="#{prescreenMaker.selectCustomerInfoItem}"/>
                                                <f:setPropertyActionListener value="#{rowIndex}"
                                                                             target="#{prescreenMaker.rowIndex}"/>
                                            </p:commandButton>
                                            <p:commandButton title="Remove"
                                                             icon="ui-icon-trash"
                                                             oncomplete="confirmDeleteCustomerDlg.show()" >
                                                <f:setPropertyActionListener value="#{guarantorItem}"
                                                                             target="#{prescreenMaker.selectCustomerInfoItem}"/>
                                            </p:commandButton>
                                        </p:column>
                                    </p:dataTable>
                                </td>
                            </tr>
                            <tr><td colspan="2"></td></tr>
                            <tr>
                                <td class="title top">Related Person :</td>
                                <td>
                                    <p:dataTable id="resultTableRelated" var="relatedItem" value="#{prescreenMaker.relatedInfoViewList}"
                                                 paginator="false" rowKey="#{relatedItem.id}" rowIndexVar="rowIndex">

                                        <p:column headerText="" styleClass="center" style="width:22px;">
                                            <h:outputText value="#{rowIndex+1}"/>
                                        </p:column>

                                        <p:column headerText="Customer Name" styleClass="center">
                                            <h:outputText value="#{relatedItem.titleTh.titleTh}"/><p:spacer width="2"/>
                                            <h:outputText value="#{relatedItem.firstNameTh}"/><p:spacer width="3"/>
                                            <h:outputText value="#{relatedItem.lastNameTh}"/>
                                        </p:column>

                                        <p:column headerText="Customer Type" styleClass="center">
                                            <h:outputText value="#{relatedItem.customerEntity.description}"/>
                                        </p:column>

                                        <p:column headerText="Age" styleClass="center">
                                            <h:outputText value="#{relatedItem.age}"/>
                                        </p:column>

                                        <p:column headerText="Citizen ID/Registration ID" styleClass="center">
                                            <h:outputText value="#{relatedItem.citizenId}"/><h:outputText value="#{relatedItem.registrationId}"/>
                                        </p:column>

                                        <p:column headerText="Customer ID" styleClass="center">
                                            <h:outputText value="#{relatedItem.tmbCustomerId}"/>
                                        </p:column>

                                        <p:column headerText="" styleClass="center" style="width:54px;">
                                            <p:commandButton title="Edit"
                                                             icon="ui-icon-pencil"
                                                             process="@this"
                                                             action="#{prescreenMaker.onEditCustomerInfo()}"
                                                             update=":customerDlgForm"
                                                             oncomplete="customerDlg.show();">
                                                <p:resetInput target=":customerDlgForm" />
                                                <f:setPropertyActionListener value="#{relatedItem}"
                                                                             target="#{prescreenMaker.selectCustomerInfoItem}"/>
                                                <f:setPropertyActionListener value="#{rowIndex}"
                                                                             target="#{prescreenMaker.rowIndex}"/>
                                            </p:commandButton>
                                            <p:commandButton title="Remove"
                                                             icon="ui-icon-trash"
                                                             oncomplete="confirmDeleteCustomerDlg.show()" >
                                                <f:setPropertyActionListener value="#{relatedItem}"
                                                                             target="#{prescreenMaker.selectCustomerInfoItem}"/>
                                            </p:commandButton>
                                        </p:column>
                                    </p:dataTable>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="2">
                                    <div class="separate"> </div>
                                </td>
                            </tr>
                            <tr>
                                <td class="title">Business Information :</td>
                                <td>
                                    <p:commandButton id="btnAddBusinessInfo"
                                                     value="Add"
                                                     styleClass="smaller"
                                                     process="@this"
                                                     actionListener="#{prescreenMaker.onAddBusinessInfo()}"
                                                     update=":businessDlgForm"
                                                     oncomplete="businessDlg.show();">
                                        <p:resetInput target=":businessDlgForm" />
                                    </p:commandButton>
                                </td>
                            </tr>
                            <tr>
                                <td></td>
                                <td>
                                    <p:dataTable id="resulttableBusinessInformation"
                                                 var="businessResultItem"
                                                 value="#{prescreenMaker.bizInfoDetailViewList}"
                                                 paginator="false"
                                                 rowKey="#{businessResultItem.businessDescription.id}"
                                                 rowIndexVar="rowIndex">

                                        <p:column headerText="" styleClass="center" style="width:22px;">
                                            <h:outputText value="#{rowIndex+1}"/>
                                        </p:column>

                                        <p:column headerText="Business code" styleClass="center" style="width: 110px;">
                                            <h:outputText value="#{businessResultItem.bizDesc.tmbCode}"/>
                                        </p:column>

                                        <p:column headerText="Business Group" styleClass="center" style="width: 140px;">
                                            <h:outputText value="#{businessResultItem.bizGroup.name}"/>
                                        </p:column>

                                        <p:column headerText="Business Description" styleClass="center" style="width: 180px;">
                                            <h:outputText value="#{businessResultItem.bizDesc.name}"/>
                                        </p:column>

                                        <p:column headerText="ESR" styleClass="center" style="width: 35px;">
                                            <h:outputText value="#{businessResultItem.bizDesc.esr}"/>
                                        </p:column>

                                        <p:column headerText="Negative" styleClass="center" style="width: 65px;">
                                            <h:outputText value="#{businessResultItem.bizDesc.negative}"/>
                                        </p:column>

                                        <p:column headerText="High risk" styleClass="center" style="width: 65px;">
                                            <h:outputText value="#{businessResultItem.bizDesc.highRisk}"/>
                                        </p:column>

                                        <p:column headerText="Suspend" styleClass="center" style="width: 65px;">
                                            <h:outputText value="#{businessResultItem.bizDesc.suspend}"/>
                                        </p:column>

                                        <p:column headerText="Business permission" styleClass="center" style="width: 160px;">
                                            <h:outputText value="#{businessResultItem.bizDesc.businessPermission}"/>
                                        </p:column>

                                        <p:column headerText="" styleClass="center" style="width:54px;">
                                            <p:commandButton title="Edit"
                                                             icon="ui-icon-pencil"
                                                             action="#{prescreenMaker.onEditBusinessInfo()}"
                                                             update=":businessDlgForm"
                                                             oncomplete="PF('businessDlg').show()">
                                                <f:setPropertyActionListener value="#{businessResultItem}"
                                                                             target="#{prescreenMaker.selectBizInfoItem}"/>
                                                <f:setPropertyActionListener value="#{rowIndex}"
                                                                             target="#{prescreenMaker.rowIndex}"/>
                                            </p:commandButton>
                                            <p:commandButton title="Remove"
                                                             icon="ui-icon-trash"
                                                             oncomplete="confirmDeleteBusinesssDlg.show()" >
                                                <f:setPropertyActionListener value="#{businessResultItem}"
                                                                             target="#{prescreenMaker.selectBizInfoItem}"/>
                                            </p:commandButton>
                                        </p:column>
                                    </p:dataTable>
                                </td>
                            </tr>
                            <tr>
                                <td class="title">Business Location :</td>
                                <td>
                                    <p:selectOneMenu value="#{prescreenMaker.prescreenView.businessLocation.code}"
                                                     required="#{not empty param[savePreMakerButton.clientId]}"
                                                     size="1" style="width: 200px;">
                                        <f:selectItem itemLabel="- Please Select -" itemValue=""/>
                                        <f:selectItems value="#{prescreenMaker.businessLocationList}"
                                                       var="businessLocationItem"
                                                       itemLabel="#{businessLocationItem.name}"
                                                       itemValue="#{businessLocationItem.code}"/>
                                    </p:selectOneMenu>
                                </td>
                            </tr>
                            <tr>
                                <td class="title">Country of register</td>
                                <td>
                                    <p:selectOneMenu value="#{prescreenMaker.prescreenView.countryOfRegister.id}"
                                                     required="#{not empty param[savePreMakerButton.clientId]}"
                                                     size="1" style="width: 200px;">
                                        <f:selectItem itemLabel="- Please Select -" itemValue=""/>
                                        <f:selectItems value="#{prescreenMaker.countryOfRegisterList}"
                                                       var="countryOfRegisterItem"
                                                       itemLabel="#{countryOfRegisterItem.name}"
                                                       itemValue="#{countryOfRegisterItem.id}"/>
                                    </p:selectOneMenu>
                                </td>
                            </tr>
                            <tr>
                                <td class="title">Date of register :</td>
                                <td>
                                    <clv:BECalendar id="registerDate" showOn="button" showButtonPanel="true" navigator="true"
                                                    yearRange="1950:2100"
                                                    defaultdate="#{prescreenMaker.currentDateDDMMYY}"
                                                    mindate="01/01/1950"
                                                    maxdate="#{prescreenMaker.currentDateDDMMYY}"
                                                    pattern="dd/MM/yyyy"
                                                    value="#{prescreenMaker.prescreenView.registerDate}"
                                                    locale="th_TH" >
                                        <p:ajax event="change"
                                                listener="#{prescreenMaker.onCheckMaxDate('dateOfregister')}"
                                                process="@form"
                                                update=":frmMain"/>
                                    </clv:BECalendar>
                                </td>
                            </tr>
                            <tr>
                                <td class="title">Referred company :</td>
                                <td>
                                    <table class="content_table_form" style="padding: 0; border-spacing:0; border-collapse:collapse; margin-left: -1px;">
                                        <tr>
                                            <td style="width: 180px;">
                                                <clv:BECalendar id="referredDate" showOn="button" showButtonPanel="true" navigator="true"
                                                                yearRange="1950:2100"
                                                                mindate="01/01/1950"
                                                                maxdate="#{prescreenMaker.currentDateDDMMYY}"
                                                                pattern="dd/MM/yyyy"
                                                                value="#{prescreenMaker.prescreenView.referDate}"
                                                                locale="th_TH" >
                                                    <p:ajax event="change"
                                                            listener="#{prescreenMaker.onCheckMaxDate('dateOfrefer')}"
                                                            process="@form"
                                                            update=":frmMain"/>
                                                </clv:BECalendar>
                                            </td>
                                            <td>
                                                <p:selectOneMenu value="#{prescreenMaker.prescreenView.referredExperience.id}"
                                                                 size="1" style="width: 200px;">
                                                    <f:selectItem itemLabel="- Please Select -" itemValue=""/>
                                                    <f:selectItems value="#{prescreenMaker.referredExperienceList}"
                                                                   var="referredExpItem"
                                                                   itemLabel="#{referredExpItem.description}"
                                                                   itemValue="#{referredExpItem.id}"/>
                                                </p:selectOneMenu>
                                            </td>
                                        </tr>
                                    </table>
                                </td>
                            </tr>
                            <tr>
                                <td class="title">TCG :</td>
                                <td>
                                    <p:selectOneRadio value="#{prescreenMaker.prescreenView.tcg}" required="#{not empty param[savePreMakerButton.clientId]}">
                                        <f:selectItems value="#{app.getRadioValues('NO|YES')}"
                                                       var="tcgVar" itemLabel="#{tcgVar.shortName()}" itemValue="#{tcgVar.value()}"/>
                                    </p:selectOneRadio>
                                </td>
                            </tr>
                            <tr>
                                <td class="title">Refinance In:</td>
                                <td>
                                    <table class="content_table_form" style="border-spacing: 0;">
                                        <tr>
                                            <td style="width:100px;">
                                                <p:selectOneRadio value="#{prescreenMaker.prescreenView.refinanceIn}" required="#{not empty param[savePreMakerButton.clientId]}">
                                                    <f:selectItems value="#{app.getRadioValues('NO|YES')}"
                                                                   var="refinanceInVar" itemLabel="#{refinanceInVar.shortName()}" itemValue="#{refinanceInVar.value()}"/>
                                                    <p:ajax event="change" process="@form" update=":frmMain:selRefinanceInBank" />
                                                </p:selectOneRadio>
                                            </td>
                                            <td>
                                                <p:selectOneMenu id="selRefinanceInBank" value="#{prescreenMaker.prescreenView.refinanceInBank.code}"
                                                                 disabled="#{prescreenMaker.prescreenView.refinanceIn == 1 || prescreenMaker.prescreenView.refinanceIn == 0}"
                                                                 required="#{prescreenMaker.prescreenView.refinanceIn == 2 and not empty param[savePreMakerButton.clientId]}"
                                                                 size="1" style="width: 200px;">
                                                    <f:selectItem itemLabel="- Please Select -" itemValue=""/>
                                                    <f:selectItems value="#{prescreenMaker.refinanceList}"
                                                                   var="refinanceInBankItem"
                                                                   itemLabel="#{refinanceInBankItem.shortName}"
                                                                   itemValue="#{refinanceInBankItem.code}"/>
                                                </p:selectOneMenu>
                                            </td>
                                        </tr>
                                    </table>
                                </td>
                            </tr>
                            <tr>
                                <td class="title">Refinance Out:</td>
                                <td>
                                    <table class="content_table_form" style="border-spacing: 0;">
                                        <tr>
                                            <td style="width:100px;">
                                                <p:selectOneRadio value="#{prescreenMaker.prescreenView.refinanceOut}" required="#{not empty param[savePreMakerButton.clientId]}">
                                                    <f:selectItems value="#{app.getRadioValues('NO|YES')}"
                                                                   var="refinanceOutVar" itemLabel="#{refinanceOutVar.shortName()}" itemValue="#{refinanceOutVar.value()}"/>
                                                    <p:ajax event="change" process="@form" update=":frmMain:selRefinanceOutBank" />
                                                </p:selectOneRadio>
                                            </td>
                                            <td>
                                                <p:selectOneMenu id="selRefinanceOutBank" value="#{prescreenMaker.prescreenView.refinanceOutBank.code}"
                                                                 disabled="#{prescreenMaker.prescreenView.refinanceOut == 1 || prescreenMaker.prescreenView.refinanceOut == 0}"
                                                                 required="#{prescreenMaker.prescreenView.refinanceOut == 2 and not empty param[savePreMakerButton.clientId]}"
                                                                 size="1" style="width: 200px;">
                                                    <f:selectItem itemLabel="- Please Select -" itemValue=""/>
                                                    <f:selectItems value="#{prescreenMaker.refinanceList}"
                                                                   var="refinanceOutBankItem"
                                                                   itemLabel="#{refinanceOutBankItem.shortName}"
                                                                   itemValue="#{refinanceOutBankItem.code}"/>
                                                </p:selectOneMenu>
                                            </td>
                                        </tr>
                                    </table>
                                </td>
                            </tr>
                            <tr>
                                <td class="title">รูปแบบการขอสินเชื่อ :</td>
                                <td>
                                    <p:selectOneMenu value="#{prescreenMaker.prescreenView.borrowingType.id}"
                                                     size="1" style="min-width: 240px; width: 240px; max-width: 240px;">
                                        <f:selectItem itemLabel="- Please Select -" itemValue=""/>
                                        <f:selectItems value="#{prescreenMaker.borrowingTypeList}"
                                                       var="borrowingTypeItem"
                                                       itemLabel="#{borrowingTypeItem.name}"
                                                       itemValue="#{borrowingTypeItem.id}"/>
                                    </p:selectOneMenu>
                                </td>
                            </tr>
                            <tr>
                                <td class="title">Collateral :</td>
                                <td>
                                    <p:commandButton id="btnAddCollateral"
                                                     value="Add"
                                                     styleClass="smaller"
                                                     process="@this"
                                                     actionListener="#{prescreenMaker.onAddProposeCollateral()}"
                                                     update=":proposeCollateralDlgForm"
                                                     oncomplete="proposeCollateralDlg.show();">
                                        <p:resetInput target=":proposeCollateralDlgForm" />
                                    </p:commandButton>
                                </td>
                            </tr>
                            <tr>
                                <td></td>
                                <td>
                                    <p:dataTable id="resultTableProposeCollateral" var="proposeCollateral"
                                                 value="#{prescreenMaker.proposePrescreenCollateralViewList}" selection="#{prescreenMaker.selectProposeCollateralItem}"
                                                 paginator="false" rowKey="#{proposeCollateral.id}" rowIndexVar="rowIndex">

                                        <p:column headerText="" styleClass="center" style="width:22px;">
                                            <h:outputText value="#{rowIndex+1}"/>
                                        </p:column>

                                        <p:column headerText="Collateral Type" styleClass="center" style="width: 110px;">
                                            <h:outputText value="#{proposeCollateral.potentialCollateral.description}"/>
                                        </p:column>

                                        <p:column headerText="" styleClass="center" style="width:54px;">

                                            <p:commandButton title="Edit" icon="ui-icon-pencil"
                                                             process="@this"
                                                             action="#{prescreenMaker.onEditProposeCollateral}"
                                                             update=":proposeCollateralDlgForm"
                                                             oncomplete="proposeCollateralDlg.show();">
                                                <f:setPropertyActionListener value="#{proposeCollateral}"
                                                                             target="#{prescreenMaker.selectProposeCollateralItem}"/>
                                                <f:setPropertyActionListener value="#{rowIndex}"
                                                                             target="#{prescreenMaker.rowIndex}"/>
                                            </p:commandButton>
                                            <p:commandButton title="Remove" icon="ui-icon-trash"
                                                             oncomplete="confirmDeleteProposeCollateralDlg.show()" >
                                                <f:setPropertyActionListener value="#{proposeCollateral}"
                                                                             target="#{prescreenMaker.selectProposeCollateralItem}"/>
                                            </p:commandButton>
                                        </p:column>

                                    </p:dataTable>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="2">
                                    <div class="separate"> </div>
                                </td>
                            </tr>
                            <tr><td colspan="2"><p:spacer width="5"/></td></tr>
                            <tr>
                                <td class="center" colspan="100%">
                                    <p:commandButton id="btnSave" value="Save"
                                                     binding="#{savePreMakerButton}"
                                                     styleClass="medium"
                                                     process="@form"
                                                     action="#{prescreenMaker.onSavePrescreen()}"
                                                     update=":frmMain :msgBoxSystemMessagePanel"/>
                                    <p:commandButton id="btnCancel" value="Cancel"
                                                     styleClass="medium"
                                                     process="@this"
                                                     action="#{prescreenMaker.onReset()}"
                                                     update=":frmMain"/>
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
                <div id="bottom_line"><!-- --></div>
            </div>
            <div class="clear"></div>
            <!-- Start Footer -->
            <ui:include src="include/footer.xhtml" />
            <!-- End Footer -->
            <h:inputHidden id="pagename" value="mnuprescreen"/>
            <h:inputHidden id="subpagename" value="submnuprescreen"/>
            </div>
            <p:blockUI block=":frmMain" trigger="btnSave, btnCancel">
                LOADING<br />
                <p:graphicImage value="/resources/images/shared/ajax-loader.gif"/>
            </p:blockUI>
        </h:form>
    </p:panel>

    <p:panel id="msgBoxSystemMessagePanel" styleClass="panel">
        <p:confirmDialog id="msgBoxSystemMessageDialog" widgetVar="msgBoxSystemMessageDlg" styleClass="messageDialog"
                         closable="false"
                         header="#{prescreenMaker.messageHeader}" >
            <f:facet name="message">
                <h:outputText value="#{prescreenMaker.message}" escape="false"/>
            </f:facet>
            <p:commandButton value="OK"
                             process="@this"
                             update="frmMain"
                             oncomplete="msgBoxSystemMessageDlg.hide()"/>
        </p:confirmDialog>
    </p:panel>
    <p:panel id="msgBoxRedirectPanel" styleClass="panel">
        <p:confirmDialog id="msgBoxRedirectDialog" widgetVar="msgBoxRedirectDlg" styleClass="messageDialog"
                         closable="false"
                         header="#{prescreenMaker.messageHeader}" >
            <f:facet name="message">
                <h:outputText value="#{prescreenMaker.message}" escape="false"/>
            </f:facet>
            <p:commandButton value="OK"
                             process="@this"
                             actionListener="#{headerController.onGoToInbox()}"
                             oncomplete="msgBoxRedirectDlg.hide()" />
        </p:confirmDialog>
    </p:panel>

    <p:dialog id="facilityDialog" widgetVar="facilityDlg" header="Facility Information"
              modal="true" width="400" height="150">
        <ui:include src="dialog/prescreenFacilityDialog.xhtml"/>
    </p:dialog>
    <p:dialog id="customerDialog" widgetVar="customerDlg" header="Customer Information"
              onShow="hideWindowsScrollBar();" onHide="showWindowsScrollBar()" resizable="false"
              closable="false"
              modal="true" width="850" height="550">
        <ui:include src="dialog/prescreenCustomerDialog.xhtml"/>
    </p:dialog>
    <p:dialog id="businessDialog" widgetVar="businessDlg" header="Business Information"
              onShow="hideWindowsScrollBar()" onHide="showWindowsScrollBar()" resizable="false"
              modal="true" width="500">
        <ui:include src="dialog/prescreenBusinessDialog.xhtml"/>
    </p:dialog>
    <p:dialog id="proposeCollateralDialog" widgetVar="proposeCollateralDlg" header="Collateral Information"
              onShow="hideWindowsScrollBar()" onHide="showWindowsScrollBar()" resizable="false"
              modal="true" width="400" height="100">
        <ui:include src="dialog/prescreenProposeCollateralDialog.xhtml"/>
    </p:dialog>
    <ui:include src="dialog/confirmDeleteDlg.xhtml">
        <ui:param name="id" value="confirmDeleteCustomerDialog"/>
        <ui:param name="name" value="confirmDeleteCustomerDlg"/>
        <ui:param name="formId" value="frmConfirmDeleteCustomer"/>
        <ui:param name="controller" value="#{prescreenMaker}"/>
        <ui:param name="action" value="onDeleteCustomerInfo"/>
        <ui:param name="update" value=":frmMain"/>
    </ui:include>
    <ui:include src="dialog/confirmDeleteDlg.xhtml">
        <ui:param name="id" value="confirmDeleteFacilityDialog"/>
        <ui:param name="name" value="confirmDeleteFacilityDlg"/>
        <ui:param name="formId" value="frmConfirmDeleteFacility"/>
        <ui:param name="controller" value="#{prescreenMaker}"/>
        <ui:param name="action" value="onDeleteFacility"/>
        <ui:param name="update" value=":frmMain"/>
    </ui:include>
    <ui:include src="dialog/confirmDeleteDlg.xhtml">
        <ui:param name="id" value="confirmDeleteBusinessDialog"/>
        <ui:param name="name" value="confirmDeleteBusinesssDlg"/>
        <ui:param name="formId" value="frmConfirmDeleteBusiness"/>
        <ui:param name="controller" value="#{prescreenMaker}"/>
        <ui:param name="action" value="onDeleteBusinessInfo"/>
        <ui:param name="update" value=":frmMain"/>
    </ui:include>
    <ui:include src="dialog/confirmDeleteDlg.xhtml">
        <ui:param name="id" value="confirmDeleteProposeCollateralDialog"/>
        <ui:param name="name" value="confirmDeleteProposeCollateralDlg"/>
        <ui:param name="formId" value="frmConfirmDeleteProposeCollateral"/>
        <ui:param name="controller" value="#{prescreenMaker}"/>
        <ui:param name="action" value="onDeleteProposeCollateral"/>
        <ui:param name="update" value=":frmMain"/>
    </ui:include>

    <p:confirmDialog id="msgBoxInvalidCitizenSearchDialog" widgetVar="msgBoxInvalidCitizenSearchDlg" styleClass="messageDialog"
                     closable="false"
                     header="Invalid input citizen id" message="Invalid input citizen id. please check value.">
        <p:commandButton value="OK"
                         process="@this"
                         update=":frmMain"
                         oncomplete="closeMessageCitizenDialog('msgBoxInvalidCitizenSearchDlg', 'customerDlgForm\\:dlgInputSearchText')"/>
    </p:confirmDialog>
    <p:confirmDialog id="msgBoxInvalidCitizenBrDialog" widgetVar="msgBoxInvalidCitizenBrDlg" styleClass="messageDialog"
                     closable="false"
                     header="Invalid input citizen id" message="Invalid input citizen id. please check value.">
        <p:commandButton value="OK"
                         process="@this"
                         update=":frmMain"
                         oncomplete="closeMessageCitizenDialog('msgBoxInvalidCitizenBrDlg', 'customerDlgForm\\:dlgInputBrCitizenText')"/>
    </p:confirmDialog>
    <p:confirmDialog id="msgBoxInvalidCitizenSpDialog" widgetVar="msgBoxInvalidCitizenSpDlg" styleClass="messageDialog"
                     closable="false"
                     header="Invalid input citizen id" message="Invalid input citizen id. please check value.">
        <p:commandButton value="OK"
                         process="@this"
                         update=":frmMain"
                         oncomplete="closeMessageCitizenDialog('msgBoxInvalidCitizenSpDlg', 'customerDlgForm\\:dlgInputSpCitizenText')"/>
    </p:confirmDialog>
    <p:confirmDialog id="msgBoxInvalidCitizenJrDialog" widgetVar="msgBoxInvalidCitizenJrDlg" styleClass="messageDialog"
                     closable="false"
                     header="Invalid input citizen id" message="Invalid input citizen id. please check value.">
        <p:commandButton value="OK"
                         process="@this"
                         update=":frmMain"
                         oncomplete="closeMessageCitizenDialog('msgBoxInvalidCitizenJrDlg', 'customerDlgForm\\:dlgInputJrRegistrationText')"/>
    </p:confirmDialog>
</h:body>
</f:view>
</html>