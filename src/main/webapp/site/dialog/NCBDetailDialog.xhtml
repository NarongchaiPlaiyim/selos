<ui:composition
        xmlns="http://www.w3.org/1999/xhtml"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:p="http://primefaces.org/ui">

<p:panel id="ncbDlgPanel" styleClass="panel-dialog">
<h:form id="ncbDlgForm">
<table class="content_form">
<tr>
    <td class="title" style="width: 230px;">
        <h:outputText value="#{msg.get('app.dlg.loanAccountType')}"/>
    </td>
    <td >
        <p:selectOneMenu id="dlgType"
                         value="#{ncbInfo.ncbDetailView.accountType.id}"
                         styleClass="largest"
                         size="1"
                         required="#{not empty param[addRowData.clientId]}">
            <f:selectItem itemLabel="#{msg.get('app.select.item0')}" itemValue=""/>
            <f:selectItems value="#{ncbInfo.accountTypeList}"
                           var="dlgAccountTypeList"
                           itemLabel="#{dlgAccountTypeList.name}"
                           itemValue="#{dlgAccountTypeList.id}"/>
            <p:ajax event="change" listener="#{ncbInfo.onChangeAccountType}" process=":ncbDlgForm:dlgType" update=":ncbDlgForm:panelNoOfmonthsPaymentFlag"/>
        </p:selectOneMenu>
    </td>
</tr>
<tr>
    <td class="title" style="width: 230px;">
        <h:outputText value="#{msg.get('app.dlg.isTMBAccount')}"/>
    </td>
    <td>
        <h:selectOneRadio id="radioTmbAccount" value="#{ncbInfo.ncbDetailView.TMBAccount}"
                          required="#{not empty param[addRowData.clientId]}">
            <f:selectItem itemLabel="Yes" itemValue="1"/>
            <f:selectItem itemLabel="No" itemValue="0"/>
        </h:selectOneRadio>
    </td>
</tr>
<tr>
    <td class="title" style="width: 230px;">
        <h:outputText value="#{msg.get('app.dlg.loanAccountStatus')}"/>
    </td>
    <td>
        <p:selectOneMenu id="dlgStatus"
                         value="#{ncbInfo.ncbDetailView.accountStatus.id}"
                         styleClass="largest"
                         size="1"
                         required="#{not empty param[addRowData.clientId]}">
            <f:selectItem itemLabel="#{msg.get('app.select.item0')}" itemValue=""/>
            <f:selectItems value="#{ncbInfo.accountStatusList}"
                           var="dlgAccountStatusList"
                           itemLabel="#{dlgAccountStatusList.name}"
                           itemValue="#{dlgAccountStatusList.id}"/>
        </p:selectOneMenu>

    </td>
</tr>
<tr>
    <td class="title" style="width: 230px;">
        <h:outputText value="#{msg.get('app.dlg.dateOfInfo')}"/>
    </td>
    <td>
        <p:calendar value="#{ncbInfo.ncbDetailView.dateOfInfo}" id="dateOfInfo"  pattern="dd/MM/yyyy"
                    showOn="button" required="#{not empty param[addRowData.clientId]}">
            <f:convertDateTime pattern="dd/MM/yyyy"/>
        </p:calendar>
    </td>
</tr>
<tr>
    <td class="title" style="width: 230px;">
        <h:outputText value="#{msg.get('app.dlg.accountOpenDate')}"/>
    </td>
    <td>
        <p:calendar value="#{ncbInfo.ncbDetailView.accountOpenDate}" id="accountOpenDate"  pattern="dd/MM/yyyy"
                    showOn="button" required="#{not empty param[addRowData.clientId]}">
            <f:convertDateTime pattern="dd/MM/yyyy"/>
        </p:calendar>
    </td>
</tr>
<tr>
    <td class="title" style="width: 230px;">
        <h:outputText value="#{msg.get('app.dlg.limit')}"/>
    </td>
    <td>
        <p:inputText id="limit" styleClass="large" style="text-align: right"
                     value="#{ncbInfo.ncbDetailView.limit}" required="#{not empty param[addRowData.clientId]}">
            <f:convertNumber pattern="#,##0" minFractionDigits="2" maxFractionDigits="2"/>
            <p:ajax event="blur" update=":ncbDlgForm:limit"/>
        </p:inputText>
    </td>
</tr>
<tr>
    <td class="title" style="width: 230px;">
        <h:outputText value="#{msg.get('app.dlg.outstanding')}"/>
    </td>
    <td>
        <p:inputText id="outstanding" styleClass="large" style="text-align: right"
                     value="#{ncbInfo.ncbDetailView.outstanding}" required="#{not empty param[addRowData.clientId]}">
            <f:convertNumber pattern="#,##0" minFractionDigits="2" maxFractionDigits="2"/>
            <p:ajax event="blur" update=":ncbDlgForm:outstanding"/>
        </p:inputText>
    </td>
</tr>
<tr>
    <td class="title" style="width: 230px;">
        <h:outputText value="#{msg.get('app.dlg.installment')}"/>
    </td>
    <td>
        <p:inputText id="installment" styleClass="large"  style="text-align: right"
                     value="#{ncbInfo.ncbDetailView.installment}" required="#{not empty param[addRowData.clientId]}">
            <f:convertNumber pattern="#,##0" minFractionDigits="2" maxFractionDigits="2"/>
            <p:ajax event="blur" update=":ncbDlgForm:installment"/>
        </p:inputText>
    </td>
</tr>
<tr>
    <td class="title" style="width: 230px;">
        <h:outputText value="#{msg.get('app.dlg.dateOfDebtRestructuring')}"/>
    </td>
    <td>
        <p:calendar value="#{ncbInfo.ncbDetailView.dateOfDebtRestructuring}"  pattern="dd/MM/yyyy"
                    id="dateOfDebtRestructuring" showOn="button" required="#{not empty param[addRowData.clientId]}">
            <f:convertDateTime pattern="dd/MM/yyyy"/>
        </p:calendar>

    </td>
</tr>
<tr>
    <td class="title" style="width: 230px;">
        <h:outputText value="#{msg.get('app.dlg.typeOfCurrentPayment')}"/>
    </td>
    <td>
        <p:selectOneMenu id="currentPayment"
                         value="#{ncbInfo.ncbDetailView.currentPayment.id}"
                         style="width: 200px;"
                         size="1"
                         required="true">
            <f:selectItem itemLabel="#{msg.get('app.select.item0')}" itemValue=""/>
            <f:selectItems value="#{ncbInfo.settlementStatusList}"
                           var="dlgtdrCurrentList"
                           itemLabel="#{dlgtdrCurrentList.name}"
                           itemValue="#{dlgtdrCurrentList.id}"/>
        </p:selectOneMenu>

    </td>
</tr>
<tr>
    <td class="title" style="width: 230px;">
        <h:outputText value="#{msg.get('app.dlg.typeOfHistoryPayment')}"/>
    </td>
    <td>
        <p:selectOneMenu id="historyPayment"
                         value="#{ncbInfo.ncbDetailView.historyPayment.id}"
                         style="width: 200px;"
                         size="1"
                         required="true">
            <f:selectItem itemLabel="#{msg.get('app.select.item0')}"  itemValue=""/>
            <f:selectItems value="#{ncbInfo.settlementStatusList}"
                           var="dlgHistoryList"
                           itemLabel="#{dlgHistoryList.name}"
                           itemValue="#{dlgHistoryList.id}"/>
        </p:selectOneMenu>
    </td>
</tr>
<tr>
    <td class="title" style="width: 230px;">
        <h:outputText value="#{msg.get('app.dlg.noOfOutstandingPaymentIn12months')}"/>
    </td>
    <td>
        <p:inputText name="noOfOutstandingPaymentIn12months"  style="text-align: right"
                     value="#{ncbInfo.ncbDetailView.noOfOutstandingPaymentIn12months}"
                     required="#{not empty param[addRowData.clientId]}"/>
    </td>
</tr>
<tr>
    <td class="title" style="width: 230px;">
        <h:outputText value="#{msg.get('app.dlg.noOfOverLimit')}"/>
    </td>
    <td>
        <p:inputText name="noOfOverLimit" value="#{ncbInfo.ncbDetailView.noOfOverLimit}"   style="text-align: right"
                     required="#{not empty param[addRowData.clientId]}"/>
    </td>
</tr>
<tr>
    <p:panel style="border-width: 0;"  id="panelNoOfmonthsPaymentFlag" >
<!--        <p:panel style="border-width: 0;"  rendered="#{ncbInfo.ncbDetailView.monthFlagPage}">-->
        <p:panel style="border-width: 0;" >
            <td class="title" style="width: 230px;">
                <h:outputText value="#{msg.get('app.dlg.noOfmonthsPayment')}"/>
            </td>
            <td>
                <h:selectOneMenu value="#{ncbInfo.ncbDetailView.noOfmonthsPayment}" style="text-align: right">
                    <f:selectItem itemLabel="#{msg.get('app.select.item0')}"  itemValue="0"/>
                    <f:selectItem itemLabel="1" itemValue="1"/>
                    <f:selectItem itemLabel="2" itemValue="2"/>
                    <f:selectItem itemLabel="3" itemValue="3"/>
                    <f:selectItem itemLabel="4" itemValue="4"/>
                    <f:selectItem itemLabel="5" itemValue="5"/>
                    <f:selectItem itemLabel="6" itemValue="6"/>
                    <p:ajax event="change"
                            listener="#{ncbInfo.onchangeToGenMoneyOfmonthsPayment()}"
                            process="@this"
                            update=":ncbDlgForm:genTextBoxFlagPanel"/>
                </h:selectOneMenu>
            </td>
        </p:panel>
    </p:panel>
</tr>
<tr>
    <td></td>
    <td  class="center">
        <p:panel style="border-width: 0;" id="genTextBoxFlagPanel">
            <p:panel style="border-width: 0;"  rendered="#{ncbInfo.genTextBoxFlag}">
                <table class="content_form">
                    <tr>
                        <td class="title" style="width: 60px;text-align: left;">
                            <h:outputText value="#{msg.get('app.dlg.monthNo1')}"  rendered="#{ncbInfo.monthRender1}"/>
                        </td>
                        <td>
                            <p:inputText id="month1" value="#{ncbInfo.ncbDetailView.month1}" style="text-align: right" rendered="#{ncbInfo.monthRender1}">
                                <f:convertNumber pattern="#,##0" minFractionDigits="2" maxFractionDigits="2"/>
                                <p:ajax event="blur" update="@this"/>
                            </p:inputText>
                        </td>
                        <td class="title" style="width: 60px;text-align: left;" >
                            <h:outputText value="#{msg.get('app.dlg.monthNo2')}" rendered="#{ncbInfo.monthRender2}"/>
                        </td>
                        <td>
                            <p:inputText id="month2"
                                         value="#{ncbInfo.ncbDetailView.month2}" style="text-align: right" rendered="#{ncbInfo.monthRender2}">
                                <f:convertNumber pattern="#,##0" minFractionDigits="2" maxFractionDigits="2"/>
                                <p:ajax event="blur" update="@this"/>
                            </p:inputText>
                        </td>
                        <td class="title" style="width: 60px;text-align: left;">
                            <h:outputText value="#{msg.get('app.dlg.monthNo3')}"  rendered="#{ncbInfo.monthRender3}"/>
                        </td>
                        <td>
                            <p:inputText id="month3"
                                         value="#{ncbInfo.ncbDetailView.month3}"  style="text-align: right" rendered="#{ncbInfo.monthRender3}">
                                <f:convertNumber pattern="#,##0" minFractionDigits="2" maxFractionDigits="2"/>
                                <p:ajax event="blur" update="@this"/>
                            </p:inputText>
                        </td>
                    </tr>
                    <tr>
                        <td class="title" style="width: 60px;text-align: left;">
                            <h:outputText value="#{msg.get('app.dlg.monthNo4')}"  rendered="#{ncbInfo.monthRender4}"/>
                        </td>
                        <td>
                            <p:inputText id="month4"
                                         value="#{ncbInfo.ncbDetailView.month4}" style="text-align: right" rendered="#{ncbInfo.monthRender4}">
                                <f:convertNumber pattern="#,##0" minFractionDigits="2" maxFractionDigits="2"/>
                                <p:ajax event="blur" update="@this"/>
                            </p:inputText>
                        </td>
                        <td class="title" style="width: 50px;text-align: left;">
                            <h:outputText value="#{msg.get('app.dlg.monthNo5')}"  rendered="#{ncbInfo.monthRender5}"/>
                        </td>
                        <td>
                            <p:inputText id="month5"
                                         value="#{ncbInfo.ncbDetailView.month5}" style="text-align: right" rendered="#{ncbInfo.monthRender5}">
                                <f:convertNumber pattern="#,##0" minFractionDigits="2" maxFractionDigits="2"/>
                                <p:ajax event="blur" update="@this"/>
                            </p:inputText>
                        </td>
                        <td class="title" style="width: 50px;text-align: left;">
                            <h:outputText value="#{msg.get('app.dlg.monthNo6')}"  rendered="#{ncbInfo.monthRender6}"/>
                        </td>
                        <td>
                            <p:inputText id="month6"
                                         value="#{ncbInfo.ncbDetailView.month6}" style="text-align: right" rendered="#{ncbInfo.monthRender6}">
                                <f:convertNumber pattern="#,##0" minFractionDigits="2" maxFractionDigits="2"/>
                                <p:ajax event="blur" update="@this"/>
                            </p:inputText>
                        </td>
                    </tr>
                </table>
            </p:panel>
        </p:panel>
    </td>
</tr>
<tr>
    <td class="title" style="width: 230px;">
        <h:outputText value="#{msg.get('app.dlg.refinanceFlag')}"/>
    </td>
    <td>
        <h:selectOneRadio id="radioRefinanceFlag" value="#{ncbInfo.ncbDetailView.refinanceFlag}"
                          required="#{not empty param[addRowData.clientId]}">
            <f:selectItem itemLabel="Yes" itemValue="1"/>
            <f:selectItem itemLabel="No" itemValue="0"/>
        </h:selectOneRadio>
    </td>
</tr>
<tr>
    <td class="title" style="width: 230px;">
        <h:outputText value="#{msg.get('app.dlg.wcFlag')}"/>
    </td>
    <td>
        <h:selectOneRadio id="radioWCFlag" value="#{ncbInfo.ncbDetailView.wcFlag}"
                          required="#{not empty param[addRowData.clientId]}">
            <f:selectItem itemLabel="Yes" itemValue="1"/>
            <f:selectItem itemLabel="No" itemValue="0"/>
        </h:selectOneRadio>
    </td>
</tr>
<tr>
    <td colspan="2" class="center">
        <p:commandButton
                id="saveBtn"
                binding="#{addRowData}"
                value="#{msg.get('app.okButton')}"
                styleClass="small"
                actionListener="#{ncbInfo.onSaveNcbRecord}"
                process=":ncbDlgForm"
                update=":ncbDlgForm,:frmMain:resultNcbDetail"
                oncomplete="handlencbInfoRequest(xhr, status, args)"/>

        <p:commandButton
                id="cancelBtn"
                value="#{msg.get('app.cancelButton')}"
                styleClass="small"
                onclick="ncbDlg.hide()"/>
    </td>
</tr>
</table>
</h:form>
 </p:panel>
<p:blockUI widgetVar="blockNcbDlg" block="ncbDlgPanel" trigger=":ncbDlgForm:saveBtn">
    LOADING<br />
    <p:graphicImage value="/resources/images/shared/ajax-loader.gif"/>
</p:blockUI>
</ui:composition>