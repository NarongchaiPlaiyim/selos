<ui:composition
        xmlns="http://www.w3.org/1999/xhtml"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:p="http://primefaces.org/ui"
        xmlns:clv="http://clevel.com/ui">

<p:panel id="ncbDlgPanel" styleClass="panel-dialog">
<h:form id="ncbDlgForm">
<table class="content_form">
<tr>
    <td class="title" style="width: 250px;">
        <h:outputText value="#{msg.get('app.dlg.loanAccountType')}"/>
    </td>
    <td>
        <p:selectOneMenu id="dlgType"
                         value="#{ncbInfo.ncbDetailView.accountType.id}"
                         styleClass="largest"
                         size="1"
                         required="#{not empty param[addRowData.clientId]}">
            <f:selectItem itemLabel="#{msg.get('app.select.item0')}" itemValue=""/>
            <f:selectItems value="#{ncbInfo.accountTypeList}"
                           var="dlgAccountTypeList"
                           itemLabel="#{dlgAccountTypeList.name}"
                           itemValue="#{dlgAccountTypeList.id}"/>

        </p:selectOneMenu>
    </td>
</tr>
<tr>
    <td class="title" style="width: 250px;">
        <h:outputText value="#{msg.get('app.dlg.isTMBAccount')}"/>
    </td>
    <td>
        <p:selectOneRadio id="radioTmbAccount" value="#{ncbInfo.ncbDetailView.TMBAccount}"
                          required="#{not empty param[addRowData.clientId]}">
            <f:selectItem itemLabel="Yes" itemValue="2"/>
            <f:selectItem itemLabel="No" itemValue="1"/>
        </p:selectOneRadio>
    </td>
</tr>
<tr>
    <td class="title" style="width: 250px;">
        <h:outputText value="#{msg.get('app.dlg.loanAccountStatus')}"/>
    </td>
    <td>
        <p:selectOneMenu id="dlgStatus"
                         value="#{ncbInfo.ncbDetailView.accountStatus.id}"
                         styleClass="largest"
                         size="1"
                         required="#{not empty param[addRowData.clientId]}">
            <f:selectItem itemLabel="#{msg.get('app.select.item0')}" itemValue=""/>
            <f:selectItems value="#{ncbInfo.accountStatusList}"
                           var="dlgAccountStatusList"
                           itemLabel="#{dlgAccountStatusList.name}"
                           itemValue="#{dlgAccountStatusList.id}"/>
        </p:selectOneMenu>

    </td>
</tr>
<tr>
    <td class="title" style="width: 250px;">
        <h:outputText value="#{msg.get('app.dlg.dateOfInfo')}"/>
    </td>
    <td>
        <!--<p:calendar value="#{ncbInfo.ncbDetailView.dateOfInfo}"
                    id="dateOfInfo"
                    pattern="dd/MM/yyyy"
                    showOn="button"
                    required="#{not empty param[addRowData.clientId]}"
                    locale="th_TH"
                    timeZone="Asia/Bangkok"
                    yearRange="2440:3000">
            <f:convertDateTime pattern="dd/MM/yyyy" locale="th_TH"/>
        </p:calendar>-->

        <clv:BECalendar value="#{ncbInfo.ncbDetailView.dateOfInfo}" id="dateOfInfo" showOn="button" pattern="dd/MM/yyyy"
                        navigator="true" locale="th_TH" showButtonPanel="true"/>

    </td>
</tr>
<tr>
    <td class="title" style="width: 250px;">
        <h:outputText value="#{msg.get('app.dlg.accountOpenDate')}"/>
    </td>
    <td>
        <!-- <p:calendar value="#{ncbInfo.ncbDetailView.accountOpenDate}"
                     id="accountOpenDate"
                     pattern="dd/MM/yyyy"
                     showOn="button"
                     required="#{not empty param[addRowData.clientId]}"
                     locale="th_TH"
                     timeZone="Asia/Bangkok"
                     yearRange="2440:3000">
             <f:convertDateTime pattern="dd/MM/yyyy" locale="th_TH"/>
         </p:calendar>-->
        <clv:BECalendar value="#{ncbInfo.ncbDetailView.accountOpenDate}" id="accountOpenDate" showOn="button"
                        pattern="dd/MM/yyyy"
                        navigator="true" locale="th_TH" showButtonPanel="true"/>
    </td>
</tr>
<tr>
    <td class="title" style="width: 250px;">
        <h:outputText value="#{msg.get('app.dlg.limit')}"/>
    </td>
    <td>
        <p:inputText id="limit"
                     styleClass="large"
                     style="text-align: right"
                     maxlength="18"
                     value="#{ncbInfo.ncbDetailView.limit}"
                     required="#{not empty param[addRowData.clientId]}">
            <f:convertNumber pattern="#,##0" minFractionDigits="2" maxFractionDigits="2"/>
            <p:ajax event="blur" update=":ncbDlgForm:limit"/>
        </p:inputText>
    </td>
</tr>
<tr>
    <td class="title" style="width: 250px;">
        <h:outputText value="#{msg.get('app.dlg.outstanding')}"/>
    </td>
    <td>
        <p:inputText id="outstanding"
                     styleClass="large"
                     style="text-align: right"
                     maxlength="18"
                     value="#{ncbInfo.ncbDetailView.outstanding}"
                     required="#{not empty param[addRowData.clientId]}">
            <f:convertNumber pattern="#,##0" minFractionDigits="2" maxFractionDigits="2"/>
            <p:ajax event="blur" update=":ncbDlgForm:outstanding"/>
        </p:inputText>
    </td>
</tr>
<tr>
    <td class="title" style="width: 250px;">
        <h:outputText value="#{msg.get('app.dlg.installment')}"/>
    </td>
    <td>
        <p:inputText id="installment"
                     styleClass="large"
                     style="text-align: right"
                     maxlength="18"
                     value="#{ncbInfo.ncbDetailView.installment}"
                     required="#{not empty param[addRowData.clientId]}">
            <f:convertNumber pattern="#,##0" minFractionDigits="2" maxFractionDigits="2"/>
            <p:ajax event="blur" update=":ncbDlgForm:installment"/>
        </p:inputText>
    </td>
</tr>
<tr>
    <td class="title" style="width: 250px;">
        <h:outputText value="#{msg.get('app.dlg.dateOfDebtRestructuring')}"/>
    </td>
    <td>
        <!-- <p:calendar value="#{ncbInfo.ncbDetailView.dateOfDebtRestructuring}"
                     pattern="dd/MM/yyyy"
                     id="dateOfDebtRestructuring"
                     showOn="button"
                     required="#{not empty param[addRowData.clientId]}"
                     locale="th_TH"
                     timeZone="Asia/Bangkok"
                     yearRange="2440:3000">
             <f:convertDateTime pattern="dd/MM/yyyy" locale="th_TH"/>
         </p:calendar>-->
        <clv:BECalendar value="#{ncbInfo.ncbDetailView.dateOfDebtRestructuring}" id="dateOfDebtRestructuring"
                        showOn="button" pattern="dd/MM/yyyy"
                        navigator="true" locale="th_TH" showButtonPanel="true"/>
    </td>
</tr>
<tr>
    <td class="title" style="width: 250px;">
        <h:outputText value="#{msg.get('app.dlg.typeOfCurrentPayment')}"/>
    </td>
    <td>
        <p:selectOneMenu id="currentPayment"
                         value="#{ncbInfo.ncbDetailView.currentPayment.id}"
                         style="width: 200px;"
                         size="1"
                         required="true">
            <f:selectItem itemLabel="#{msg.get('app.select.item0')}" itemValue=""/>
            <f:selectItems value="#{ncbInfo.settlementStatusList}"
                           var="dlgtdrCurrentList"
                           itemLabel="#{dlgtdrCurrentList.name}"
                           itemValue="#{dlgtdrCurrentList.id}"/>
        </p:selectOneMenu>

    </td>
</tr>
<tr>
    <td class="title" style="width: 250px;">
        <h:outputText value="#{msg.get('app.dlg.typeOfHistoryPayment')}"/>
    </td>
    <td>
        <p:selectOneMenu id="historyPayment"
                         value="#{ncbInfo.ncbDetailView.historyPayment.id}"
                         style="width: 200px;"
                         size="1"
                         required="true">
            <f:selectItem itemLabel="#{msg.get('app.select.item0')}" itemValue=""/>
            <f:selectItems value="#{ncbInfo.settlementStatusList}"
                           var="dlgHistoryList"
                           itemLabel="#{dlgHistoryList.name}"
                           itemValue="#{dlgHistoryList.id}"/>
        </p:selectOneMenu>
    </td>
</tr>
<tr>
    <td class="title" style="width: 250px;">
        <h:outputText value="#{msg.get('app.dlg.noOfOutstandingPaymentIn12months')}"/>
    </td>
    <td>
        <p:inputText name="noOfOutstandingPaymentIn12months"
                     style="text-align: right"
                     value="#{ncbInfo.ncbDetailView.noOfOutstandingPaymentIn12months}"
                     required="#{not empty param[addRowData.clientId]}"
                     integerOnly="true">
            <p:ajax event="blur" update=":ncbDlgForm" process="@this"/>
        </p:inputText>
    </td>
</tr>
<tr>
    <td class="title" style="width: 250px;">
        <h:outputText value="#{msg.get('app.dlg.noOfOverLimit')}"/>
    </td>
    <td>
        <p:inputText name="noOfOverLimit"
                     value="#{ncbInfo.ncbDetailView.noOfOverLimit}"
                     style="text-align: right"
                     required="#{not empty param[addRowData.clientId]}"
                     integerOnly="true">
            <p:ajax event="blur" update=":ncbDlgForm" process="@this"/>
        </p:inputText>
    </td>
</tr>
<tr>
    <td class="title" style="width: 250px;">
        <h:outputText value="#{msg.get('app.dlg.refinanceFlag')}"/>
    </td>
    <td>
        <p:selectOneRadio id="radioRefinanceFlag" value="#{ncbInfo.ncbDetailView.refinanceFlag}"
                          required="#{not empty param[addRowData.clientId]}">
            <f:selectItem itemLabel="Yes" itemValue="2"/>
            <f:selectItem itemLabel="No" itemValue="1"/>
        </p:selectOneRadio>
    </td>
</tr>
<tr>
    <td class="title" style="width: 250px;">
        <h:outputText value="#{msg.get('app.dlg.wcFlag')}"/>
    </td>
    <td>
        <p:selectOneRadio id="radioWCFlag" value="#{ncbInfo.ncbDetailView.wcFlag}"
                          required="#{not empty param[addRowData.clientId]}">
            <f:selectItem itemLabel="Yes" itemValue="2"/>
            <f:selectItem itemLabel="No" itemValue="1"/>
        </p:selectOneRadio>
    </td>
</tr>
<tr>
    <td colspan="2" class="center">
        <p:commandButton
                id="saveBtn"
                binding="#{addRowData}"
                value="#{msg.get('app.okButton')}"
                styleClass="small"
                actionListener="#{ncbInfo.onSaveNcbRecord}"
                process=":ncbDlgForm"
                update=":ncbDlgForm,:frmMain:resultNcbDetail"
                oncomplete="handlencbInfoRequest(xhr, status, args)"/>

        <p:commandButton
                id="cancelBtn"
                value="#{msg.get('app.cancelButton')}"
                styleClass="small"
                onclick="PF('ncbDlg').hide()"/>
    </td>
</tr>
</table>
</h:form>
</p:panel>
<p:blockUI widgetVar="blockNcbDlg" block="ncbDlgPanel" trigger=":ncbDlgForm:saveBtn">
    LOADING<br/>
    <p:graphicImage value="/resources/images/shared/ajax-loader.gif"/>
</p:blockUI>
</ui:composition>