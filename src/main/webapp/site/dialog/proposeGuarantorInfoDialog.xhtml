<ui:composition
        xmlns="http://www.w3.org/1999/xhtml"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:p="http://primefaces.org/ui">

    <p:panel id="guarantorDlgPanel" styleClass="panel-dialog">
        <h:form id="guarantorDlgForm">
            <table class="content_form">
                <tr>
                    <td class="title" style="width: 150px;">
                        <h:outputLabel value="#{msg.get('app.credit.facility.propose.label.guarantorDlg.guarantorName')}"/>
                    </td>
                    <td style="width: 400px;">
                        <p:selectOneMenu id="guarantorName"
                                         value="#{creditFacPropose.newGuarantorDetailView.guarantorName.id}"
                                         size="1"
                                         style="width: 200px;"
                                         required="true">
                            <f:selectItem itemLabel="#{msg.get('app.select.item0')}" itemValue=""/>
                            <f:selectItems value="#{creditFacPropose.guarantorList}"
                                           var="guarantor"
                                           itemLabel="#{guarantor.firstNameTh} #{guarantor.lastNameTh}"
                                           itemValue="#{guarantor.id}"/>
                        </p:selectOneMenu>
                    </td>
                </tr>
                <tr>
                    <td class="title">
                        <h:outputLabel value="#{msg.get('app.credit.facility.propose.label.guarantorDlg.TCGLGNo')}"/>
                    </td>
                    <td>
                        <p:inputText id="tcgLgNo" value="#{creditFacPropose.newGuarantorDetailView.tcgLgNo}"
                                     style="text-align:right">
                        </p:inputText>
                    </td>
                </tr>
                <tr>
                    <td class="title">
                        <h:outputLabel value="#{msg.get('app.credit.facility.propose.label.guarantorDlg.creditType')}"/>
                    </td>
                    <td class="center">
                        <table class="table_noborder">
                            <tr>
                                <td>
                                    <p:dataTable style="width: 90%"
                                                 id="creditTypeTable"
                                                 value="#{creditFacPropose.newGuarantorDetailView.newCreditDetailViewList}"
                                                 var="creditTypeItem"
                                                 rowKey="#{creditTypeItem.NewCreditDetailView}"
                                                 rowIndexVar="rowIndex">

                                        <p:columnGroup type="header">
                                            <p:row>
                                                <p:column style="width:20px;padding: 5px 10px !important;"/>
                                                <p:column style="width:150px;padding: 5px 10px !important;"
                                                          headerText="#{msg.get('app.credit.facility.propose.label.collateral.account')}"/>
                                                <p:column style="width:150px;padding: 5px 10px !important;"
                                                          headerText="#{msg.get('app.credit.facility.propose.label.collateral.requestCreditType')}"/>
                                                <p:column style="width:150px;padding: 5px 10px !important;"
                                                          headerText="#{msg.get('app.credit.facility.propose.label.collateral.productProgram')}"/>
                                                <p:column style="width:150px;padding: 5px 10px !important;"
                                                          headerText="#{msg.get('app.credit.facility.propose.label.collateral.creditFacility')}"/>
                                                <p:column style="width:120px;padding: 5px 10px !important;"
                                                          headerText="#{msg.get('app.credit.facility.propose.label.collateral.limit')}"/>
                                                <p:column style="width:120px;padding: 5px 10px !important;"
                                                          headerText="#{msg.get('app.credit.facility.propose.label.guarantor.guaranteeAmount')}"/>
                                            </p:row>

                                        </p:columnGroup>

                                        <p:column styleClass="center">
                                            <h:selectBooleanCheckbox value="#{creditTypeItem.noFlag}"/>
                                        </p:column>

                                        <p:column styleClass="center">
                                            <h:outputText value="#{creditTypeItem.accountName}"/><br/>
                                            <h:outputText value="#{creditTypeItem.accountNumber}  #{creditTypeItem.accountSuf}"/>
                                        </p:column>

                                        <p:column styleClass="center">
                                            <h:outputText value="#{creditTypeItem.requestType == 2 ? msg.get('app.label.new') : msg.get('app.label.change')}"/>
                                        </p:column>

                                        <p:column styleClass="center">
                                            <h:outputText value="#{creditTypeItem.productProgram.name}"/>
                                        </p:column>

                                        <p:column styleClass="center">
                                            <h:outputText value="#{creditTypeItem.creditType.name}"/>
                                        </p:column>

                                        <p:column styleClass="right">
                                            <h:outputText value="#{creditTypeItem.limit}">
                                                <f:convertNumber pattern="#,##0" minFractionDigits="2" maxFractionDigits="2"/>
                                            </h:outputText>
                                        </p:column>

                                        <p:column styleClass="right">
                                            <p:inputText value="#{creditTypeItem.guaranteeAmount}" maxlength="18"  style="text-align:right">
                                                <f:convertNumber pattern="#,##0" minFractionDigits="2" maxFractionDigits="2"/>
                                                <p:ajax event="blur" update="@this"/>
                                            </p:inputText>
                                        </p:column>

                                    </p:dataTable>
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
                <tr>
                    <td colspan="2" class="center">
                        <p:commandButton
                                id="saveGuarantorDlg"
                                value="#{msg.get('app.credit.facility.propose.okButton')}"
                                binding="#{addGuarantorDlg}"
                                styleClass="small"
                                action="#{creditFacPropose.onSaveGuarantorInfoDlg}"
                                process=":guarantorDlgForm"
                                update=":guarantorDlgForm,:frmMain,:msgBoxSystemMessagePanel"
                                oncomplete="handleGuarantorInfoRequest(xhr, status, args)"/>

                        <p:commandButton
                                value="#{msg.get('app.credit.facility.propose.cancelButton')}"
                                styleClass="small"
                                onclick="PF('guarantorInfoDlg').hide()"
                                update=":guarantorDlgForm"/>
                    </td>
                </tr>

            </table>
        </h:form>
    </p:panel>

    <p:blockUI widgetVar="blockGuarantorDlg" block="guarantorDlgPanel" trigger=":guarantorDlgForm:saveGuarantorDlg">
        LOADING<br/>
        <p:graphicImage value="/resources/images/shared/ajax-loader.gif"/>
    </p:blockUI>

</ui:composition>