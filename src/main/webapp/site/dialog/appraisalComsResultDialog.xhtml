<ui:composition
        xmlns="http://www.w3.org/1999/xhtml"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:p="http://primefaces.org/ui">
<h:form id="appraisalComsDlgForm">
    <table class="content_form" style="width:650px;">
        <tr>
            <td class="title">Job ID :</td>
            <td>
                <p:inputText id="jobID" value="#{appraisalResult.collateralDetailView.jobID}"
                             required="#{not empty param[searchButton.clientId]}"/>
            </td>
            <td>
                <p:commandButton id="dlgSearchBrBtn" value="Retrieve Appraisal Report"
                                 binding="#{searchButton}"
                                 process="@form"
                                 action="#{appraisalResult.onSearchCollateral}"
                                 update=":msgBoxSystemMessagePanel :appraisalComsDlgForm"/>
            </td>
        </tr>
        <tr>
            <td>
                <div class="separate"></div>
            </td>
        </tr>
    </table>
    <p:panel id="pnlComs" styleClass="panel">
        <table>
            <colgroup>
                <col style="width:100px"/>
                <col style="width:200px"/>
                <col style="width:150px"/>
                <col style="width:200px"/>
            </colgroup>
            <tr>
                <td>
                    <p:outputLabel styleClass="title" value="#{msg.get('app.appraisal.collateral.label.jobID')}"/>
                </td>
                <td>
                    <p:outputLabel value="#{appraisalResult.collateralDetailView.jobID}"/>
                </td>
            </tr>
            <tr>
                <td>
                    <p:outputLabel styleClass="title" value="#{msg.get('app.appraisal.collateral.label.appraisalDate')}"/>
                </td>
                <td>
                    <p:outputLabel value="#{appraisalResult.collateralDetailView.appraisalDate}"/>
                </td>
            </tr>
            <tr>
                <td>
                    <p:outputLabel styleClass="title" value="#{msg.get('app.appraisal.collateral.label.AADDecision')}"/>
                </td>
                <td>
                    <p:outputLabel value="#{appraisalResult.collateralDetailView.AADDecision}"/>
                </td>
            </tr>
            <tr>
                <td>
                    <p:outputLabel styleClass="title" value="#{msg.get('app.appraisal.collateral.label.AADDecisionReason')}"/>
                </td>
                <td>
                    <p:outputLabel value="#{appraisalResult.collateralDetailView.AADDecisionReason}"/>
                </td>
                <td>
                    <p:outputLabel styleClass="title" value="#{msg.get('app.appraisal.collateral.label.AADDecisionReasonDetail')}"/>
                </td>
                <td>
                    <p:outputLabel value="#{appraisalResult.collateralDetailView.AADDecisionReasonDetail}"/>
                </td>
            </tr>
            <tr>
                <td>
                    <p:outputLabel styleClass="title" value="#{msg.get('app.appraisal.collateral.label.mortgageCondition')}"/>
                </td>
                <td>
                    <p:outputLabel value="#{appraisalResult.collateralDetailView.mortgageCondition}"/>
                </td>
                <td>
                    <p:outputLabel styleClass="title" value="#{msg.get('app.appraisal.collateral.label.mortgageConditionDetail')}"/>
                </td>
                <td>
                    <p:outputLabel value="#{appraisalResult.collateralDetailView.mortgageConditionDetail}"/>
                </td>
            </tr>
            <tr>
                <td colspan="4">
                    <div class="separate"></div>
                </td>
            </tr>
        </table>
        <table style="width: 100%">
            <colgroup>
                <col style="width:180px"/>
                <col style="width:auto"/>
            </colgroup>
            <ui:repeat value="#{appraisalResult.collateralDetailView.newCollateralHeadDetailViewList}" var="newCollateralHeadDetailView" >
            <tr>
                <td>
                    <p:outputLabel styleClass="title" value="#{msg.get('app.appraisal.collateralHeader.label.titleDeed')}"/>
                </td>
                <td>
                    <p:outputLabel value="#{newCollateralHeadDetailView.titleDeed}"/>
                </td>
            </tr>
            <tr>
                <td>
                    <p:outputLabel styleClass="title" value="#{msg.get('app.appraisal.collateralHeader.label.collateralLocation')}"/>
                </td>
                <td>
                    <p:outputLabel value="#{newCollateralHeadDetailView.collateralLocation}"/>
                </td>
            </tr>
            <tr>
                <td>
                    <p:outputLabel styleClass="title" value="#{msg.get('app.appraisal.collateralHeader.label.appraisalValue')}"/>
                </td>
                <td>
                    <p:outputLabel value="#{newCollateralHeadDetailView.appraisalValue}">
                        <f:convertNumber pattern="#,##0"/>
                    </p:outputLabel>
                </td>
            </tr>
            <tr>
                <td>
                    <p:outputLabel styleClass="title" value="#{msg.get('app.appraisal.collateralHeader.label.headCollType')}"/>
                </td>
                <td>
                    <p:outputLabel value="#{newCollateralHeadDetailView.headCollType.description}"/>
                </td>
            </tr>
            <tr>
                <td colspan="4" style="width: 100%">
                    <p:dataTable tableStyleClass="center" style="width: 100%"
                                 id="subCollateralDetailViewTable"
                                 var="newSubCollateralDetailView"
                                 value="#{newCollateralHeadDetailView.newSubCollateralDetailViewList}"
                                 paginator="false"
                                 rowKey="#{newSubCollateralDetailView.id}"
                                 rowIndexVar="rowIndex" >
                        <p:columnGroup type="header">
                            <p:row>
                                <p:column />
                                <p:column  headerText="#{msg.get('app.appraisal.subCollateral.label.tb.subCollateralType')}"/>
                                <p:column  headerText="#{msg.get('app.appraisal.subCollateral.label.tb.titleDeed')}" />
                                <p:column  headerText="#{msg.get('app.appraisal.subCollateral.label.tb.CollateralOwner')}"/>
                                <p:column  headerText="#{msg.get('app.appraisal.subCollateral.label.tb.appraisalValue')}"/>
                            </p:row>
                        </p:columnGroup>
                        <p:column styleClass="center" style="width:4%;">
                            <p:outputLabel value="#{newSubCollateralDetailView.no}"/>
                        </p:column>
                        <p:column  styleClass="left">
                            <p:outputLabel value="#{newSubCollateralDetailView.subCollateralType.description}"/> <br/>
                            <p:outputLabel value="#{newSubCollateralDetailView.address}"/><br/>
                            <p:outputLabel value="#{newSubCollateralDetailView.landOffice}"/>
                        </p:column>
                        <p:column styleClass="center" style="width:4%;">
                            <p:outputLabel value="#{newSubCollateralDetailView.titleDeed}"/>
                        </p:column>
                        <p:column styleClass="left" >
                            <p:outputLabel value="#{newSubCollateralDetailView.collateralOwner}" />
                        </p:column>
                        <p:column styleClass="right">
                            <p:outputLabel value="#{newSubCollateralDetailView.appraisalValue}">
                                <f:convertNumber pattern="#,##0"/>
                            </p:outputLabel>
                        </p:column>
                    </p:dataTable>
                </td>
            </tr>
            <tr>
                <td colspan="2">
                    <p:spacer width="5px"/>
                </td>
            </tr>
            <tr>
                <td colspan="2">
                    <div class="separate"></div>
                </td>
            </tr>
            <tr>
                <td colspan="2">
                    <p:spacer width="5px"/>
                </td>
            </tr>
            </ui:repeat>
        </table>
    </p:panel>
    <p:panel id="pnlButton" styleClass="center panel">
        <p:commandButton id="btnSaveAppraisalComs"
                         value="#{msg.get('app.button.ok')}"
                         actionListener="#{appraisalResult.onSaveCollateralDetailView()}"
                         process="@form"
                         update=":appraisalComsDlgForm,:frmMain"
                         oncomplete="handleCollateralDetailRequest(xhr, status, args)"/>
        <p:commandButton value="#{msg.get('app.button.cancel')}" onclick="appraisalComsViewDlg.hide()"/>
    </p:panel>
</h:form>
<p:blockUI widgetVar="blockAppraisalComsDlgForm" block="appraisalComsDlgForm" trigger=":appraisalComsDlgForm:btnSaveAppraisalComs">
    LOADING<br />
    <p:graphicImage value="/resources/images/shared/ajax-loader.gif"/>
</p:blockUI>
</ui:composition>