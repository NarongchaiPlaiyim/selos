<ui:composition
        xmlns="http://www.w3.org/1999/xhtml"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:p="http://primefaces.org/ui">
<h:form id="appraisalComsDlgForm">
    <table class="content_form" style="width:650px;">
        <tr>
            <td class="title">Job ID :</td>
            <td>
                <p:inputText id="jobID" value="#{appraisalResult.collateralDetailView.jobID}"
                             required="#{not empty param[searchButton.clientId]}"/>
            </td>
            <td>
                <p:commandButton id="dlgSearchBrBtn" value="Retrieve Appraisal Report"
                                 binding="#{searchButton}"
                                 process="@form"
                                 action="#{appraisalResult.onSearchCollateral}"
                                 update=":msgBoxSystemMessagePanel :appraisalComsDlgForm"/>
            </td>
        </tr>
        <tr>
            <td>
                <div class="separate"></div>
            </td>
        </tr>
    </table>
    <p:panel id="pnlComs">
        <table>
            <tr>
                <td>
                    Job ID :
                </td>
                <td>
                    <p:outputLabel value="#{collateralDetailView.jobID}"/>
                </td>
            </tr>
            <tr>
                <td>
                    Appraisal Date
                </td>
                <td>
                    <p:outputLabel value="#{appraisalResult.collateralDetailView.appraisalDate}"/>
                </td>
            </tr>
            <tr>
                <td>
                    AAD Decesion :
                </td>
                <td>
                    <p:outputLabel value="#{appraisalResult.collateralDetailView.AADDecision}"/>
                </td>
            </tr>
            <tr>
                <td>
                    AAD Decision Reason :
                </td>
                <td>
                    <p:outputLabel value="#{appraisalResult.collateralDetailView.AADDecisionReason}"/>
                </td>
                <td>
                    AAD Decision Reason (Detail) :
                </td>
                <td>
                    <p:outputLabel value="#{appraisalResult.collateralDetailView.AADDecisionReasonDetail}"/>
                </td>
            </tr>
            <tr>
                <td>
                    Mortgagae Condition :
                </td>
                <td>
                    <p:outputLabel value="#{appraisalResult.collateralDetailView.mortgageCondition}"/>
                </td>
                <td>
                    Mortgagae Condition (Detail) :
                </td>
                <td>
                    <p:outputLabel value="#{appraisalResult.collateralDetailView.mortgageConditionDetail}"/>
                </td>
            </tr>
            <tr>
                <td colspan="4">
                    <div class="separate"></div>
                </td>
            </tr>
            <ui:repeat value="#{appraisalResult.collateralDetailView.collateralHeaderDetailViewList}" var="collateralHeaderDetailView" >
            <tr>
                <td>
                    Title Deed :
                </td>
                <td>
                    <p:outputLabel value="#{collateralHeaderDetailView.titleDeed}"/>
                </td>
            </tr>
            <tr>
                <td>
                    Address :
                </td>
                <td>
                    <p:outputLabel value="#{collateralHeaderDetailView.collateralLocation}"/>
                </td>
            </tr>
            <tr>
                <td>
                    Head Collateral - Appraisal Value :
                </td>
                <td>
                    <p:outputLabel value="#{collateralHeaderDetailViewappraisalValue}">
                        <f:convertNumber pattern="#,##0"/>
                    </p:outputLabel>
                </td>
            </tr>
            <tr>
                <td>
                    Head Collateral Type :
                </td>
                <td>
                    <p:outputLabel value="#{collateralHeaderDetailView.headCollType.description}"/>
                </td>
            </tr>
            <tr>
                <td colspan="4" style="width: 100%">
                    <p:dataTable tableStyleClass="center" style="width: 100%"
                                 id="subCollateralDetailViewTable"
                                 var="subCollateralDetailView"
                                 value="#{collateralHeaderDetailView.subCollateralDetailViewList}"
                                 paginator="false"
                                 rowKey="#{subCollateralDetailView.id}"
                                 rowIndexVar="rowIndex" >
                        <p:columnGroup type="header">
                            <p:row>
                                <p:column />
                                <p:column  headerText="Sub Coll Type}"/>
                                <p:column  headerText="Title Deed" />
                                <p:column  headerText="Collateral Owner"/>
                                <p:column  headerText="Appraisal Value "/>
                            </p:row>
                        </p:columnGroup>
                        <p:column styleClass="center" style="width:4%;">
                            <p:outputLabel value="#{subCollateralDetailView.no}"/>
                        </p:column>
                        <p:column  styleClass="left">
                            <p:outputLabel value="#{subCollateralDetailView.subCollateralType.description}"/> <br/>
                            <p:outputLabel value="#{subCollateralDetailView.address}"/><br/>
                            <p:outputLabel value="#{subCollateralDetailView.landOffice}"/>
                        </p:column>
                        <p:column styleClass="center" style="width:4%;">
                            <p:outputLabel value="#{subCollateralDetailView.titleDeed}"/>
                        </p:column>
                        <p:column styleClass="left" >
                            <p:outputLabel value="#{subCollateralDetailView.collateralOwner}" />
                        </p:column>
                        <p:column styleClass="right">
                            <p:outputLabel value="#{subCollateralDetailView.appraisalValue}">
                                <f:convertNumber pattern="#,##0"/>
                            </p:outputLabel>
                        </p:column>
                    </p:dataTable>
                </td>
            </tr>
            <tr>
                <td colspan="2">
                    <p:spacer width="5px"/>
                </td>
            </tr>
            <tr>
                <td colspan="2">
                    <div class="separate"></div>
                </td>
            </tr>
            <tr>
                <td colspan="2">
                    <p:spacer width="5px"/>
                </td>
            </tr>
            </ui:repeat>
        </table>
    </p:panel>
    <p:panel id="pnlButton" styleClass="center">
        <p:commandButton id="btnSaveAppraisalComs"
                         value="#{msg.get('app.button.ok')}"
                         actionListener="#{appraisalResult.onSaveCollateralDetailView()}"
                         process="@form"
                         update=":appraisalComsDlgForm,:frmMain"
                         oncomplete="handleCollateralDetailRequest(xhr, status, args)"/>
        <p:commandButton value="#{msg.get('app.button.cancel')}" onclick="appraisalComsViewDlg.hide()"/>
    </p:panel>
</h:form>
<p:blockUI widgetVar="blockAppraisalComsDlgForm" block="appraisalComsDlgForm" trigger=":appraisalComsDlgForm:btnSaveAppraisalComs">
    LOADING<br />
    <p:graphicImage value="/resources/images/shared/ajax-loader.gif"/>
</p:blockUI>
</ui:composition>