<ui:composition
        xmlns="http://www.w3.org/1999/xhtml"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:p="http://primefaces.org/ui">

<p:panel id="collateralDlgPanel" styleClass="panel-dialog" style="font-size: 12px !important;">
    <h:form id="collateralDlgForm">
        <table class="content_form content_table_form">
            <tr>
                <td class="title" style="width: 20%;">
                    <p:outputLabel value="#{msg.get('app.credit.facility.propose.label.collateral.jobID')}"/>
                    <h:outputText value="#{decision.mandate('collateral.jobID')}" styleClass="require-field"/>
                    <h:outputText value=" :"/>
                </td>
                <td class="left" style="width: 80%" colspan="3">
                    <h:outputText value="#{decision.approveCollateralInfoView.jobID}"/>
                </td>
            </tr>
            <tr>
                <td class="title">
                    <p:outputLabel value="#{msg.get('app.credit.facility.propose.label.collateral.appraisalDate')}"/>
                    <h:outputText value="#{decision.mandate('collateral.appraisalDate')}" styleClass="require-field"/>
                    <h:outputText value=" :"/>
                </td>
                <td class="left" colspan="3">
                    <h:outputText value="#{decision.approveCollateralInfoView.appraisalDate}">
                        <f:convertDateTime pattern="dd/MM/yyyy" locale="th_TH"/>
                    </h:outputText>
                </td>
            </tr>
            <tr>
                <td class="title">
                    <p:outputLabel value="#{msg.get('app.credit.facility.propose.label.collateral.AADDecision')}"/>
                    <h:outputText value="#{decision.mandate('collateral.AADDecision')}" styleClass="require-field"/>
                    <h:outputText value=" :"/>
                </td>
                <td class="left" colspan="3">
                    <h:outputText value="#{decision.approveCollateralInfoView.aadDecision}"/>
                </td>
            </tr>
            <tr>
                <td class="title" style="width: 20%;">
                    <p:outputLabel value="#{msg.get('app.credit.facility.propose.label.collateral.AADDecisionReason')}"/>
                    <h:outputText value="#{decision.mandate('collateral.AADDecisionReason')}" styleClass="require-field"/>
                    <h:outputText value=" :"/>
                </td>
                <td class="left" style="width: 30%;">
                    <h:outputText value="#{decision.approveCollateralInfoView.aadDecisionReason}"/>
                </td>
                <td class="title" style="width: 20%;">
                    <p:outputLabel value="#{msg.get('app.credit.facility.propose.label.collateral.AADDecisionReasonDetail')}"/>
                    <h:outputText value="#{decision.mandate('collateral.AADDecisionReasonDetail')}" styleClass="require-field"/>
                    <h:outputText value=" :"/>
                </td>
                <td class="left" style="width: 30%">
                    <h:outputText value="#{decision.approveCollateralInfoView.aadDecisionReasonDetail}"/>
                </td>
            </tr>
            <tr>
                <td class="title">
                    <p:outputLabel value="#{msg.get('app.credit.facility.propose.label.collateral.usage')}"/>
                    <h:outputText value="#{decision.mandate('collateral.usage')}" styleClass="require-field"/>
                    <h:outputText value=" :"/>
                </td>
                <td class="left">
                    <h:outputText value="#{decision.approveCollateralInfoView.usage}"/>
                </td>
                <td class="title">
                    <p:outputLabel value="#{msg.get('app.credit.facility.propose.label.collateral.typeOfUsage')}"/>
                    <h:outputText value="#{decision.mandate('collateral.typeOfUsage')}" styleClass="require-field"/>
                    <h:outputText value=" :"/>
                </td>
                <td class="left">
                    <h:outputText value="#{decision.approveCollateralInfoView.typeOfUsage}"/>
                </td>
            </tr>
            <tr>
                <td class="title">
                    <p:outputLabel for="dlgCollateralRadioApprove" value="#{msg.get('app.decision.label.UWDecision')}"/>
                    <h:outputText value="#{decision.mandate('collateral.UWDecision')}" styleClass="require-field"/>
                    <h:outputText value=" :"/>
                </td>
                <td class="left" colspan="3">
                    <table border="0" style="width: 100%">
                        <tr>
                            <td style="width: 80px">#{msg.get('app.decision.label.approved')}</td>
                            <td style="text-align: left">
                                <p:selectOneRadio id="dlgCollateralRadioApprove"
                                                  value="#{decision.approveCollateralInfoView.uwDecision}"
                                                  required="#{not empty param[saveCollateralButton.clientId]}"
                                                  disabled="#{decision.isDisabled('collateral.UWDecision')}">
                                    <f:selectItem itemLabel="#{msg.get('app.button.yes')}" itemValue="#{decision.decisionAPPROVED}"/>
                                    <f:selectItem itemLabel="#{msg.get('app.button.no')}" itemValue="#{decision.decisionREJECTED}"/>
                                    <p:ajax event="click" update="@this"/>
                                </p:selectOneRadio>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
            <tr>
                <td class="title">
                    <p:outputLabel value="#{msg.get('app.decision.label.UWRemark')}"/>
                    <h:outputText value="#{decision.mandate('collateral.UWRemark')}" styleClass="require-field"/>
                    <h:outputText value=" :"/>
                </td>
                <td class="left" colspan="3">
                    <p:inputTextarea value="#{decision.approveCollateralInfoView.uwRemark}" rows="3" cols="100"
                                     readonly="#{decision.isDisabled('collateral.UWRemark')}">
                        <p:ajax event="blur" update="@this"/>
                    </p:inputTextarea>
                </td>
            </tr>
            <tr>
                <td class="title">
                    <p:outputLabel value="#{msg.get('app.credit.facility.propose.label.collateral.mortgageCondition')}"/>
                    <h:outputText value="#{decision.mandate('collateral.mortgageCondition')}" styleClass="require-field"/>
                    <h:outputText value=" :"/>
                </td>
                <td class="left">
                    <h:outputText value="#{decision.approveCollateralInfoView.mortgageCondition}"/>
                </td>
                <td class="title">
                    <p:outputLabel value="#{msg.get('app.credit.facility.propose.label.collateral.mortgageConditionDetail')}"/>
                    <h:outputText value="#{decision.mandate('collateral.mortgageConditionDetail')}" styleClass="require-field"/>
                    <h:outputText value=" :"/>
                </td>
                <td class="left">
                    <h:outputText value="#{decision.approveCollateralInfoView.mortgageConditionDetail}"/>
                </td>
            </tr>
            <tr>
                <td class="title">
                    <p:outputLabel value="#{msg.get('app.credit.facility.propose.label.collateral.creditType.caption')}"/>
                    <h:outputText value="#{decision.mandate('collateral.creditType')}" styleClass="require-field"/>
                    <h:outputText value=" :"/>
                </td>
                <td class="left" colspan="3">
                    <p:dataTable value="#{decision.proposeCreditViewList}"
                                 var="creditTypeItem"
                                 rowKey="#{creditTypeItem.seq}"
                                 rowIndexVar="rowIndex"
                                 style="width: 100%;">

                        <p:columnGroup type="header">
                            <p:row>
                                <p:column style="width: 5%; padding: 4px 10px !important;" />
                                <p:column style="width: 40%; padding: 5px 10px !important;"
                                          headerText="#{msg.get('app.credit.facility.propose.label.collateral.account')}"/>
                                <p:column style="width: 10%; padding: 5px 10px !important;"
                                          headerText="#{msg.get('app.credit.facility.propose.label.collateral.requestCreditType')}"/>
                                <p:column style="width: 15%; padding: 5px 10px !important;"
                                          headerText="#{msg.get('app.credit.facility.propose.label.collateral.productProgram')}"/>
                                <p:column style="width: 15%; padding: 5px 10px !important;"
                                          headerText="#{msg.get('app.credit.facility.propose.label.collateral.creditFacility')}"/>
                                <p:column style="width: 15%; padding: 5px 10px !important;"
                                          headerText="#{msg.get('app.credit.facility.propose.label.collateral.limit')}"/>
                            </p:row>
                        </p:columnGroup>

                        <p:column styleClass="center">
                            <p:selectBooleanCheckbox value="#{creditTypeItem.noFlag}">
                                <p:ajax listener="#{decision.onCheckNoFlag(creditTypeItem)}"
                                        disabled="#{decision.isDisabled('collateral.creditType')}"/>
                            </p:selectBooleanCheckbox>
                        </p:column>

                        <p:column styleClass="left top">
                            <h:outputText value="#{creditTypeItem.accountName}"/>
                            <br/>
                            <h:outputText value="#{creditTypeItem.accountNumber} #{creditTypeItem.accountSuf}"/>
                        </p:column>

                        <p:column styleClass="left top">
                            <h:outputText value="#{creditTypeItem.requestType == 2 ? msg.get('app.label.new') : creditTypeItem.requestType == 1 ? msg.get('app.label.change') : ''}"/>
                        </p:column>

                        <p:column styleClass="left top">
                            <h:outputText value="#{not empty creditTypeItem.productProgramView ? creditTypeItem.productProgramView.name : ''}"/>
                        </p:column>

                        <p:column styleClass="left top">
                            <h:outputText value="#{not empty creditTypeItem.creditTypeView ? creditTypeItem.creditTypeView.name : ''}"/>
                        </p:column>

                        <p:column styleClass="right top">
                            <h:outputText value="#{creditTypeItem.limit}">
                                <f:convertNumber pattern="#,##0.##" minFractionDigits="2" maxFractionDigits="2" maxIntegerDigits="14"/>
                            </h:outputText>
                        </p:column>
                    </p:dataTable>
                </td>
            </tr>
            <tr>
                <td class="title">
                    <p:outputLabel value="#{msg.get('app.credit.facility.propose.label.collateral.BDMComments')}"/>
                    <h:outputText value="#{decision.mandate('collateral.BDMComments')}" styleClass="require-field"/>
                    <h:outputText value=" :"/>
                </td>
                <td class="left" colspan="3">
                    <p:inputTextarea value="#{decision.approveCollateralInfoView.bdmComments}" cols="100" rows="3"
                                     readonly="#{decision.isDisabled('collateral.BDMComments')}">
                        <p:ajax event="blur" update="@this"/>
                    </p:inputTextarea>
                </td>
            </tr>

            <tr>
                <td colspan="4">
                    <div class="separate"><!-- --></div>
                </td>
            </tr>

            <!-- Collateral Head -->
            <ui:repeat value="#{decision.approveCollateralInfoView.proposeCollateralInfoHeadViewList}"
                       var="collHeadDetail" varStatus="collHeadIndex">
                <tr>
                    <td class="title">
                        <p:outputLabel for="dlgPotentialColl" value="#{msg.get('app.credit.facility.propose.label.headcoll.potential')}"/>
                        <h:outputText value="#{decision.mandate('collateral.headcoll.potential')}" styleClass="require-field"/>
                        <h:outputText value=" :"/>
                    </td>
                    <td class="left" colspan="3">
                        <p:selectOneMenu id="dlgPotentialColl"
                                         value="#{collHeadDetail.potentialCollateral.id}"
                                         style="min-width: 200px; width: 200px; max-width: 200px;"
                                         required="#{not empty param[saveCollateralButton.clientId]}"
                                         disabled="#{decision.isDisabled('collateral.headcoll.potential')}">
                            <f:selectItem itemLabel="#{msg.get('app.select.item0')}" itemValue=""/>
                            <f:selectItems value="#{decision.potentialCollViewList}"
                                           var="potentialItem"
                                           itemLabel="#{potentialItem.description}"
                                           itemValue="#{potentialItem.id}"/>
                            <p:ajax listener="#{decision.onChangePotentialCollateralType(collHeadDetail)}"
                                    update="dlgCollTypePercentLTV"/>
                        </p:selectOneMenu>
                    </td>
                </tr>
                <tr>
                    <td class="title">
                        <p:outputLabel for="dlgCollTypePercentLTV"
                                       value="#{msg.get('app.credit.facility.propose.label.headcoll.collTypePercentLTV')}"/>
                        <h:outputText value="#{decision.mandate('collateral.headcoll.collTypePercentLTV')}" styleClass="require-field"/>
                        <h:outputText value=" :"/>
                    </td>
                    <td class="left" colspan="3">
                        <p:selectOneMenu id="dlgCollTypePercentLTV"
                                         value="#{collHeadDetail.tcgCollateralType.id}"
                                         styleClass="largest"
                                         size="1"
                                         required="#{not empty param[btnSaveCollateral.clientId]}"
                                         style="min-width: 400px; width: 400px; max-width: 400px;"
                                         disabled="#{decision.isDisabled('collateral.headcoll.collTypePercentLTV')}">
                            <f:selectItem itemLabel="#{msg.get('app.select.item0')}" itemValue=""/>
                            <f:selectItems value="#{collHeadDetail.potentialColToTCGColList}"
                                           var="dlgPotentialColToTCGColList"
                                           itemLabel="#{dlgPotentialColToTCGColList.tcgCollateralType.description}"
                                           itemValue="#{dlgPotentialColToTCGColList.tcgCollateralType.id}"/>
                            <p:ajax event="change" update="@this"/>
                        </p:selectOneMenu>
                    </td>
                </tr>
                <tr>
                    <td class="title">
                        <p:outputLabel for="dlgExistingCredit"
                                       value="#{msg.get('app.credit.facility.propose.label.headcoll.existingCredit')}"/>
                        <h:outputText value="#{decision.mandate('collateral.headcoll.existingCredit')}" styleClass="require-field"/>
                        <h:outputText value=" :"/>
                    </td>
                    <td class="left">
                        <p:inputText id="dlgExistingCredit"
                                     value="#{collHeadDetail.existingCredit}"
                                     maxlength="14"
                                     onclick="this.select()"
                                     onkeydown="return onKeyDownMoney(event);"
                                     onkeypress="return onKeyPressMoney(event);"
                                     onfocus="removeComma(this)"
                                     style="width:200px;text-align: right"
                                     readonly="#{decision.isDisabled('collateral.headcoll.existingCredit')}">
                            <f:convertNumber pattern="#,##0.##" minFractionDigits="2" maxFractionDigits="2" type="number"/>
                            <p:ajax event="blur" update="@this"/>
                        </p:inputText>
                    </td>
                </tr>
                <tr>
                    <td class="title">
                        <p:outputLabel for="dlgTitleDeed"
                                       value="#{msg.get('app.credit.facility.propose.label.headcoll.titleDeed')}"/>
                        <h:outputText value="#{decision.mandate('collateral.headcoll.titleDeed')}" styleClass="require-field"/>
                        <h:outputText value=" :"/>
                    </td>
                    <td class="left">
                        <p:inputText id="dlgTitleDeed" value="#{collHeadDetail.titleDeed}"
                                     required="#{not empty param[saveCollateralButton.clientId]}"
                                     readonly="#{decision.approveCollateralInfoView.coms or decision.isDisabled('collateral.headcoll.titleDeed')}">
                            <p:ajax event="blur" update="@this"/>
                        </p:inputText>
                    </td>
                </tr>
                <tr>
                    <td class="title">
                        <p:outputLabel for="dlgCollLocation"
                                       value="#{msg.get('app.credit.facility.propose.label.headcoll.collateralLocation')}"/>
                        <h:outputText value="#{decision.mandate('collateral.headcoll.collateralLocation')}" styleClass="require-field"/>
                        <h:outputText value=" :"/>
                    </td>
                    <td class="left">
                        <p:inputText id="dlgCollLocation" value="#{collHeadDetail.collateralLocation}"
                                     style="width: 400px;"
                                     required="#{not empty param[saveCollateralButton.clientId]}"
                                     readonly="#{decision.approveCollateralInfoView.coms or decision.isDisabled('collateral.headcoll.collateralLocation')}">
                            <p:ajax event="blur" update="@this"/>
                        </p:inputText>
                    </td>
                </tr>
                <tr>
                    <td class="title">
                        <p:outputLabel for="dlgAppraisalValue"
                                       value="#{msg.get('app.credit.facility.propose.label.headcoll.appraisalValue')}"/>
                        <h:outputText value="#{decision.mandate('collateral.headcoll.appraisalValue')}" styleClass="require-field"/>
                        <h:outputText value=" :"/>
                    </td>
                    <td class="left">
                        <p:inputText id="dlgAppraisalValue"
                                     value="#{collHeadDetail.appraisalValue}"
                                     maxlength="14"
                                     onclick="this.select()"
                                     onkeydown="return onKeyDownMoney(event);"
                                     onkeypress="return onKeyPressMoney(event);"
                                     onfocus="removeComma(this)"
                                     required="#{not empty param[saveCollateralButton.clientId]}"
                                     style="width:200px;text-align: right"
                                     readonly="#{decision.approveCollateralInfoView.coms or decision.isDisabled('collateral.headcoll.appraisalValue')}">
                            <f:convertNumber pattern="#,##0.##" minFractionDigits="2" maxFractionDigits="2" type="number"/>
                            <p:ajax event="blur" update="@this"/>
                        </p:inputText>
                    </td>
                </tr>
                <tr>
                    <td class="title">
                        <p:outputLabel for="dlgHeadCollType"
                                       value="#{msg.get('app.credit.facility.propose.label.headcoll.headCollType')}"/>
                        <h:outputText value="#{decision.mandate('collateral.headcoll.headCollType')}" styleClass="require-field"/>
                        <h:outputText value=" :"/>
                    </td>
                    <td class="left">
                        <p:selectOneMenu id="dlgHeadCollType"
                                         value="#{collHeadDetail.headCollType.id}"
                                         style="min-width: 400px; width: 400px; max-width: 400px;"
                                         required="#{not empty param[saveCollateralButton.clientId]}"
                                         disabled="#{decision.approveCollateralInfoView.coms or collHeadDetail.haveSubColl or decision.isDisabled('collateral.headcoll.headCollType')}">
                            <f:selectItem itemLabel="#{msg.get('app.select.item0')}" itemValue="0"/>
                            <f:selectItems value="#{decision.headCollTypeViewList}"
                                           var="headCollateralTypeItem"
                                           itemLabel="#{headCollateralTypeItem.description}"
                                           itemValue="#{headCollateralTypeItem.id}"/>
                            <p:ajax event="change" update="@this"/>
                        </p:selectOneMenu>
                    </td>
                </tr>
                <tr>
                    <td class="title">
                        <p:outputLabel for="dlgInsuranceComp"
                                       value="#{msg.get('app.credit.facility.propose.label.headcoll.insuranceCompany')}"/>
                        <h:outputText value="#{decision.mandate('collateral.headcoll.insuranceCompany')}" styleClass="require-field"/>
                        <h:outputText value=" :"/>
                    </td>
                    <td class="left">
                        <p:selectOneRadio id="dlgInsuranceComp" value="#{collHeadDetail.insuranceCompany}"
                                          disabled="#{decision.isDisabled('collateral.headcoll.insuranceCompany')}">
                            <f:selectItem itemLabel="#{msg.get('app.button.partner')}" itemValue="#{decision.yesValue}"/>
                            <f:selectItem itemLabel="#{msg.get('app.button.nonPartner')}" itemValue="#{decision.noValue}"/>
                            <p:ajax event="click" update="@this"/>
                        </p:selectOneRadio>
                    </td>
                </tr>
                <tr>
                    <td class="left" colspan="4">
                        <p:commandButton id="btnAddSubCollateralInfo"
                                         value="#{msg.get('app.button.add')}"
                                         styleClass="small"
                                         process="@this"
                                         actionListener="#{decision.onAddSubCollateral()}"
                                         update=":subCollateralDlgForm,:msgBoxSystemMessagePanel"
                                         disabled="#{decision.approveCollateralInfoView.coms or decision.isDisabled('collateral.subcoll.addButton')}">
                            <f:setPropertyActionListener value="#{i.index}" target="#{decision.rowHeadCollIndex}"/>
                            <p:resetInput target=":subCollateralDlgForm"/>
                        </p:commandButton>
                    </td>
                </tr>

                <tr>
                    <td class="left" colspan="4">
                        <p:dataTable id="subCollateralDetailViewTable"
                                     value="#{collHeadDetail.proposeCollateralInfoSubViewList}"
                                     var="proposeCollSubView"
                                     rowKey="#{proposeCollSubView.subId}"
                                     rowIndexVar="rowIndex"
                                     paginator="false"
                                     style="width: 100%;">

                            <p:columnGroup type="header">
                                <p:row>
                                    <p:column style="width: 5%"/>
                                    <p:column style="width: 15%"
                                              headerText="#{msg.get('app.credit.facility.propose.label.subcoll.subcollTypeCaption')}"/>
                                    <p:column style="width: 10%"
                                              headerText="#{msg.get('app.credit.facility.propose.label.subcoll.titleDeed')}"/>
                                    <p:column style="width: 10%"
                                              headerText="#{msg.get('app.credit.facility.propose.label.subcoll.collateralOwner.AAD')}"/>
                                    <p:column style="width: 10%"
                                              headerText="#{msg.get('app.credit.facility.propose.label.subcoll.collateralOwner.UW')}"/>
                                    <p:column style="width: 10%"
                                              headerText="#{msg.get('app.credit.facility.propose.label.subcoll.mortgageType')}"/>
                                    <p:column style="width: 10%"
                                              headerText="#{msg.get('app.credit.facility.propose.label.subcoll.relatedWith')}"/>
                                    <p:column style="width: 10%"
                                              headerText="#{msg.get('app.credit.facility.propose.label.subcoll.appraisalValue')}"/>
                                    <p:column style="width: 10%"
                                              headerText="#{msg.get('app.credit.facility.propose.label.subcoll.mortgageValue')}"/>
                                    <p:column style="width: 10%"/>
                                </p:row>
                            </p:columnGroup>

                            <p:column styleClass="center">
                                <h:outputText value="#{rowIndex + 1}"/>
                            </p:column>

                            <p:column styleClass="left top">
                                <h:outputText value="#{proposeCollSubView.subCollateralType.description}" rendered="#{not empty proposeCollSubView.subCollateralType}"/>
                                <br/>
                                <h:outputText value="#{msg.get('app.credit.facility.propose.dlg.subcoll.address')} #{proposeCollSubView.address}"/>
                                <br/>
                                <h:outputText value="#{msg.get('app.credit.facility.propose.label.subcoll.titleDeed')} #{proposeCollSubView.landOffice}"/>
                            </p:column>

                            <p:column styleClass="left top">
                                <h:outputText value="#{proposeCollSubView.titleDeed}"/>
                            </p:column>

                            <p:column styleClass="left top">
                                <h:outputText value="#{proposeCollSubView.collateralOwnerAAD}"/>
                            </p:column>

                            <p:column styleClass="left top">
                                <p:panel rendered="#{not empty proposeCollSubView.collateralOwnerUWList and fn:length(proposeCollSubView.collateralOwnerUWList) gt 0}" styleClass="panel">
                                    <ui:repeat value="#{proposeCollSubView.collateralOwnerUWList}" var="collateralOwnerUW" varStatus="a">
                                        <h:outputText value="#{collateralOwnerUW.firstNameTh} #{collateralOwnerUW.lastNameTh}"/>
                                        <h:outputText value=", " rendered="#{not a.last}"/>
                                    </ui:repeat>
                                </p:panel>
                            </p:column>

                            <p:column styleClass="left top">
                                <p:panel rendered="#{not empty proposeCollSubView.mortgageList and fn:length(proposeCollSubView.mortgageList) gt 0}" styleClass="panel">
                                    <ui:repeat value="#{proposeCollSubView.mortgageList}" var="mortgage" varStatus="b">
                                        <h:outputText value="#{mortgage.mortgage}"/>
                                        <h:outputText value=", " rendered="#{not b.last}"/>
                                    </ui:repeat>
                                </p:panel>
                            </p:column>

                            <p:column styleClass="left top">
                                <p:panel rendered="#{not empty proposeCollSubView.relatedWithList and fn:length(proposeCollSubView.relatedWithList) gt 0}" styleClass="panel">
                                    <ui:repeat value="#{proposeCollSubView.relatedWithList}" var="relatedWith" varStatus="c">
                                        <h:outputText value="#{relatedWith.titleDeed}"/>
                                        <h:outputText value=", " rendered="#{not c.last}"/>
                                    </ui:repeat>
                                </p:panel>
                            </p:column>

                            <p:column styleClass="right top">
                                <h:outputText value="#{proposeCollSubView.appraisalValue}" maxlength="14" >
                                    <f:convertNumber pattern="#,##0.##" minFractionDigits="2" maxFractionDigits="2" maxIntegerDigits="14"/>
                                </h:outputText>
                            </p:column>

                            <p:column styleClass="right top">
                                <h:outputText value="#{proposeCollSubView.mortgageValue}" maxlength="14">
                                    <f:convertNumber pattern="#,##0.##" minFractionDigits="2" maxFractionDigits="2" maxIntegerDigits="14"/>
                                </h:outputText>
                            </p:column>

                            <p:column styleClass="center">
                                <p:commandButton icon="ui-icon-pencil"
                                                 action="#{decision.onEditSubCollateral()}"
                                                 update=":subCollateralDlgForm"
                                                 process="@this"
                                                 oncomplete="subCollateralInfoDlg.show();"
                                                 disabled="#{decision.isDisabled('collateral.subcoll.editButton')}">
                                    <f:setPropertyActionListener value="#{rowIndex}" target="#{decision.rowSubCollIndex}"/>
                                    <f:setPropertyActionListener value="#{proposeCollSubView}" target="#{decision.approveCollateralInfoSubView}"/>
                                    <p:resetInput target=":subCollateralDlgForm"/>
                                </p:commandButton>
                                <p:commandButton icon="ui-icon-trash"
                                                 process="@this"
                                                 oncomplete="confirmDeleteSubCollateralInfoDlg.show()"
                                                 disabled="#{decision.approveCollateralInfoView.coms or decision.isDisabled('collateral.subcoll.removeButton')}">
                                    <f:setPropertyActionListener value="#{proposeCollSubView}" target="#{decision.approveCollateralInfoSubView}"/>
                                </p:commandButton>
                            </p:column>
                        </p:dataTable>
                    </td>
                </tr>
                <!-- Separate Line if Collateral Header more than one -->
                <h:panelGroup rendered="#{not collHeadIndex.last}">
                    <tr>
                        <td colspan="4">
                            <div class="separate"><!-- --></div>
                        </td>
                    </tr>
                </h:panelGroup>
            </ui:repeat>

            <tr>
                <td colspan="4" style="height:28px;"></td>
            </tr>
            <tr>
                <td colspan="4" style="text-align: center">
                    <p:commandButton id="btnSaveCollateral"
                                     styleClass="small"
                                     binding="#{saveCollateralButton}"
                                     value="#{msg.get('app.button.ok')}"
                                     action="#{decision.onSaveProposeCollInfo()}"
                                     process=":collateralDlgForm"
                                     update=":collateralDlgForm,:frmMain,:msgBoxSystemMessagePanel"
                                     oncomplete="handleDialogRequest(xhr, status, args, 'proposeCollateralDlg')"
                                     disabled="#{decision.isDisabled('collateral.saveButton')}"/>
                    <p:spacer width="10" height=""/>
                    <p:commandButton value="#{msg.get('app.button.cancel')}"
                                     styleClass="small"
                                     update=":collateralDlgForm,:frmMain,:msgBoxSystemMessagePanel"
                                     action="#{decision.onCancelCollateralInfo()}"
                                     oncomplete="handleDialogRequest(xhr, status, args, 'proposeCollateralDlg')"
                                     disabled="#{decision.isDisabled('collateral.cancelButton')}"/>
                </td>
            </tr>
            <tr>
                <td colspan="4" style="height:10px;"></td>
            </tr>
        </table>
    </h:form>
</p:panel>

<p:blockUI widgetVar="blockCollateralDlg" block="collateralDlgPanel"
           trigger=":collateralDlgForm:btnSaveCollateral">
    LOADING<br/>
    <p:graphicImage value="/resources/images/shared/ajax-loader.gif"/>
</p:blockUI>

</ui:composition>