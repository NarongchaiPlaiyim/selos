<ui:composition
        xmlns="http://www.w3.org/1999/xhtml"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:p="http://primefaces.org/ui">

<h:form id="ncbDlgForm">
<table class="content_form">
<tr>
    <td class="title" style="width: 200px;">
        <h:outputText value="#{msg.get('app.loanAccountType')}"/>:
        <h:outputLabel value="*" styleClass="require-field"/>
    </td>
    <td>
        <p:selectOneMenu id="dlgType"
                         value="#{fullappNcb.dlgAccountType.id}"
                         styleClass="largest"
                         size="1"
                         required="#{not empty param[addRowData.clientId]}">
            <f:selectItem itemLabel="- โปรดระบุ -" itemValue=""/>
            <f:selectItems value="#{fullappNcb.accountTypeList}"
                           var="dlgAccountTypeList"
                           itemLabel="#{dlgAccountTypeList.name}"
                           itemValue="#{dlgAccountTypeList.id}"/>

        </p:selectOneMenu>
    </td>
</tr>
<tr>
    <td class="title" style="width: 200px;">
        <h:outputText value="#{msg.get('app.isTMBAccount')}"/>:
        <h:outputLabel value="*" styleClass="require-field"/>
    </td>
    <td>
        <h:selectOneRadio id="radioTmbAccount" value="#{fullappNcb.ncbRecordView.TMBAccount}"
                          required="#{not empty param[addRowData.clientId]}">
            <f:selectItem itemLabel="Yes" itemValue="true"/>
            <f:selectItem itemLabel="No" itemValue="false"/>
        </h:selectOneRadio>
    </td>
</tr>
<tr>
    <td class="title" style="width: 200px;">
        <h:outputText value="#{msg.get('app.loanAccountStatus')}"/>:
        <h:outputLabel value="*" styleClass="require-field"/>
    </td>
    <td>
        <p:selectOneMenu id="dlgStatus"
                         value="#{fullappNcb.dlgAccountStatus.id}"
                         styleClass="largest"
                         size="1"
                         required="#{not empty param[addRowData.clientId]}">
            <f:selectItem itemLabel="- โปรดระบุ -" itemValue=""/>
            <f:selectItems value="#{fullappNcb.accountStatusList}"
                           var="dlgAccountStatusList"
                           itemLabel="#{dlgAccountStatusList.name}"
                           itemValue="#{dlgAccountStatusList.id}"/>
        </p:selectOneMenu>

    </td>
</tr>
<tr>
    <td class="title" style="width: 200px;">
        <h:outputText value="#{msg.get('app.dateOfInfo')}"/>:
        <h:outputLabel value="*" styleClass="require-field"/>
    </td>
    <td>
        <p:calendar value="#{fullappNcb.ncbRecordView.dateOfInfo}" id="dateOfInfo" pattern="d/M/yyyy"
                    showOn="button" required="#{not empty param[addRowData.clientId]}">
            <!--            <f:convertDateTime pattern="d/M/yyyy"/>
                        <p:ajax event="blur" update=":ncbDlgForm:dateOfInfo"/>-->
        </p:calendar>
    </td>
</tr>
<tr>
    <td class="title" style="width: 200px;">
        <h:outputText value="#{msg.get('app.accountOpenDate')}"/>:
        <h:outputLabel value="*" styleClass="require-field"/>
    </td>
    <td>
        <p:calendar value="#{fullappNcb.ncbRecordView.accountOpenDate}" id="accountOpenDate" pattern="d/M/yyyy"
                    showOn="button" required="#{not empty param[addRowData.clientId]}"/>
    </td>
</tr>
<tr>
    <td class="title" style="width: 200px;">
        <h:outputText value="#{msg.get('app.limit')}"/>:
        <h:outputLabel value="*" styleClass="require-field"/>
    </td>
    <td>
        <p:inputText id="limit" styleClass="large right numeric"
                     value="#{fullappNcb.ncbRecordView.limit}" required="#{not empty param[addRowData.clientId]}">
            <f:convertNumber pattern="#,##0" minFractionDigits="2" maxFractionDigits="2"/>
            <p:ajax event="blur" update=":ncbDlgForm:limit"/>
        </p:inputText>
    </td>
</tr>
<tr>
    <td class="title" style="width: 200px;">
        <h:outputText value="#{msg.get('app.outstanding')}"/>:
        <h:outputLabel value="*" styleClass="require-field"/>
    </td>
    <td>
        <p:inputText id="outstanding" styleClass="large right numeric"
                     value="#{fullappNcb.ncbRecordView.outstanding}" required="#{not empty param[addRowData.clientId]}">
            <f:convertNumber pattern="#,##0" minFractionDigits="2" maxFractionDigits="2"/>
            <p:ajax event="blur" update=":ncbDlgForm:outstanding"/>
        </p:inputText>
    </td>
</tr>
<tr>
    <td class="title" style="width: 200px;">
        <h:outputText value="#{msg.get('app.installment')}"/>:
        <h:outputLabel value="*" styleClass="require-field"/>
    </td>
    <td>
        <p:inputText id="installment" styleClass="large right numeric"
                     value="#{fullappNcb.ncbRecordView.installment}" required="#{not empty param[addRowData.clientId]}">
            <f:convertNumber pattern="#,##0" minFractionDigits="2" maxFractionDigits="2"/>
            <p:ajax event="blur" update=":ncbDlgForm:installment"/>
        </p:inputText>
    </td>
</tr>
<tr>
    <td class="title" style="width: 200px;">
        <h:outputText value="#{msg.get('app.dateOfDebtRestructuring')}"/>:
        <h:outputLabel value="*" styleClass="require-field"/>
    </td>
    <td>
        <p:calendar value="#{fullappNcb.ncbRecordView.dateOfDebtRestructuring}" pattern="d/M/yyyy"
                    id="dateOfDebtRestructuring" showOn="button" required="#{not empty param[addRowData.clientId]}"/>

    </td>
</tr>
<tr>
    <td class="title" style="width: 200px;">
        <h:outputText value="#{msg.get('app.typeOfCurrentPayment')}"/>:
        <h:outputLabel value="*" styleClass="require-field"/>
    </td>
    <td>
        <p:selectOneMenu id="currentPayment"
                         value="#{fullappNcb.dlgCurrentPayment.id}"
                         style="width: 200px;"
                         size="1"
                         required="#{not empty param[addRowData.clientId]}">
            <f:selectItem itemLabel="- โปรดระบุ -" itemValue=""/>
            <f:selectItems value="#{fullappNcb.settlementStatusList}"
                           var="dlgtdrCurrentList"
                           itemLabel="#{dlgtdrCurrentList.name}"
                           itemValue="#{dlgtdrCurrentList.id}"/>
        </p:selectOneMenu>

    </td>
</tr>
<tr>
    <td class="title" style="width: 200px;">
        <h:outputText value="#{msg.get('app.typeOfHistoryPayment')}"/>:
        <h:outputLabel value="*" styleClass="require-field"/>
    </td>
    <td>
        <p:selectOneMenu id="historyPayment"
                         value="#{fullappNcb.dlgHistoryPayment.id}"
                         style="width: 200px;"
                         size="1"
                         required="#{not empty param[addRowData.clientId]}">
            <f:selectItem itemLabel="- โปรดระบุ -" itemValue=""/>
            <f:selectItems value="#{fullappNcb.settlementStatusList}"
                           var="dlgHistoryList"
                           itemLabel="#{dlgHistoryList.name}"
                           itemValue="#{dlgHistoryList.id}"/>
        </p:selectOneMenu>
    </td>
</tr>
<tr>
    <td class="title" style="width: 200px;">
        <h:outputText value="#{msg.get('app.noOfOutstandingPaymentIn12months')}"/>:
        <h:outputLabel value="*" styleClass="require-field"/>
    </td>
    <td>
        <p:inputText name="noOfOutstandingPaymentIn12months"
                     value="#{fullappNcb.ncbRecordView.noOfOutstandingPaymentIn12months}"
                     required="#{not empty param[addRowData.clientId]}"/>
    </td>
</tr>
<tr>
    <td class="title" style="width: 200px;">
        <h:outputText value="#{msg.get('app.noOfOverLimit')}"/>:
        <h:outputLabel value="*" styleClass="require-field"/>
    </td>
    <td>
        <p:inputText name="noOfOverLimit" value="#{fullappNcb.ncbRecordView.noOfOverLimit}"
                     required="#{not empty param[addRowData.clientId]}"/>
    </td>
</tr>
<tr>
    <td class="title" style="width: 200px;">
        <h:outputText value="#{msg.get('app.refinanceFlag')}"/>:
        <h:outputLabel value="*" styleClass="require-field"/>
    </td>
    <td>
        <h:selectOneRadio id="radioRefinanceFlag" value="#{fullappNcb.ncbRecordView.refinanceFlag}"
                          required="#{not empty param[addRowData.clientId]}">
            <f:selectItem itemLabel="Yes" itemValue="true"/>
            <f:selectItem itemLabel="No" itemValue="false"/>
        </h:selectOneRadio>
    </td>
</tr>
<tr>
    <td class="title" style="width: 200px;">
        <h:outputText value="#{msg.get('app.noOfmonthsPayment')}"/>:
    </td>
    <td>
        <h:selectOneMenu value="#{fullappNcb.ncbRecordView.noOfmonthsPayment}">
            <f:selectItem itemLabel="- โปรดระบุ -" itemValue=""/>
            <f:selectItems value="#{fullappNcb.ncbRecordView.noOfmonthsPaymentList}"
                           var="dlgNoOfMonth"
                           itemLabel="#{dlgNoOfMonth.month}"
                           itemValue="#{dlgNoOfMonth.month}"/>
            <p:ajax event="change"
                    listener="#{fullappNcb.onchangeToGenMoneyOfmonthsPayment}"
                    process=":ncbDlgForm"
                    update=":ncbDlgForm"/>
        </h:selectOneMenu>
    </td>
</tr>
<tr>
    <td colspan="2" class="center">
<!--        <p:panel style="border-width: 0;width: 500" id="monthsPaymentPanel" rendered="#{fullappNcb.genTextBoxFlag}">
               <table class="content_form">
                   <p:dataTable id="monthsPayment" var="itemMoneyPayment"
                                value="#{fullappNcb.ncbRecordView.moneyPaymentViewList}"
                                paginator="false" rowKey="#{itemMoneyPayment.moneyPayment}" rowIndexVar="rowIndex">

                       <p:column styleClass="left" style="width:195px;">
                           <h:outputText value="เดือนที่#{rowIndex+1}"/>
                       </p:column>

                      <p:column styleClass="left">
                           <p:inputText value="#{itemMoneyPayment.moneyPayment}" styleClass="large right numeric"
                                        required="#{(fullappNcb.genTextBoxFlag) and (not empty param[addRowData.clientId])}" >
                               <f:convertNumber pattern="#,##0" minFractionDigits="2" maxFractionDigits="2"/>
                               <p:ajax event="blur" update=":ncbDlgForm:monthsPaymentPanel"/>
                           </p:inputText>
                       </p:column>

                   </p:dataTable>
               </table>
           </p:panel>-->
        <p:panel style="border-width: 0;width: 500" rendered="#{fullappNcb.genTextBoxFlag}">

            <h:form id="moneysForm">
                <table class="content_form">
                    <tr>
                        <td class="title" style="width: 195px;text-align: left;">
                            <h:outputText value="เดือนที่ 1:" rendered="#{fullappNcb.monthRender1}"/>
                            <h:outputLabel value="*" styleClass="require-field" rendered="#{fullappNcb.monthRender1}"/>
                        </td>
                        <td>
                            <p:inputText id="month1" value="#{fullappNcb.ncbRecordView.month1}" rendered="#{fullappNcb.monthRender1}">
                                <f:convertNumber pattern="#,##0" minFractionDigits="2" maxFractionDigits="2"/>
                                <p:ajax event="blur" update=":ncbDlgForm:moneysForm:month1"/>
                            </p:inputText>
                        </td>
                    </tr>
                    <tr>
                        <td class="title" style="width: 195px;text-align: left;" >
                            <h:outputText value="เดือนที่ 2:" rendered="#{fullappNcb.monthRender2}"/>
                            <h:outputLabel value="*" styleClass="require-field" rendered="#{fullappNcb.monthRender2}"/>
                        </td>
                        <td>
                            <p:inputText id="month2"
                                         value="#{fullappNcb.ncbRecordView.month2}" rendered="#{fullappNcb.monthRender2}">
                            <f:convertNumber pattern="#,##0" minFractionDigits="2" maxFractionDigits="2"/>
                            <p:ajax event="blur" update=":ncbDlgForm:moneysForm:month2"/>
                        </p:inputText>
                        </td>
                    </tr>
                    <tr>
                        <td class="title" style="width: 195px;text-align: left;">
                            <h:outputText value="เดือนที่ 3:" rendered="#{fullappNcb.monthRender3}"/>
                            <h:outputLabel value="*" styleClass="require-field" rendered="#{fullappNcb.monthRender3}"/>
                        </td>
                        <td>
                            <p:inputText id="month3"
                                         value="#{fullappNcb.ncbRecordView.month3}" rendered="#{fullappNcb.monthRender3}">
                                <f:convertNumber pattern="#,##0" minFractionDigits="2" maxFractionDigits="2"/>
                                <p:ajax event="blur" update=":ncbDlgForm:moneysForm:month3"/>
                            </p:inputText>
                        </td>
                    </tr>
                    <tr>
                        <td class="title" style="width: 195px;text-align: left;">
                            <h:outputText value="เดือนที่ 4:" rendered="#{fullappNcb.monthRender4}"/>
                            <h:outputLabel value="*" styleClass="require-field" rendered="#{fullappNcb.monthRender4}"/>
                        </td>
                        <td>
                            <p:inputText id="month4"
                                         value="#{fullappNcb.ncbRecordView.month4}" rendered="#{fullappNcb.monthRender4}">
                                <f:convertNumber pattern="#,##0" minFractionDigits="2" maxFractionDigits="2"/>
                                <p:ajax event="blur" update=":ncbDlgForm:moneysForm:month4"/>
                            </p:inputText>
                        </td>
                    </tr>
                    <tr>
                        <td class="title" style="width: 195px;text-align: left;">
                            <h:outputText value="เดือนที่ 5:" rendered="#{fullappNcb.monthRender5}"/>
                            <h:outputLabel value="*" styleClass="require-field" rendered="#{fullappNcb.monthRender5}"/>
                        </td>
                        <td>
                            <p:inputText id="month5"
                                         value="#{fullappNcb.ncbRecordView.month5}" rendered="#{fullappNcb.monthRender5}">
                                <f:convertNumber pattern="#,##0" minFractionDigits="2" maxFractionDigits="2"/>
                                <p:ajax event="blur" update=":ncbDlgForm:moneysForm:month5"/>
                            </p:inputText>
                        </td>
                    </tr>
                    <tr>
                        <td class="title" style="width: 195px;text-align: left;">
                            <h:outputText value="เดือนที่ 6:" rendered="#{fullappNcb.monthRender6}"/>
                            <h:outputLabel value="*" styleClass="require-field" rendered="#{fullappNcb.monthRender6}"/>
                        </td>
                        <td>
                            <p:inputText id="month6"
                                         value="#{fullappNcb.ncbRecordView.month6}" rendered="#{fullappNcb.monthRender6}">
                                <f:convertNumber pattern="#,##0" minFractionDigits="2" maxFractionDigits="2"/>
                                <p:ajax event="blur" update=":ncbDlgForm:moneysForm:month6"/>
                            </p:inputText>
                        </td>
                    </tr>
                </table>
            </h:form>
        </p:panel>
    </td>
</tr>
<tr>
    <td colspan="2" class="center">
        <p:commandButton
                id="save"
                binding="#{addRowData}"
                value="#{msg.get('app.saveButton')}"
                styleClass="small"
                actionListener="#{fullappNcb.onSaveNcbRecord}"
                process=":ncbDlgForm"
                update=":ncbDlgForm,:frmMain:resultNcbDetail"
                oncomplete="handleFullappNcbRequest(xhr, status, args)"/>

        <p:commandButton value="#{msg.get('app.cancelButton')}" styleClass="small" onclick="ncbDlg.hide()"/>
    </td>
</tr>
</table>
</h:form>

</ui:composition>