<!DOCTYPE html>
<html>
<f:view xmlns="http://www.w3.org/1999/xhtml"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:p="http://primefaces.org/ui"
        >

<h:head>
    <title>Appraisal Result</title>
    <h:outputStylesheet name="css/style.css" />
    <!-- <script type="text/javascript" language="javascript" src="#{request.contextPath}/resources/js/jquery.numeric.js"/> -->
    <h:outputScript library="js" name="custom.js" />
</h:head>
<h:body>
<p:panel id="pnl_maincontainer" style="border:0; margin:0; padding: 0;">
<h:form id="frmMain">
    <div id="main_container">
        <!-- Start Header Logo -->
        <ui:include src="include/header_logo.xhtml" />
        <!-- End Header Logo -->
        <!-- Start Header Detail -->
        <ui:include src="include/header_detail.xhtml" />
        <!-- End Header Detail -->
        <!-- Start Menu -->
        <ui:include src="include/menubar.xhtml" />
        <!-- End Menu -->
        <div id="content_container">
            <div id="content_name"><p:outputLabel styleClass="title" value="#{msg.get('app.appraisalRequest.header')}"/></div>
            <div id="content">
                <div id="content_info">
                    <div id="content_trackchange">[ View Track Change ]</div>
                    <div id="content_lastupdate">Last update by <h:outputText value="#{appraisalResult.appraisalView.modifyBy.userName}"/> , <h:outputText value="#{appraisalResult.appraisalView.modifyDate}"><f:convertDateTime pattern="dd MMMM yyyy HH:mm:ss" locale="th_TH" /></h:outputText></div>
                </div>
                <div id="content_form">

                </div>
                <table id="table_content" style="width: 100%;" class="content_table_form" border="0">
                    <tr>
                        <td style="width: 150px; min-width: 150px; max-width: 150px;"/>
                        <td style="width: 200px; min-width: 200px; max-width: 200px;"/>
                        <td style="width: 150px; min-width: 150px; max-width: 150px;"/>
                        <td style="width: 200px; min-width: 200px; max-width: 200px;"/>
                        <td style="width: 200px; min-width: 200px; max-width: 200px;"/>
                    </tr>


                    <tr>
                        <td colspan="4"><div class="separate"><!-- --></div></td>
                    </tr>

                    <tr>
                        <td colspan="4" class="title"><p:outputLabel value="#{msg.get('app.appraisal.label.appraisalDetail')}" style="font-size: 15px"/> </td>
                    </tr>

                    <tr>
                        <td class="title"><p:outputLabel value="#{msg.get('app.appraisal.label.appraisalType')}"/></td>
                        <td colspan="3">
                            <p:selectOneRadio id="bizPermissionRadio" value="#{appraisalResult.appraisalView.appraisalType}" disabled="true">
                                <f:selectItem itemLabel="Internal" itemValue="0" />
                                <f:selectItem itemLabel="External" itemValue="1" />
                            </p:selectOneRadio>
                        </td>
                    </tr>
                    <tr>
                        <td class="title">
                            <p:outputLabel value="#{msg.get('app.appraisal.label.appraisalCompany')}"/>
                        </td>
                        <td >
                            <p:selectOneMenu styleClass="largest" size="1" value="#{appraisalResult.appraisalView.appraisalCompany.id}"
                                             disabled="true">
                                <f:selectItem itemLabel="- Please Select -" itemValue=""/>
                                <f:selectItems value="#{appraisalResult.appraisalCompanyList}"
                                               var="appraisalCompany"
                                               itemLabel="#{appraisalCompany.name}"
                                               itemValue="#{appraisalCompany.id}"/>
                            </p:selectOneMenu>
                        </td>
                        <td class="title">
                            <p:outputLabel value="#{msg.get('app.appraisal.label.appraisalDivision')}"/>
                        </td>
                        <td>
                            <p:selectOneMenu styleClass="largest" size="1" value="#{appraisalResult.appraisalView.appraisalDivision.id}"
                                             disabled="true">
                                <f:selectItem itemLabel="- Please Select -" itemValue=""/>
                                <f:selectItems value="#{appraisalResult.appraisalDivisionList}"
                                               var="appraisalDivision"
                                               itemLabel="#{appraisalDivision.name}"
                                               itemValue="#{appraisalDivision.id}"/>
                            </p:selectOneMenu>
                        </td>
                    </tr>
                    <tr>
                        <td class="title">
                            <p:outputLabel value="#{msg.get('app.appraisal.label.appraisalName')}"/>
                        </td>
                        <td colspan="3">
                            <p:inputText value="#{appraisalResult.appraisalView.appraisalName}" readonly="true" />
                        </td>
                    </tr>
                    <tr>
                        <td class="title">
                            <p:outputLabel value="#{msg.get('app.appraisal.label.receivedTaskDate')}"/>
                        </td>
                        <td colspan="3">
                            <p:inputText value="#{appraisalResult.appraisalView.receivedTaskDate}" readonly="true" >
                                <f:convertDateTime pattern="dd/MM/yyyy" locale="th_TH"/>
                            </p:inputText>
                        </td>
                    </tr>
                    <tr>
                        <td class="title">
                            <p:outputLabel value="#{msg.get('app.appraisal.label.locationOfProperty')}"/>
                        </td>
                        <td>
                            <p:selectOneMenu styleClass="largest" id="locationOfPropertyId" size="1" value="#{appraisalResult.appraisalView.locationOfProperty.id}"
                                             disabled="true" >
                                <f:selectItem itemLabel="- Please Select -" itemValue=""/>
                                <f:selectItems value="#{appraisalResult.locationPropertyList}"
                                               var="locationProperty"
                                               itemLabel="#{locationProperty.name}"
                                               itemValue="#{locationProperty.id}"/>
                            </p:selectOneMenu>
                        </td>
                        <td class="title" style="min-width: 200px;width: 200px;max-width: 200px;">
                            <p:outputLabel value="#{msg.get('app.appraisal.label.provinceOfProperty')}"/>
                        </td>
                        <td>
                            <p:selectOneMenu styleClass="largest" id="provinceOfPropertyId" size="1" value="#{appraisalResult.appraisalView.provinceOfProperty.code}"  required="#{not empty param[saveButton.clientId]}" disabled="true" >
                                <f:selectItem itemLabel="- Please Select -" itemValue=""/>
                                <f:selectItems value="#{appraisalResult.provinceList}"
                                               var="province"
                                               itemLabel="#{province.name}"
                                               itemValue="#{province.code}"/>
                            </p:selectOneMenu>
                        </td>
                    </tr>
                    <tr>
                        <td class="title">
                            <p:outputLabel value="#{msg.get('app.appraisal.label.appraisalDate')}"/>
                        </td>
                        <td>
                            <p:inputText value="#{appraisalResult.appraisalView.appraisalDate}" readonly="true" >
                                <f:convertDateTime pattern="dd/MM/yyyy" locale="th_TH"/>
                            </p:inputText>
                        </td>
                        <td class="title">
                            <p:outputLabel value="#{msg.get('app.appraisal.label.dueDate')}"/>
                        </td>
                        <td>
                            <p:inputText value="#{appraisalResult.appraisalView.dueDate}" readonly="true" >
                                <f:convertDateTime pattern="dd/MM/yyyy" locale="th_TH"/>
                            </p:inputText>
                        </td>
                    </tr>
                    <tr>
                        <td class="title">
                            <p:outputLabel value="#{msg.get('app.appraisal.label.AADAdminRemark')}" />
                        </td>
                        <td colspan="3">
                            <p:inputTextarea cols="69" rows="4" value="#{appraisalResult.appraisalView.AADAdminRemark}" disabled="true" />
                        </td>
                    </tr>

                    <tr>
                        <td colspan="6"><p:spacer width="5px"/> </td>
                    </tr>
                    <tr>
                        <td colspan="6"><div class="separate"><!-- --></div></td>
                    </tr>


                    <tr>
                        <td class="title">
                            <p:outputLabel styleClass="title" value="#{msg.get('app.appraisal.label.appraisalReport')}"/>
                        </td>
                        <td class="left" colspan="6">
                            <p:commandButton id="btnAddCollateralDetail"
                                             value="#{msg.get('app.button.add')}"
                                             styleClass="smaller"
                                             style="width: 150px"
                                             process="@this"
                                             actionListener="#{appraisalResult.onAddCollateralDetailView()}"
                                             update=":appraisalComsDlgForm"
                                             oncomplete="appraisalComsViewDlg.show()"/>
                        </td>
                    </tr>
                    <ui:repeat value="#{appraisalResult.newCollateralViewList}" var="collateralDetailView" id="collateralDetailViewRepeat" varStatus="rowIndex" >
                    <tr>
                        <td colspan="6"><div class="separate"><!-- --></div></td>
                    </tr>
                    <tr>
                        <td colspan="6">
                            <p:panel styleClass="panel">
                                 <table style="width: 80%" border="0">
                                     <colgroup>
                                         <col style="width:150px"/>
                                         <col style="width:250px"/>
                                         <col style="width:200px"/>
                                         <col style="width:250px"/>
                                     </colgroup>
                                     <tr>
                                         <td>
                                             <p:outputLabel styleClass="title" value="#{msg.get('app.appraisal.collateral.label.jobID')}"/>
                                         </td>
                                         <td>
                                             <p:outputLabel value="#{collateralDetailView.jobID}"/>
                                         </td>
                                         <td>
                                             <p:commandButton value="Edit"
                                                              action="#{appraisalResult.onEditCollateralDetailView()}"
                                                              update=":appraisalComsDlgForm"
                                                              process=":frmMain"
                                                              oncomplete="appraisalComsViewDlg.show();">
                                                 <f:setPropertyActionListener value="#{collateralDetailView}" target="#{appraisalResult.selectCollateralDetailView}" />
                                                 <f:setPropertyActionListener value="#{rowIndex.index}" target="#{appraisalResult.rowCollateral}" />
                                             </p:commandButton>
                                             <p:commandButton value="Remove" process="@this"
                                                              oncomplete="confirmDeleteCollateralDetailViewDlg.show()" >
                                                 <f:setPropertyActionListener value="#{collateralDetailView}" target="#{appraisalResult.selectCollateralDetailView}"/>
                                                 <f:setPropertyActionListener value="#{rowIndex.index}" target="#{appraisalResult.rowCollateral}" />
                                             </p:commandButton>
                                         </td>
                                     </tr>
                                     <tr>
                                         <td>
                                             <p:outputLabel styleClass="title" value="#{msg.get('app.appraisal.collateral.label.appraisalDate')}"/>
                                         </td>
                                         <td>
                                             <p:outputLabel value="#{collateralDetailView.appraisalDate}">
                                                <f:convertDateTime pattern="dd/MM/yyyy" locale="th_TH"/>
                                             </p:outputLabel>
                                         </td>
                                     </tr>
                                     <tr>
                                         <td>
                                             <p:outputLabel styleClass="title" value="#{msg.get('app.appraisal.collateral.label.AADDecision')}"/>
                                         </td>
                                         <td>
                                             <p:outputLabel value="#{collateralDetailView.aadDecision}"/>
                                         </td>
                                     </tr>
                                     <tr>
                                         <td>
                                             <p:outputLabel styleClass="title" value="#{msg.get('app.appraisal.collateral.label.AADDecisionReason')}"/>
                                         </td>
                                         <td>
                                             <p:outputLabel value="#{collateralDetailView.aadDecisionReason}"/>
                                         </td>
                                         <td>
                                             <p:outputLabel styleClass="title" value="#{msg.get('app.appraisal.collateral.label.AADDecisionReasonDetail')}"/>
                                         </td>
                                         <td>
                                             <p:outputLabel value="#{collateralDetailView.aadDecisionReasonDetail}"/>
                                         </td>
                                     </tr>
                                     <tr>
                                         <td>
                                             <p:outputLabel styleClass="title" value="#{msg.get('app.appraisal.collateral.label.usage')}"/>
                                         </td>
                                         <td>
                                             <p:outputLabel value="#{collateralDetailView.usage}"/>
                                         </td>
                                         <td>
                                             <p:outputLabel styleClass="title" value="#{msg.get('app.appraisal.collateral.label.typeOfUsage')}"/>
                                         </td>
                                         <td>
                                             <p:outputLabel value="#{collateralDetailView.typeOfUsage}"/>
                                         </td>
                                     </tr>
                                     <tr>
                                         <td>
                                             <p:outputLabel styleClass="title" value="#{msg.get('app.appraisal.collateral.label.mortgageCondition')}"/>
                                         </td>
                                         <td>
                                             <p:outputLabel value="#{collateralDetailView.mortgageCondition}"/>
                                         </td>
                                         <td>
                                             <p:outputLabel styleClass="title" value="#{msg.get('app.appraisal.collateral.label.mortgageConditionDetail')}"/>
                                         </td>
                                         <td>
                                             <p:outputLabel value="#{collateralDetailView.mortgageConditionDetail}"/>
                                         </td>
                                     </tr>
                                     <tr>
                                         <td colspan="4">
                                             <div class="separate"></div>
                                         </td>
                                     </tr>
                                 </table>
                                 <ui:repeat value="#{collateralDetailView.newCollateralHeadViewList}" var="collateralHeadDetailView">
                                     <table style="width: 100%" border="0">
                                         <colgroup>
                                             <col style="width:250px"/>
                                             <col style="width:auto"/>
                                         </colgroup>
                                         <tr>
                                             <td>
                                                 <p:outputLabel styleClass="title" value="#{msg.get('app.appraisal.collateralHeader.label.titleDeed')}"/>
                                             </td>
                                             <td>
                                                 <p:outputLabel value="#{collateralHeadDetailView.titleDeed}"/>
                                             </td>
                                         </tr>
                                         <tr>
                                             <td>
                                                 <p:outputLabel styleClass="title" value="#{msg.get('app.appraisal.collateralHeader.label.collateralLocation')}"/>
                                             </td>
                                             <td>
                                                 <p:outputLabel value="#{collateralHeadDetailView.collateralLocation}"/>
                                             </td>
                                         </tr>
                                         <tr>
                                             <td>
                                                 <p:outputLabel styleClass="title" value="#{msg.get('app.appraisal.collateralHeader.label.appraisalValue')}"/>
                                             </td>
                                             <td>
                                                 <p:outputLabel value="#{collateralHeadDetailView.appraisalValue}">
                                                     <f:convertNumber pattern="#,##0"  minFractionDigits="2" maxFractionDigits="2"/>
                                                 </p:outputLabel>
                                             </td>
                                         </tr>
                                         <tr>
                                             <td>
                                                 <p:outputLabel styleClass="title" value="#{msg.get('app.appraisal.collateralHeader.label.headCollType')}"/>
                                             </td>
                                             <td>
                                                 <p:outputLabel value="#{collateralHeadDetailView.headCollType.description}"/>
                                             </td>
                                         </tr>
                                         <tr>
                                             <td colspan="2">
                                                 <p:dataTable style="width: auto"
                                                              id="subCollateralDetailViewTable"
                                                              var="subCollateralDetailView"
                                                              value="#{collateralHeadDetailView.newCollateralSubViewList}"
                                                              paginator="false"
                                                              rowKey="#{subCollateralDetailView}"
                                                              rowIndexVar="rowIndex" >
                                                     <p:columnGroup type="header">
                                                         <p:row>
                                                             <p:column />
                                                             <p:column  headerText="#{msg.get('app.appraisal.subCollateral.label.tb.subCollateralType')}"/>
                                                             <p:column  headerText="#{msg.get('app.appraisal.subCollateral.label.tb.titleDeed')}" />
                                                             <p:column  headerText="#{msg.get('app.appraisal.subCollateral.label.tb.CollateralOwner')}"/>
                                                             <p:column  headerText="#{msg.get('app.appraisal.subCollateral.label.tb.appraisalValue')}"/>
                                                         </p:row>
                                                     </p:columnGroup>
                                                     <p:column styleClass="center" style="width: 50px">
                                                         <p:outputLabel value="#{rowIndex+1}"/>
                                                     </p:column>
                                                     <p:column  styleClass="left" style="width: 500px">
                                                         <p:outputLabel value="#{subCollateralDetailView.subCollateralType.description}"/> <br/>
                                                         <p:outputLabel value="#{subCollateralDetailView.address}"/><br/>
                                                         <p:outputLabel value="#{subCollateralDetailView.landOffice}"/>
                                                     </p:column>
                                                     <p:column  styleClass="left" style="width: 150px">
                                                         <p:outputLabel value="#{subCollateralDetailView.titleDeed}"/> <br/>
                                                     </p:column>
                                                     <p:column styleClass="left" style="width: 250px">
                                                         <p:outputLabel value="#{subCollateralDetailView.collateralOwner}" />
                                                     </p:column>
                                                     <p:column styleClass="right" style="width: 150px">
                                                         <p:outputLabel value="#{subCollateralDetailView.appraisalValue}">
                                                             <f:convertNumber pattern="#,##0" minFractionDigits="2" maxFractionDigits="2"/>
                                                         </p:outputLabel>
                                                     </p:column>
                                                 </p:dataTable>
                                             </td>
                                         </tr>
                                         <tr>
                                             <td colspan="2">
                                                 <p:spacer width="5px"/>
                                             </td>
                                         </tr>
                                     </table>
                                 </ui:repeat>
                            </p:panel>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="6">
                            <p:spacer width="5px"/>
                        </td>
                    </tr>
                     </ui:repeat>
                    <tr>
                        <td colspan="6">
                            <div class="separate"><!-- --></div>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="6">
                            <p:spacer width="5px"/>
                        </td>
                    </tr>
                    <tr>
                        <td class="center" colspan="6">
                            <p:commandButton id="btnSave"
                                     value="#{msg.get('app.button.save')}"
                                     styleClass="medium"
                                     process=":frmMain"
                                     action="#{appraisalResult.onSaveAppraisalResult()}"
                                     update=":msgBoxSystemMessagePanel"/>

                            <p:commandButton value="#{msg.get('app.button.cancel')}"
                                     id="btnCancel"
                                     styleClass="medium"
                                     process=":frmMain"
                                     action="#{appraisalResult.onCancelAppraisalResult()}"
                                     update=":frmMain"/>
                        </td>
                    </tr>
                </table>
            </div>
            <div class="bottom_line"><!-- --></div>
        </div>
        <div class="clear"></div>
        <!-- Start Footer -->
        <ui:include src="include/footer.xhtml" />
        <!-- End Footer -->
    </div>
</h:form>
</p:panel>

<p:dialog id="appraisalContactDetailDialog" header="Appraisal Coms Information" widgetVar="appraisalComsViewDlg" resizable="false"
          modal="true" width="700" height="500" closable="false">
    <ui:include src="dialog/appraisalComsResultDialog.xhtml"/>
</p:dialog>

<ui:include src="dialog/confirmDeleteDlg.xhtml">
    <ui:param name="id" value="confirmDeleteCollateralDetailViewDialog"/>
    <ui:param name="name" value="confirmDeleteCollateralDetailViewDlg"/>
    <ui:param name="formId" value="frmConfirmDeleteCollateralDetailView"/>
    <ui:param name="controller" value="#{appraisalResult}"/>
    <ui:param name="action" value="onDeleteCollateralDetailView"/>
    <ui:param name="update" value=":frmMain"/>
</ui:include>

<p:panel id="msgBoxSystemMessagePanel" styleClass="panel">
    <p:confirmDialog id="msgBoxSystemMessageDialog" widgetVar="msgBoxSystemMessageDlg" styleClass="messageDialog"
                     header="#{appraisalResult.messageHeader}" >
        <f:facet name="message">
            <h:outputText value="#{appraisalResult.message}" escape="false"/>
        </f:facet>
        <p:commandButton value="OK"
                         process="@this"
                         update=":frmMain"
                         oncomplete="msgBoxSystemMessageDlg.hide()"/>
    </p:confirmDialog>
</p:panel>

<p:panel id="msgBoxRedirectPanel" styleClass="panel">
    <p:confirmDialog id="msgBoxRedirectDialog" widgetVar="msgBoxRedirectDlg" styleClass="messageDialog"
                     header="#{appraisalResult.messageHeader}" >
        <f:facet name="message">
            <h:outputText value="#{appraisalResult.message}" escape="false"/>
        </f:facet>
        <p:commandButton value="OK"
                         process="@this"
                         action="#{headerController.onGoToInbox}"/>
    </p:confirmDialog>
</p:panel>

<p:panel id="msgBoxNoRequestMessagePanel" styleClass="panel" rendered="#{appraisalResult.showNoRequest}">
    <p:confirmDialog id="msgBoxNoRequestMessageDialog" widgetVar="msgBoxNoRequestMessageDlg"
                     header="#{appraisalResult.messageHeader}" message="#{appraisalResult.message}" >
        <p:commandButton value="OK"
                         styleClass="medium"
                         process=":frmMain"
                         action="#{appraisalResult.onChangePageCauseNoRequest()}"
                         oncomplete="msgBoxNoRequestMessageDlg.hide()"/>
    </p:confirmDialog>
</p:panel>

<p:blockUI block=":frmMain" trigger=":frmMain:btnSave">
    LOADING<br />
    <p:graphicImage value="/resources/images/shared/ajax-loader.gif"/>
</p:blockUI>

</h:body>
</f:view>
</html>
