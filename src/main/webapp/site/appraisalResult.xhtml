<!DOCTYPE html>
<html>
<f:view xmlns="http://www.w3.org/1999/xhtml"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:p="http://primefaces.org/ui"
        xmlns:c="http://java.sun.com/jsp/jstl/core"
        >

<h:head>
    <title>SELOS : Appraisal Result</title>
    <h:outputStylesheet name="css/style.css" />
    <h:outputScript library="js" name="custom.js" />
</h:head>
<h:body>
    <p:panel id="pnl_maincontainer" style="border:0; margin:0; padding: 0;">
        <h:form id="frmMain">
            <div id="main_container">
                <!-- Start Header Logo -->
                <ui:include src="include/header_logo.xhtml" />
                <!-- End Header Logo -->
                <!-- Start Header Detail -->
                <ui:include src="include/header_detail.xhtml" />
                <!-- End Header Detail -->
                <!-- Start Menu -->
                <ui:include src="include/menubar.xhtml" />
                <!-- End Menu -->
                <div id="content_container">
                    <div id="content_name"><p:outputLabel styleClass="title" value="#{msg.get('app.appraisalResult.header')}"/></div>
                    <div id="content">
                        <div id="content_info">
                            <div id="content_trackchange">[ View Track Change ]</div>
                            <div id="content_lastupdate">Last update by <h:outputText value="#{appraisalResult.appraisalView.modifyBy.userName}"/> ,<h:outputText value="#{appraisalResult.appraisalView.modifyDate}"><f:convertDateTime pattern="dd MMMM yyyy HH:mm:ss" locale="th_TH" /></h:outputText></div>
                        </div>
                        <div id="content_form">
                            <!-- start content -->
                            <table id="table_content" style="width: 100%;" class="content_table_form">
                                <tr>
                                    <td colspan="4" class="title"><p:outputLabel value="#{msg.get('app.appraisal.label.appraisalDetail')}"/> </td>
                                </tr>

                                <tr>
                                    <td class="title" style="width: 200px;"><p:outputLabel value="#{msg.get('app.appraisal.label.appraisalType')}" for="appraisalType"/></td>
                                    <td colspan="3">
                                        <p:selectOneRadio id="appraisalType"
                                                          disabled="#{appraisalResult.isDisabled('appraisalType')}"
                                                          value="#{appraisalResult.appraisalView.appraisalType}">
                                            <f:selectItem itemLabel="Internal" itemValue="0" />
                                            <f:selectItem itemLabel="External" itemValue="1" />
                                        </p:selectOneRadio>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="title">
                                        <p:outputLabel value="#{msg.get('app.appraisal.label.appraisalCompany')}" for="appraisalCompany"/>
                                    </td>
                                    <td style="width: 450px;">
                                        <p:selectOneMenu id="appraisalCompany" styleClass="largest" size="1"
                                                         disabled="#{appraisalResult.isDisabled('appraisalCompany')}"
                                                         value="#{appraisalResult.appraisalView.appraisalCompany.id}">
                                            <f:selectItem itemLabel="- Please Select -" itemValue=""/>
                                            <f:selectItems value="#{appraisalResult.appraisalCompanyList}"
                                                           var="appraisalCompany"
                                                           itemLabel="#{appraisalCompany.name}"
                                                           itemValue="#{appraisalCompany.id}"/>
                                        </p:selectOneMenu>
                                    </td>
                                    <td class="title" style="width: 200px;">
                                        <p:outputLabel value="#{msg.get('app.appraisal.label.appraisalDivision')}" for="appraisalDivision"/>
                                    </td>
                                    <td>
                                        <p:selectOneMenu id="appraisalDivision" styleClass="largest" size="1"
                                                         disabled="#{appraisalResult.isDisabled('appraisalDivision')}"
                                                         value="#{appraisalResult.appraisalView.appraisalDivision.id}">
                                            <f:selectItem itemLabel="- Please Select -" itemValue=""/>
                                            <f:selectItems value="#{appraisalResult.appraisalDivisionList}"
                                                           var="appraisalDivision"
                                                           itemLabel="#{appraisalDivision.name}"
                                                           itemValue="#{appraisalDivision.id}"/>
                                        </p:selectOneMenu>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="title">
                                        <p:outputLabel value="#{msg.get('app.appraisal.label.appraisalName')}" for="appraisalName"/>
                                    </td>
                                    <td colspan="3">
                                        <p:inputText id="appraisalName"
                                                     disabled="#{appraisalResult.isDisabled('appraisalName')}"
                                                     value="#{appraisalResult.appraisalView.appraisalName}" />
                                    </td>
                                </tr>
                                <tr>
                                    <td class="title">
                                        <p:outputLabel value="#{msg.get('app.appraisal.label.receivedTaskDate')}" for="receivedTaskDate"/>
                                    </td>
                                    <td colspan="3">
                                        <p:inputText id="receivedTaskDate" value="#{appraisalResult.appraisalView.receivedTaskDate}"
                                                     disabled="#{appraisalResult.isDisabled('receivedTaskDate')}" >
                                            <f:convertDateTime pattern="dd/MM/yyyy" locale="th_TH"/>
                                        </p:inputText>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="title">
                                        <p:outputLabel value="#{msg.get('app.appraisal.label.locationOfProperty')}" for="locationOfProperty"/>
                                    </td>
                                    <td>
                                        <p:selectOneMenu id="locationOfProperty" styleClass="largest" size="1"
                                                         disabled="#{appraisalResult.isDisabled('locationOfProperty')}"
                                                         value="#{appraisalResult.appraisalView.locationOfProperty.id}">
                                            <f:selectItem itemLabel="- Please Select -" itemValue=""/>
                                            <f:selectItems value="#{appraisalResult.locationPropertyList}"
                                                           var="locationProperty"
                                                           itemLabel="#{locationProperty.name}"
                                                           itemValue="#{locationProperty.id}"/>
                                        </p:selectOneMenu>
                                    </td>
                                    <td class="title">
                                        <p:outputLabel value="#{msg.get('app.appraisal.label.provinceOfProperty')}" for="provinceOfProperty"/>
                                    </td>
                                    <td>
                                        <p:selectOneMenu id="provinceOfProperty" styleClass="largest" size="1"
                                                         disabled="#{appraisalResult.isDisabled('provinceOfProperty')}"
                                                         value="#{appraisalResult.appraisalView.provinceOfProperty.code}"
                                                         required="#{not empty param[saveButton.clientId]}">
                                            <f:selectItem itemLabel="- Please Select -" itemValue=""/>
                                            <f:selectItems value="#{appraisalResult.provinceList}"
                                                           var="province"
                                                           itemLabel="#{province.name}"
                                                           itemValue="#{province.code}"/>
                                        </p:selectOneMenu>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="title">
                                        <p:outputLabel value="#{msg.get('app.appraisal.label.appraisalDate')}" for="appraisalDate"/>
                                    </td>
                                    <td>
                                        <p:inputText id="appraisalDate" value="#{appraisalResult.appraisalView.appraisalDate}" disabled="#{appraisalResult.isDisabled('appraisalDate')}" >
                                            <f:convertDateTime pattern="dd/MM/yyyy" locale="th_TH"/>
                                        </p:inputText>
                                    </td>
                                    <td class="title">
                                        <p:outputLabel value="#{msg.get('app.appraisal.label.dueDate')}" for="dueDate"/>
                                    </td>
                                    <td>
                                        <p:inputText id="dueDate"
                                                     value="#{appraisalResult.appraisalView.dueDate}"
                                                     disabled="#{appraisalResult.isDisabled('dueDate')}" >
                                            <f:convertDateTime pattern="dd/MM/yyyy" locale="th_TH"/>
                                        </p:inputText>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="title">
                                        <p:outputLabel value="#{msg.get('app.appraisal.label.AADAdminRemark')}" for="AADAdminRemark" />
                                    </td>
                                    <td colspan="3">
                                        <p:inputTextarea id="AADAdminRemark" cols="69" rows="4"
                                                         value="#{appraisalResult.appraisalView.AADAdminRemark}"
                                                         disabled="#{appraisalResult.isDisabled('AADAdminRemark')}" />
                                    </td>
                                </tr>
                                <tr>
                                    <td colspan="4"><p:spacer width="5px"/> </td>
                                </tr>
                                <tr>
                                    <td colspan="4"><div class="separate"><!-- --></div></td>
                                </tr>
                                <tr>
                                    <td class="title">
                                        <p:outputLabel styleClass="title" value="#{msg.get('app.appraisal.label.appraisalReport')}"/>
                                    </td>
                                    <td class="left" colspan="3">
                                        <p:commandButton id="btnAddCollateralDetail" styleClass="small"
                                                         onclick="PF('blockUI').show()"
                                                         value="#{msg.get('app.button.add')}"
                                                         disabled="#{appraisalResult.isDisabled('addAppraisalReportButton')}"
                                                         process="@this"
                                                         actionListener="#{appraisalResult.onAddCollateralDetailView()}"
                                                         update=":appraisalComsDlgForm"
                                                         onsuccess="blockUI.hide()"
                                                         oncomplete="appraisalComsViewDlg.show()"/>
                                    </td>
                                </tr>
                                <ui:repeat value="#{appraisalResult.newCollateralViewList}" var="collateralDetailView" id="collateralDetailViewRepeat" varStatus="rowIndex" >
                                    <tr>
                                        <td colspan="4"><div class="separate"><!-- --></div></td>
                                    </tr>
                                    <tr>
                                        <td colspan="4">
                                            <p:panel styleClass="panel">
                                                <table style="width: 100%" border="0">
                                                    <tr>
                                                        <td class="title" style="width: 240px;">
                                                            <h:outputText value="#{msg.get('app.appraisal.collateral.label.jobID')}"/>
                                                        </td>
                                                        <td style="width: 300px;">
                                                            <h:outputText value="#{collateralDetailView.jobID}"/>
                                                        </td>
                                                        <td colspan="2">
                                                            <p:commandButton value="#{msg.get('app.button.edit')}"
                                                                             action="#{appraisalResult.onEditCollateralDetailView()}"
                                                                             update=":appraisalComsDlgForm"
                                                                             process=":frmMain"
                                                                             oncomplete="appraisalComsViewDlg.show();">
                                                                <f:setPropertyActionListener value="#{collateralDetailView}" target="#{appraisalResult.selectCollateralDetailView}" />
                                                                <f:setPropertyActionListener value="#{rowIndex.index}" target="#{appraisalResult.rowCollateral}" />
                                                                <p:resetInput target=":appraisalComsDlgForm"/>
                                                            </p:commandButton>
                                                            <p:commandButton value="Remove" process="@this"
                                                                             disabled="#{appraisalResult.isDisabled('collateral.deleteButton')}"
                                                                             oncomplete="confirmDeleteCollateralDetailViewDlg.show()" >
                                                                <f:setPropertyActionListener value="#{collateralDetailView}" target="#{appraisalResult.selectCollateralDetailView}"/>
                                                                <f:setPropertyActionListener value="#{rowIndex.index}" target="#{appraisalResult.rowCollateral}" />
                                                            </p:commandButton>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td class="title">
                                                            <h:outputText value="#{msg.get('app.appraisal.collateral.label.appraisalDate')}"/>
                                                        </td>
                                                        <td colspan="3">
                                                            <h:outputText value="#{collateralDetailView.appraisalDate}">
                                                                <f:convertDateTime pattern="dd/MM/yyyy" locale="th_TH"/>
                                                            </h:outputText>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td class="title">
                                                            <h:outputText value="#{msg.get('app.appraisal.collateral.label.AADDecision')}"/>
                                                        </td>
                                                        <td colspan="3">
                                                            <h:outputText value="#{collateralDetailView.aadDecisionLabel}"/>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td class="title">
                                                            <h:outputText value="#{msg.get('app.appraisal.collateral.label.AADDecisionReason')}"/>
                                                        </td>
                                                        <td>
                                                            <h:outputText value="#{collateralDetailView.aadDecisionReason}"/>
                                                        </td>
                                                        <td class="title" style="width: 240px;">
                                                            <h:outputText value="#{msg.get('app.appraisal.collateral.label.AADDecisionReasonDetail')}"/>
                                                        </td>
                                                        <td>
                                                            <h:outputText value="#{collateralDetailView.aadDecisionReasonDetail}"/>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td class="title">
                                                            <h:outputText value="#{msg.get('app.appraisal.collateral.label.usage')}"/>
                                                        </td>
                                                        <td>
                                                            <h:outputText value="#{collateralDetailView.usage}"/>
                                                        </td>
                                                        <td class="title">
                                                            <h:outputText value="#{msg.get('app.appraisal.collateral.label.typeOfUsage')}"/>
                                                        </td>
                                                        <td>
                                                            <h:outputText value="#{collateralDetailView.typeOfUsage}"/>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td class="title">
                                                            <h:outputText value="#{msg.get('app.appraisal.collateral.label.mortgageCondition')}"/>
                                                        </td>
                                                        <td>
                                                            <h:outputText value="#{collateralDetailView.mortgageCondition}"/>
                                                        </td>
                                                        <td class="title">
                                                            <h:outputText value="#{msg.get('app.appraisal.collateral.label.mortgageConditionDetail')}"/>
                                                        </td>
                                                        <td>
                                                            <h:outputText value="#{collateralDetailView.mortgageConditionDetail}"/>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td colspan="4">
                                                            <div class="separate"><!-- --></div>
                                                        </td>
                                                    </tr>
                                                </table>
                                                <ui:repeat value="#{collateralDetailView.proposeCollateralInfoHeadViewList}" var="collateralHeadDetailView" varStatus="loopItem">
                                                    <!--#{collateralHeadDetailView.createdByAAD}
                                                    <h:panelGroup rendered="#{collateralHeadDetailView.createdByAAD == 1}">-->
                                                    <table style="width: 100%" border="0">
                                                        <tr>
                                                            <td class="title" style="width: 240px;">
                                                                <h:outputText value="#{msg.get('app.appraisal.collateralHeader.label.titleDeed')}"/>
                                                            </td>
                                                            <td>
                                                                <h:outputText value="#{collateralHeadDetailView.titleDeed}"/>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td>
                                                                <h:outputText styleClass="title" value="#{msg.get('app.appraisal.collateralHeader.label.collateralLocation')}"/>
                                                            </td>
                                                            <td>
                                                                <h:outputText value="#{collateralHeadDetailView.collateralLocation}"/>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td>
                                                                <h:outputText styleClass="title" value="#{msg.get('app.appraisal.collateralHeader.label.appraisalValue')}"/>
                                                            </td>
                                                            <td>
                                                                <h:outputText value="#{collateralHeadDetailView.appraisalValue}">
                                                                    <f:convertNumber pattern="#,##0"  minFractionDigits="2" maxFractionDigits="2"/>
                                                                </h:outputText>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td>
                                                                <h:outputText styleClass="title" value="#{msg.get('app.appraisal.collateralHeader.label.headCollType')}"/>
                                                            </td>
                                                            <td>
                                                                <h:outputText value="#{collateralHeadDetailView.headCollType.description}"/>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td colspan="2">
                                                                <p:dataTable style="width: auto"
                                                                             id="subCollateralDetailViewTable"
                                                                             var="subCollateralDetailView"
                                                                             value="#{collateralHeadDetailView.proposeCollateralInfoSubViewList}"
                                                                             paginator="false"
                                                                             rowKey="#{subCollateralDetailView}"
                                                                             rowIndexVar="rowIndex" >
                                                                    <p:columnGroup type="header">
                                                                        <p:row>
                                                                            <p:column style="width: 25px;" />
                                                                            <p:column style="width: 260px;" headerText="#{msg.get('app.appraisal.subCollateral.label.tb.subCollateralType')}"/>
                                                                            <p:column style="width: 150px;" headerText="#{msg.get('app.appraisal.subCollateral.label.tb.titleDeed')}" />
                                                                            <p:column style="width: 290px;" headerText="#{msg.get('app.appraisal.subCollateral.label.tb.CollateralOwner')}"/>
                                                                            <p:column style="width: 140px;" headerText="#{msg.get('app.appraisal.subCollateral.label.tb.appraisalValue')}"/>
                                                                        </p:row>
                                                                    </p:columnGroup>
                                                                    <p:column styleClass="center">
                                                                        <h:outputText value="#{rowIndex+1}"/>
                                                                    </p:column>
                                                                    <p:column  styleClass="left">
                                                                        <h:outputText value="#{subCollateralDetailView.subCollateralType.description}"/> <br/>
                                                                        <h:outputText value="#{subCollateralDetailView.address}"/><br/>
                                                                        <h:outputText value="#{subCollateralDetailView.landOffice}"/>
                                                                    </p:column>
                                                                    <p:column  styleClass="left">
                                                                        <h:outputText value="#{subCollateralDetailView.titleDeed}"/> <br/>
                                                                    </p:column>
                                                                    <p:column styleClass="left">
                                                                        <h:outputText value="#{subCollateralDetailView.collateralOwnerAAD}" />
                                                                    </p:column>
                                                                    <p:column styleClass="right">
                                                                        <h:outputText value="#{subCollateralDetailView.appraisalValue}">
                                                                            <f:convertNumber pattern="#,##0" minFractionDigits="2" maxFractionDigits="2"/>
                                                                        </h:outputText>
                                                                    </p:column>
                                                                </p:dataTable>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td colspan="2">
                                                                <p:spacer width="5px"/>
                                                            </td>
                                                        </tr>
                                                    </table>
                                                   <!-- </h:panelGroup>-->
                                                </ui:repeat>
                                            </p:panel>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td colspan="4">
                                            <p:spacer width="5px"/>
                                        </td>
                                    </tr>
                                </ui:repeat>
                                <tr>
                                    <td colspan="4">
                                        <div class="separate"><!-- --></div>
                                    </td>
                                </tr>
                                <tr>
                                    <td colspan="4">
                                        <p:spacer width="5px"/>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="center" colspan="4">
                                        <p:commandButton id="btnSave"
                                                         value="#{msg.get('app.button.save')}"
                                                         disabled="#{appraisalResult.isDisabled('saveButton')}"
                                                         styleClass="medium"
                                                         process=":frmMain"
                                                         action="#{appraisalResult.onSaveAppraisalResult()}"
                                                         update=":msgBoxSystemMessagePanel"/>
                                        <p:commandButton value="#{msg.get('app.button.cancel')}"
                                                         id="btnCancel"
                                                         styleClass="medium"
                                                         process=":frmMain"
                                                         action="#{appraisalResult.onCancelAppraisalResult()}"
                                                         update=":frmMain"/>
                                    </td>
                                </tr>
                            </table>
                    </div>
                    </div>
                    <div class="bottom_line"><!-- --></div>
                </div>
                <div class="clear"></div>
                <!-- Start Footer -->
                <ui:include src="include/footer.xhtml" />
                <!-- End Footer -->
            </div>
            <p:blockUI widgetVar="blockUI" block=":frmMain" trigger=":frmMain:btnSave">
                LOADING<br />
                <p:graphicImage value="/resources/images/shared/ajax-loader.gif"/>
            </p:blockUI>
        </h:form>
    </p:panel>
    <p:dialog id="appraisalContactDetailDialog" header="Appraisal Coms Information" widgetVar="appraisalComsViewDlg" resizable="false"
              modal="true" width="920" height="600" closable="false">
        <ui:include src="dialog/appraisalComsResultDialog.xhtml"/>
    </p:dialog>
    <ui:include src="dialog/confirmDeleteDlg.xhtml">
        <ui:param name="id" value="confirmDeleteCollateralDetailViewDialog"/>
        <ui:param name="name" value="confirmDeleteCollateralDetailViewDlg"/>
        <ui:param name="formId" value="frmConfirmDeleteCollateralDetailView"/>
        <ui:param name="controller" value="#{appraisalResult}"/>
        <ui:param name="action" value="onDeleteCollateralDetailView"/>
        <ui:param name="update" value=":frmMain"/>
    </ui:include>
    <p:panel id="msgBoxSystemMessagePanel" styleClass="panel">
        <p:confirmDialog id="msgBoxSystemMessageDialog" widgetVar="msgBoxSystemMessageDlg" styleClass="messageDialog"
                         closable="false"
                         header="#{appraisalResult.messageHeader}" >
            <f:facet name="message">
                <h:outputText value="#{appraisalResult.message}" escape="false"/>
            </f:facet>
            <p:commandButton value="OK"
                             process="@this"
                             update=":frmMain"
                             oncomplete="msgBoxSystemMessageDlg.hide()"/>
        </p:confirmDialog>
    </p:panel>
    <p:panel id="msgBoxRedirectPanel" styleClass="panel">
        <p:confirmDialog id="msgBoxRedirectDialog" widgetVar="msgBoxRedirectDlg" styleClass="messageDialog"
                         header="#{appraisalResult.messageHeader}" >
            <f:facet name="message">
                <h:outputText value="#{appraisalResult.message}" escape="false"/>
            </f:facet>
            <p:commandButton value="OK"
                             process="@this"
                             action="#{headerController.onGoToInbox}"/>
        </p:confirmDialog>
    </p:panel>
    <p:panel id="msgBoxNoRequestMessagePanel" styleClass="panel" rendered="#{appraisalResult.showNoRequest}">
        <p:confirmDialog id="msgBoxNoRequestMessageDialog" widgetVar="msgBoxNoRequestMessageDlg"
                         header="#{appraisalResult.messageHeader}" message="#{appraisalResult.message}" >
            <p:commandButton value="OK"
                             styleClass="medium"
                             process=":frmMain"
                             action="#{appraisalResult.onChangePageCauseNoRequest()}"
                             oncomplete="msgBoxNoRequestMessageDlg.hide()"/>
        </p:confirmDialog>
    </p:panel>
</h:body>
</f:view>
</html>
