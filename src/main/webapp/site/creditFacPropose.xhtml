<!DOCTYPE html>
<html>
<f:view xmlns="http://www.w3.org/1999/xhtml"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:p="http://primefaces.org/ui"
        xmlns:fn="http://java.sun.com/jsp/jstl/functions">

<h:head>
    <title>SE-LOS : Credit Facility - Propose Line</title>
    <link type="text/css" rel="stylesheet" href="#{request.contextPath}/resources/css/style.css"/>
    <script type="text/javascript" language="javascript"
            src="#{request.contextPath}/resources/js/jquery.numeric.js"/>
    <script type="text/javascript" language="javascript" src="#{request.contextPath}/resources/js/custom.js"/>
</h:head>

<h:body>
<p:panel id="pnl_maincontainer" style="border:0; margin:0; padding: 0;">
<h:form id="frmMain">
<div id="main_container">
<!-- Start Header Logo -->
<ui:include src="include/header_logo.xhtml"/>
<!-- End Header Logo -->
<!-- Start Header Detail -->
<ui:include src="include/header_detail.xhtml"/>
<!-- End Header Detail -->
<!-- Start Menu -->
<ui:include src="include/menubar.xhtml"/>
<!-- End Menu -->
<div id="content_container">
<div id="content_name">#{msg.get('app.credit.facility.propose.title.header')}</div>
<div id="content">
<div id="content_info">
    <div id="content_trackchange" title="Click to view Track Change">[ View Track Change ]
    </div>
    <div id="content_lastupdate">Last update by
        <h:outputText id="lastupdateName" value="#{creditFacPropose.creditFacProposeView.modifyBy.userName}"/>,
        <h:outputText id="lastupdateTime" value="#{creditFacPropose.creditFacProposeView.modifyDate}"/>
    </div>
</div>
<div id="content_form">
<!-- start content -->
<table class="content_table_form">

<tr>
    <td style="text-align: left" class="title">
        <h:outputText
                value="#{msg.get('app.credit.facility.propose.title.wcRequirement')}"/>
    </td>
</tr>

<!-- wcRequirement -->

<tr>
<td>

<table class="table_content" style="width:100%">

<tr>
    <td style="text-align: left;background-color:#ffffff" class="title">
        <h:outputText
                value="#{msg.get('app.credit.facility.propose.label.WCNeed')}"/>
    </td>
    <td style="background-color:#ffffff">
        <p:inputText styleClass="large"
                     value="#{creditFacPropose.creditFacProposeView.WCNeed}"
                     style="text-align: right;"
                     readonly="true">
            <f:convertNumber pattern="#,##0"
                             minFractionDigits="2"
                             maxFractionDigits="2"
                             maxIntegerDigits="14"/>
            <p:ajax event="blur" update="@this"/>
        </p:inputText>
        <p:spacer width="5px;"/>
        <h:outputText
                value="#{msg.get('app.credit.facility.propose.label.unit')}"/>
    </td>
    <td style="text-align: left;background-color:#ffffff" class="title">
        <h:outputText
                value="#{msg.get('app.credit.facility.propose.label.totalWCdebit')}"/>
    </td>
    <td style="background-color:#ffffff">
        <p:inputText styleClass="large"
                     value="#{creditFacPropose.creditFacProposeView.totalWcDebit}"
                     style="text-align: right;">
            <f:convertNumber pattern="#,##0"
                             minFractionDigits="2"
                             maxFractionDigits="2"
                             maxIntegerDigits="14"/>
            <p:ajax event="blur" update="@this"/>
        </p:inputText>
        <p:spacer width="5px;"/>
        <h:outputText
                value="#{msg.get('app.credit.facility.propose.label.unit')}"/>
    </td>
    <td style="text-align: left;background-color:#ffffff" class="title">
        <h:outputText
                value="#{msg.get('app.credit.facility.propose.label.WCNeedDiffer')}"/>
    </td>
    <td style="background-color:#ffffff">
        <p:inputText styleClass="large"
                     value="#{creditFacPropose.creditFacProposeView.WCNeedDiffer}"
                     style="text-align: right;">
            <f:convertNumber pattern="#,##0"
                             minFractionDigits="2"
                             maxFractionDigits="2"
                             maxIntegerDigits="14"/>
            <p:ajax event="blur" update="@this"/>
        </p:inputText>
        <p:spacer width="5px;"/>
        <h:outputText
                value="#{msg.get('app.credit.facility.propose.label.unit')}"/>
    </td>
</tr>

<tr>
    <td colspan="2">
    </td>
    <td style="text-align: left" class="title">
        <h:outputText
                value="#{msg.get('app.credit.facility.propose.label.totalCreditTurnover')}"/>
    </td>
    <td>
        <p:inputText styleClass="large"
                     value="#{creditFacPropose.creditFacProposeView.totalCreditTurnover}"
                     style="text-align: right;"
                     readonly="true">
            <f:convertNumber pattern="#,##0"
                             minFractionDigits="2"
                             maxFractionDigits="2"
                             maxIntegerDigits="14"/>
            <p:ajax event="blur" update="@this"/>
        </p:inputText>
        <p:spacer width="5px;"/>
        <h:outputText
                value="#{msg.get('app.credit.facility.propose.label.unit')}"/>
    </td>
    <td colspan="2">
    </td>
</tr>

<tr>
    <td colspan="6">
    </td>
</tr>

<tr>
    <td colspan="6">
        <table class="table_noborder">
            <tr>
                <td colspan="8" style="text-align: left" class="title">
                    <h:outputText
                            value="#{msg.get('app.credit.facility.propose.label.case1WC')}"/>
                </td>
            </tr>
            <tr>
                <td style="text-align: left" class="title">
                    <h:outputText
                            value="#{msg.get('app.credit.facility.propose.label.case1WC.limit')}"/>
                </td>
                <td>
                    <p:inputText styleClass="medium"
                                 value="#{creditFacPropose.creditFacProposeView.case1WcLimit}"
                                 style="text-align: right;"
                                 readonly="true">
                        <f:convertNumber pattern="#,##0"
                                         minFractionDigits="2"
                                         maxFractionDigits="2"
                                         maxIntegerDigits="14"/>
                        <p:ajax event="blur" update="@this"/>
                    </p:inputText>
                    <p:spacer width="5px;"/>
                    <h:outputText
                            value="#{msg.get('app.credit.facility.propose.label.unit')}"/>
                </td>
                <td style="text-align: left" class="title">
                    <h:outputText
                            value="#{msg.get('app.credit.facility.propose.label.case1WC.minLimit')}"/>
                </td>
                <td>
                    <p:inputText styleClass="medium"
                                 value="#{creditFacPropose.creditFacProposeView.case1WcMinLimit}"
                                 style="text-align:right;"
                                 readonly="true">
                        <f:convertNumber pattern="#,##0"
                                         minFractionDigits="2"
                                         maxFractionDigits="2"
                                         maxIntegerDigits="14"/>
                        <p:ajax event="blur" update="@this"/>
                    </p:inputText>
                    <p:spacer width="5px;"/>
                    <h:outputText
                            value="#{msg.get('app.credit.facility.propose.label.unit')}"/>
                </td>
                <td style="text-align: left" class="title">
                    <h:outputText
                            value="#{msg.get('app.credit.facility.propose.label.case1WC.50CoreWC')}"/>
                </td>
                <td>
                    <p:inputText styleClass="medium"
                                 value="#{creditFacPropose.creditFacProposeView.case1Wc50CoreWc}"
                                 style="text-align: right;"
                                 readonly="true">
                        <f:convertNumber pattern="#,##0"
                                         minFractionDigits="2"
                                         maxFractionDigits="2"
                                         maxIntegerDigits="14"/>
                        <p:ajax event="blur" update="@this"/>
                    </p:inputText>
                    <p:spacer width="5px;"/>
                    <h:outputText
                            value="#{msg.get('app.credit.facility.propose.label.unit')}"/>
                </td>
                <td style="text-align: left" class="title">
                    <h:outputText
                            value="#{msg.get('app.credit.facility.propose.label.case1WC.debitCoreWC')}"/>
                </td>
                <td>
                    <p:inputText styleClass="medium"
                                 value="#{creditFacPropose.creditFacProposeView.case1WcDebitCoreWc}"
                                 style="text-align: right;"
                                 readonly="true">
                        <f:convertNumber pattern="#,##0"
                                         minFractionDigits="2"
                                         maxFractionDigits="2"
                                         maxIntegerDigits="14"/>
                        <p:ajax event="blur" update="@this"/>
                    </p:inputText>
                    <p:spacer width="5px;"/>
                    <h:outputText
                            value="#{msg.get('app.credit.facility.propose.label.unit')}"/>
                </td>
            </tr>
        </table>
    </td>
</tr>

<tr>
    <td colspan="6" style="background-color:#ffffff">
        <table class="table_noborder">
            <tr>
                <td colspan="8" style="text-align: left" class="title">
                    <h:outputText
                            value="#{msg.get('app.credit.facility.propose.label.case2WC')}"/>
                </td>
            </tr>
            <tr>
                <td style="text-align: left" class="title">
                    <h:outputText
                            value="#{msg.get('app.credit.facility.propose.label.case2WC.limit')}"/>
                </td>
                <td>
                    <p:inputText styleClass="medium"
                                 value="#{creditFacPropose.creditFacProposeView.case2WcLimit}"
                                 style="text-align: right;"
                                 readonly="true">
                        <f:convertNumber pattern="#,##0"
                                         minFractionDigits="2"
                                         maxFractionDigits="2"
                                         maxIntegerDigits="14"/>
                        <p:ajax event="blur" update="@this"/>
                    </p:inputText>
                    <p:spacer width="5px;"/>
                    <h:outputText
                            value="#{msg.get('app.credit.facility.propose.label.unit')}"/>
                </td>
                <td style="text-align: left" class="title">
                    <h:outputText
                            value="#{msg.get('app.credit.facility.propose.label.case2WC.minLimit')}"/>
                </td>
                <td>
                    <p:inputText styleClass="medium"
                                 value="#{creditFacPropose.creditFacProposeView.case2WcMinLimit}"
                                 style="text-align: right;"
                                 readonly="true">
                        <f:convertNumber pattern="#,##0"
                                         minFractionDigits="2"
                                         maxFractionDigits="2"
                                         maxIntegerDigits="14"/>
                        <p:ajax event="blur" update="@this"/>
                    </p:inputText>
                    <p:spacer width="5px;"/>
                    <h:outputText
                            value="#{msg.get('app.credit.facility.propose.label.unit')}"/>
                </td>
                <td style="text-align: left" class="title">
                    <h:outputText
                            value="#{msg.get('app.credit.facility.propose.label.case2WC.50CoreWC')}"/>
                </td>
                <td>
                    <p:inputText styleClass="medium"
                                 value="#{creditFacPropose.creditFacProposeView.case2Wc50CoreWc}"
                                 style="text-align: right;"
                                 readonly="true">
                        <f:convertNumber pattern="#,##0"
                                         minFractionDigits="2"
                                         maxFractionDigits="2"
                                         maxIntegerDigits="14"/>
                        <p:ajax event="blur" update="@this"/>
                    </p:inputText>
                    <p:spacer width="5px;"/>
                    <h:outputText
                            value="#{msg.get('app.credit.facility.propose.label.unit')}"/>
                </td>
                <td style="text-align: left" class="title">
                    <h:outputText
                            value="#{msg.get('app.credit.facility.propose.label.case2WC.debitCoreWC')}"/>
                </td>
                <td>
                    <p:inputText styleClass="medium"
                                 value="#{creditFacPropose.creditFacProposeView.case2WcDebitCoreWc}"
                                 style="text-align: right;"
                                 readonly="true">
                        <f:convertNumber pattern="#,##0"
                                         minFractionDigits="2"
                                         maxFractionDigits="2"
                                         maxIntegerDigits="14"/>
                        <p:ajax event="blur" update="@this"/>
                    </p:inputText>
                    <p:spacer width="5px;"/>
                    <h:outputText
                            value="#{msg.get('app.credit.facility.propose.label.unit')}"/>
                </td>
            </tr>
        </table>
    </td>
</tr>

<tr>
    <td colspan="6">
        <table class="table_noborder">
            <tr>
                <td colspan="8" style="text-align: left" class="title">
                    <h:outputText
                            value="#{msg.get('app.credit.facility.propose.label.case3WC')}"/>
                </td>
            </tr>
            <tr>
                <td style="text-align: left" class="title">
                    <h:outputText
                            value="#{msg.get('app.credit.facility.propose.label.case3WC.limit')}"/>
                </td>
                <td>
                    <p:inputText styleClass="medium"
                                 value="#{creditFacPropose.creditFacProposeView.case3WcLimit}"
                                 style="text-align: right;"
                                 readonly="true">
                        <f:convertNumber pattern="#,##0"
                                         minFractionDigits="2"
                                         maxFractionDigits="2"
                                         maxIntegerDigits="14"/>
                        <p:ajax event="blur" update="@this"/>
                    </p:inputText>
                    <p:spacer width="5px;"/>
                    <h:outputText
                            value="#{msg.get('app.credit.facility.propose.label.unit')}"/>
                </td>
                <td style="text-align: left" class="title">
                    <h:outputText
                            value="#{msg.get('app.credit.facility.propose.label.case3WC.minLimit')}"/>
                </td>
                <td>
                    <p:inputText styleClass="medium"
                                 value="#{creditFacPropose.creditFacProposeView.case3WcMinLimit}"
                                 style="text-align: right;"
                                 readonly="true">
                        <f:convertNumber pattern="#,##0"
                                         minFractionDigits="2"
                                         maxFractionDigits="2"
                                         maxIntegerDigits="14"/>
                        <p:ajax event="blur" update="@this"/>
                    </p:inputText>
                    <p:spacer width="5px;"/>
                    <h:outputText
                            value="#{msg.get('app.credit.facility.propose.label.unit')}"/>
                </td>
                <td style="text-align: left" class="title">
                    <h:outputText
                            value="#{msg.get('app.credit.facility.propose.label.case3WC.50CoreWC')}"/>
                </td>
                <td>
                    <p:inputText styleClass="medium"
                                 value="#{creditFacPropose.creditFacProposeView.case3Wc50CoreWc}"
                                 style="text-align: right;"
                                 readonly="true">
                        <f:convertNumber pattern="#,##0"
                                         minFractionDigits="2"
                                         maxFractionDigits="2"
                                         maxIntegerDigits="14"/>
                        <p:ajax event="blur" update="@this"/>
                    </p:inputText>
                    <p:spacer width="5px;"/>
                    <h:outputText
                            value="#{msg.get('app.credit.facility.propose.label.unit')}"/>
                </td>
                <td style="text-align: left" class="title">
                    <h:outputText
                            value="#{msg.get('app.credit.facility.propose.label.case3WC.debitCoreWC')}"/>
                </td>
                <td>
                    <p:inputText styleClass="medium"
                                 value="#{creditFacPropose.creditFacProposeView.case3WcDebitCoreWc}"
                                 style="text-align: right;"
                                 readonly="true">
                        <f:convertNumber pattern="#,##0"
                                         minFractionDigits="2"
                                         maxFractionDigits="2"
                                         maxIntegerDigits="14"/>
                        <p:ajax event="blur" update="@this"/>
                    </p:inputText>
                    <p:spacer width="5px;"/>
                    <h:outputText
                            value="#{msg.get('app.credit.facility.propose.label.unit')}"/>
                </td>
            </tr>
        </table>
    </td>
</tr>


</table>

</td>
</tr>


<tr>
    <td colspan="2">
        <div class="separate"><!-- --></div>
    </td>
</tr>

<tr>
    <td style="text-align: left" class="title">
        <h:outputText
                value="#{msg.get('app.credit.facility.propose.label.proposed.credit')}"/>
    </td>
</tr>

<tr>
    <td style="text-align: left" class="title">
        <h:outputText
                value="#{msg.get('app.credit.facility.propose.label.proposedPurposed.caption')}"/>
    </td>
</tr>

<tr>
    <td>
        <table class="table_noborder" style="width: 100%">
            <tr>
                <td colspan="2">
                    <p:selectOneRadio value="">
                        <f:selectItem itemLabel="Normal" itemValue="1"/>
                        <f:selectItem itemLabel="Prime" itemValue="0"/>
                    </p:selectOneRadio>
                </td>
            </tr>
            <tr>
                <td style="text-align: left;width:400px;" class="title">
                    <h:outputText
                            value="#{msg.get('app.credit.facility.propose.label.proposed.credit.type')}"/>
                </td>
                <td>
                    <p:selectOneMenu id="creditRequest"
                                     value="#{creditFacPropose.creditRequestTypeSelected}"
                                     size="1"
                                     style="width: 200px;"
                                     required="true">
                        <f:selectItem itemLabel="#{msg.get('app.select.item0')}" itemValue=""/>
                        <f:selectItems value="#{creditFacPropose.creditRequestTypeList}"
                                       var="creditRequestType"
                                       itemLabel="#{creditRequestType.description}"
                                       itemValue="#{creditRequestType.code}"/>

                    </p:selectOneMenu>
                </td>
            </tr>
            <tr>
                <td style="text-align: left" class="title">
                    <h:outputText
                            value="#{msg.get('app.credit.facility.propose.label.investedCountry')}"/>
                </td>
                <td>
                    <p:selectOneMenu id="countryItem"
                                     value="#{creditFacPropose.countrySelected}"
                                     size="1"
                                     style="width: 200px;"
                                     required="true">
                        <f:selectItem itemLabel="#{msg.get('app.select.item0')}" itemValue=""/>
                        <f:selectItems value="#{creditFacPropose.countryList}"
                                       var="country"
                                       itemLabel="#{country.name}"
                                       itemValue="#{country.code}"/>

                    </p:selectOneMenu>
                </td>
            </tr>
            <tr>
                <td style="text-align: left" class="title">
                    <h:outputText
                            value="#{msg.get('app.credit.facility.propose.label.existingSMELimit')}"/>
                </td>
                <td style="text-align: left">
                    <p:inputText styleClass="medium"
                                 value="#{creditFacPropose.creditFacProposeView.existingSMELimit}"
                                 style="text-align: right;">
                        <f:convertNumber pattern="#,##0"
                                         minFractionDigits="2"
                                         maxFractionDigits="2"
                                         maxIntegerDigits="14"/>
                        <p:ajax event="blur" update="@this"/>
                    </p:inputText>
                    <p:spacer width="5px;"/>
                    <h:outputText
                            value="#{msg.get('app.credit.facility.propose.label.maximumExistingSMELimit')}"/>
                    <p:spacer width="5px;"/>
                    <p:inputText styleClass="medium"
                                 value="#{creditFacPropose.creditFacProposeView.maximumExistingSMELimit}"
                                 style="text-align: right;">
                        <f:convertNumber pattern="#,##0"
                                         minFractionDigits="2"
                                         maxFractionDigits="2"
                                         maxIntegerDigits="14"/>
                        <p:ajax event="blur" update="@this"/>
                    </p:inputText>
                </td>
            </tr>
        </table>
    </td>
</tr>

<tr>
    <td class="left">
        <p:commandButton
                id="btnAddCreditInfo"
                value="#{msg.get('app.addButton')}"
                styleClass="smaller"
                process="@this"
                actionListener="#{creditFacPropose.onAddCreditInfo}"
                update=":creditInfoDlgForm"
                oncomplete="creditInfoDlg.show();">
            <p:resetInput target=":creditInfoDlgForm"/>
        </p:commandButton>
        <p:commandButton value="#{msg.get('app.credit.facility.propose.button.retrieveProposeCreditButton')}"
                         styleClass="medium"
                         style="width:200px"
                         process="@form"
                         update=":frmMain"
                         action="#{creditFacPropose.onCallRetrieveProposeCreditInfo}"/>
    </td>
</tr>

<tr>
<td style="background-color:#ffffff">

<table class="table_content"  id="proposeCreditTable" style="width:100%">

<thead>
<tr>
    <th class="ui-state-default"></th>
    <th class="ui-state-default">#{msg.get('app.credit.facility.propose.tb.label.productProgram')}</th>
    <th class="ui-state-default">#{msg.get('app.credit.facility.propose.tb.label.creditType')}</th>
    <th class="ui-state-default">#{msg.get('app.credit.facility.propose.tb.label.productCode')}</th>
    <th class="ui-state-default">#{msg.get('app.credit.facility.propose.tb.label.limit')}</th>
    <th class="ui-state-default">#{msg.get('app.credit.facility.propose.tb.label.standardPrice')}</th>
    <th class="ui-state-default">#{msg.get('app.credit.facility.propose.tb.label.suggestPrice')}</th>
    <th class="ui-state-default">#{msg.get('app.credit.facility.propose.tb.label.finalPrice')}</th>
    <th class="ui-state-default">#{msg.get('app.credit.facility.propose.tb.label.installment')}</th>
    <th class="ui-state-default">#{msg.get('app.credit.facility.propose.tb.label.tenor')}</th>
    <th class="ui-state-default">#{msg.get('app.credit.facility.propose.tb.label.frontEndFee')}</th>
    <th class="ui-state-default"></th>
</tr>
</thead>

<tbody class="ui-datatable-data ui-widget-content">
<ui:repeat value="#{creditFacPropose.creditFacProposeView.proposeCreditDetailViewList}"
           var="proposeCredit" varStatus="i" >
    <tr>
        <td class="top" style="#{i.odd ? 'background-color:#e6e6e6' : ''}"
            rowspan="#{not empty proposeCredit.creditTierDetailViewList and fn:length(proposeCredit.creditTierDetailViewList) gt 0 ?
                                                                fn:length(proposeCredit.creditTierDetailViewList) + 1 : '2'}">
            #{i.index + 1}
        </td>
        <td class="top" style="#{i.odd ? 'background-color:#e6e6e6' : ''}"
            rowspan="#{not empty proposeCredit.creditTierDetailViewList and fn:length(proposeCredit.creditTierDetailViewList) gt 0 ?
                                                                fn:length(proposeCredit.creditTierDetailViewList) : '1'}">
            #{proposeCredit.productProgram.name}
        </td>
        <td class="top" style="#{i.odd ? 'background-color:#e6e6e6' : ''}"
            rowspan="#{not empty proposeCredit.creditTierDetailViewList and fn:length(proposeCredit.creditTierDetailViewList) gt 0 ?
                                                                fn:length(proposeCredit.creditTierDetailViewList) : '1'}">
            #{proposeCredit.creditType.name}
        </td>
        <td class="top" style="#{i.odd ? 'background-color:#e6e6e6' : ''}"
            rowspan="#{not empty proposeCredit.creditTierDetailViewList and fn:length(proposeCredit.creditTierDetailViewList) gt 0 ?
                                                                fn:length(proposeCredit.creditTierDetailViewList) : '1'}">
            <h:outputText value="#{msg.get('app.credit.facility.propose.dlg.label.product')}  #{proposeCredit.productCode}"/><br/>
            <h:outputText value=" #{msg.get('app.credit.facility.propose.dlg.label.project')}  #{proposeCredit.projectCode}"/>
        </td>
        <td class="right top" style="#{i.odd ? 'background-color:#e6e6e6' : ''}"
            rowspan="#{not empty proposeCredit.creditTierDetailViewList and fn:length(proposeCredit.creditTierDetailViewList) gt 0 ?
                                                                fn:length(proposeCredit.creditTierDetailViewList) : '1'}">
            <h:outputText value="#{proposeCredit.limit}">
                <f:convertNumber pattern="#,##0.##" minFractionDigits="2" maxFractionDigits="2"
                                 maxIntegerDigits="14"/>
            </h:outputText>
        </td>
        <!-- BEGIN: Credit Tier Detail [0] -->
        <td class="left top" style="#{i.odd ? 'background-color:#e6e6e6' : ''}">
            <h:outputText value="#{not empty proposeCredit.creditTierDetailViewList and fn:length(proposeCredit.creditTierDetailViewList) gt 0 ?
                                                                            proposeCredit.creditTierDetailViewList[0].standardPrice : ''}">
                <f:convertNumber pattern="#,##0.##" minFractionDigits="2" maxFractionDigits="2" maxIntegerDigits="14"/>
            </h:outputText>
        </td>
        <td class="left top" style="#{i.odd ? 'background-color:#e6e6e6' : ''}">
            <h:outputText value="#{not empty proposeCredit.creditTierDetailViewList and fn:length(proposeCredit.creditTierDetailViewList) gt 0 ?
                                                                            proposeCredit.creditTierDetailViewList[0].suggestPrice : ''}">
                <f:convertNumber pattern="#,##0.##" minFractionDigits="2" maxFractionDigits="2" maxIntegerDigits="14"/>
            </h:outputText>
        </td>
        <td class="left top" style="#{i.odd ? 'background-color:#e6e6e6' : ''}">
            <h:outputText value="#{not empty proposeCredit.creditTierDetailViewList and fn:length(proposeCredit.creditTierDetailViewList) gt 0 ?
                                                                            proposeCredit.creditTierDetailViewList[0].finalPriceRate : ''}">
                <f:convertNumber pattern="#,##0.##" minFractionDigits="2" maxFractionDigits="2" maxIntegerDigits="14"/>
            </h:outputText>
        </td>
        <td class="right top" style="#{i.odd ? 'background-color:#e6e6e6' : ''}">
            <h:outputText value="#{not empty proposeCredit.creditTierDetailViewList and fn:length(proposeCredit.creditTierDetailViewList) gt 0 ?
                                                                            proposeCredit.creditTierDetailViewList[0].installment : ''}">
                <f:convertNumber pattern="#,##0.##" minFractionDigits="2" maxFractionDigits="2" maxIntegerDigits="14"/>
            </h:outputText>
        </td>
        <td class="center top" style="#{i.odd ? 'background-color:#e6e6e6' : ''}">
            <h:outputText value="#{not empty proposeCredit.creditTierDetailViewList and fn:length(proposeCredit.creditTierDetailViewList) gt 0 ?
                                                                            proposeCredit.creditTierDetailViewList[0].tenor : ''}">
                <f:convertNumber pattern="#,##0" maxIntegerDigits="14"/>
            </h:outputText>
        </td>
        <!-- END: Credit Tier Detail [0] -->

        <td class="right top" style="#{i.odd ? 'background-color:#e6e6e6' : ''}"
            rowspan="#{not empty proposeCredit.creditTierDetailViewList and fn:length(proposeCredit.creditTierDetailViewList) gt 0 ?
                                                            fn:length(proposeCredit.creditTierDetailViewList) : '1'}">
            <h:outputText value="#{proposeCredit.frontEndFee}">
                <f:convertNumber pattern="#,##0.##" minFractionDigits="2" maxFractionDigits="2"
                                 maxIntegerDigits="14"/>
            </h:outputText>
        </td>

        <td class="right top" style="#{i.odd ? 'background-color:#e6e6e6' : ''}"
            rowspan="#{not empty proposeCredit.creditTierDetailViewList and fn:length(proposeCredit.creditTierDetailViewList) gt 0 ?
                                                            fn:length(proposeCredit.creditTierDetailViewList) : '1'}">
            <p:commandButton icon="ui-icon-pencil"
                             action="#{creditFacPropose.onEditCreditInfo()}"
                             process="@this"
                             update=":creditInfoDlgForm"
                             oncomplete="creditInfoDlg.show();">
                <f:setPropertyActionListener value="#{proposeCredit}"
                                             target="#{creditFacPropose.proposeCreditDetailSelected}"/>
                <f:setPropertyActionListener value="#{i.index}"
                                             target="#{creditFacPropose.rowIndex}"/>
            </p:commandButton>
            <p:commandButton icon="ui-icon-trash"
                             process="@this"
                             onsuccess="confirmDeleteCreditInfoDlg.show();">
                <f:setPropertyActionListener value="#{proposeCredit}"
                                             target="#{creditFacPropose.proposeCreditDetailSelected}"/>
            </p:commandButton>
        </td>
    </tr>

    <!-- BEGIN: Credit Tier Detail [1]->[N-1] -->
    <ui:repeat value="#{proposeCredit.creditTierDetailViewList}" var="creditTierDetail" varStatus="j" offset="1">
        <tr>
            <td class="left top" style="#{i.odd ? 'background-color:#e6e6e6' : ''}">
                <h:outputText value="#{creditTierDetail.standardPrice}">
                    <f:convertNumber pattern="#,##0.##" minFractionDigits="2" maxFractionDigits="2" maxIntegerDigits="14"/>
                </h:outputText>
            </td>
            <td class="left top" style="#{i.odd ? 'background-color:#e6e6e6' : ''}">
                <h:outputText value="#{creditTierDetail.suggestPrice}">
                    <f:convertNumber pattern="#,##0.##" minFractionDigits="2" maxFractionDigits="2" maxIntegerDigits="14"/>
                </h:outputText>
            </td>
            <td class="left top" style="#{i.odd ? 'background-color:#e6e6e6' : ''}">
                <h:outputText value="#{creditTierDetail.finalPriceRate}">
                    <f:convertNumber pattern="#,##0.##" minFractionDigits="2" maxFractionDigits="2" maxIntegerDigits="14"/>
                </h:outputText>
            </td>
            <td class="right top" style="#{i.odd ? 'background-color:#e6e6e6' : ''}">
                <h:outputText value="#{creditTierDetail.installment}">
                    <f:convertNumber pattern="#,##0.##" minFractionDigits="2" maxFractionDigits="2" maxIntegerDigits="14"/>
                </h:outputText>
            </td>
            <td class="center top" style="#{i.odd ? 'background-color:#e6e6e6' : ''}">
                <h:outputText value="#{creditTierDetail.tenor}">
                    <f:convertNumber pattern="#,##0" maxIntegerDigits="14"/>
                </h:outputText>
            </td>
        </tr>
    </ui:repeat>
    <!-- END: Credit Tier Detail [1]->[N-1] -->

    <tr>
        <td colspan="12" style="#{i.odd ? 'background-color:#e6e6e6' : ''}">
            <table class="table_noborder" >
                <tr>
                    <td class="title">#{msg.get('app.decision.tb.td.label.requestType')}</td>
                    <td>#{proposeCredit.requestType == 0 ? 'New' : 'Change'}</td>
                    <td class="title">#{msg.get('app.decision.tb.td.label.refinance')}</td>
                    <td>#{proposeCredit.refinance == 0 ? 'No' : 'Yes'}</td>
                </tr>
                <tr>
                    <td class="title">#{msg.get('app.decision.tb.td.label.purpose')}</td>
                    <td colspan="3"> </td>
                </tr>
                <tr>
                    <td class="title">#{msg.get('app.decision.tb.td.label.purposeDetail')}</td>
                    <td colspan="3">#{proposeCredit.remark}</td>
                </tr>
                <tr>
                    <td class="title">#{msg.get('app.decision.tb.td.label.disbursement')}</td>
                    <td>#{proposeCredit.disbursement.disbursement}</td>
                    <td class="title">#{msg.get('app.decision.tb.td.label.holdAmount')}</td>
                    <td><h:outputText value="#{proposeCredit.holdLimitAmount}">
                        <f:convertNumber pattern="#,##0.##" minFractionDigits="2" maxFractionDigits="2"
                                         maxIntegerDigits="14"/>
                    </h:outputText>
                    </td>
                </tr>
            </table>
        </td>
    </tr>

</ui:repeat>

<h:panelGroup rendered="#{empty creditFacPropose.creditFacProposeView.proposeCreditDetailViewList}">
    <tr>
        <td colspan="12">No records found.</td>
    </tr>
</h:panelGroup>
</tbody>

</table>

</td>
</tr>

<tr>
    <td  style="background-color:#ffffff">
        <table class="table_content" style="width:100%">
            <tr>
                <td style="text-align: left;width:300px;background-color:#f4f8b6;" class="title">
                    <h:outputText
                            value="#{msg.get('app.credit.facility.propose.tb.label.totalPropose')}"/>
                </td>
                <td style="text-align: left;width:300px;background-color:#f4f8b6;">
                    <h:outputText value="#{creditFacPropose.creditFacProposeView.totalPropose}"
                                  style="text-align: right;">
                        <f:convertNumber pattern="#,##0"
                                         minFractionDigits="2"
                                         maxFractionDigits="2"
                                         maxIntegerDigits="14"/>
                    </h:outputText>
                </td>
            </tr>
        </table>
    </td>
</tr>
<tr>
    <td>
        <table class="table_content" style="width:100%">
            <tr>
                <td colspan="2" style="text-align: left;" class="title">
                    <h:outputText
                            value="#{msg.get('app.credit.facility.propose.tb.caption.borrower')}"/>
                </td>
            </tr>

            <tr>
                <td style="text-align: left;width:300px;background-color:#f4f8b6;" class="title">
                    <h:outputText
                            value="#{msg.get('app.credit.facility.propose.tb.label.totalCommercial')}"/>
                </td>
                <td style="text-align: left;width:300px;background-color:#f4f8b6;">
                    <h:outputText value="#{creditFacPropose.creditFacProposeView.totalCommercial}"
                                  style="text-align: right;">
                        <f:convertNumber pattern="#,##0"
                                         minFractionDigits="2"
                                         maxFractionDigits="2"
                                         maxIntegerDigits="14"/>
                    </h:outputText>
                </td>
            </tr>

            <tr>
                <td style="text-align: left;width:300px;background-color:#f4f8b6;" class="title">
                    <h:outputText
                            value="#{msg.get('app.credit.facility.propose.tb.label.totalCommercialAndOBOD')}"/>
                </td>
                <td style="text-align: left;background-color:#f4f8b6; ">
                    <h:outputText value="#{creditFacPropose.creditFacProposeView.totalCommercialAndOBOD}"
                                  style="text-align: right;">
                        <f:convertNumber pattern="#,##0"
                                         minFractionDigits="2"
                                         maxFractionDigits="2"
                                         maxIntegerDigits="14"/>
                    </h:outputText>
                </td>
            </tr>

            <tr>
                <td style="text-align: left;width:300px;background-color:#f4f8b6;" class="title">
                    <h:outputText
                            value="#{msg.get('app.credit.facility.propose.tb.label.totalExposure')}"/>
                </td>
                <td style="text-align: left;background-color:#f4f8b6;">
                    <h:outputText value="#{creditFacPropose.creditFacProposeView.totalExposure}"
                                  style="text-align: right;">
                        <f:convertNumber pattern="#,##0"
                                         minFractionDigits="2"
                                         maxFractionDigits="2"
                                         maxIntegerDigits="14"/>
                    </h:outputText>
                </td>
            </tr>
        </table>

    </td>
</tr>

<tr>
    <td colspan="2">
        <div class="separate"><!-- --></div>
    </td>
</tr>

<tr>
    <td style="text-align: left" class="title">
        <h:outputText
                value="#{msg.get('app.credit.facility.propose.tradeFinanceHeader')}"/>
    </td>
</tr>

<tr>

    <td>

        <table class="table_content" style="width:100%">

            <tr>
                <td style="text-align: left" class="title">
                    <h:outputText value="#{msg.get('app.credit.facility.propose.label.trade.contactName')}"/>
                </td>
                <td>
                    <p:inputText styleClass="large"
                                 value="#{creditFacPropose.creditFacProposeView.contactName}"></p:inputText>
                    <p:spacer width="5px;"/>
                    <h:outputText value="#{msg.get('app.credit.facility.propose.label.trade.contactPhoneNo')}"/>
                    <p:spacer width="5px;"/>
                    <p:inputText styleClass="large"
                                 value="#{creditFacPropose.creditFacProposeView.contactPhoneNo}"></p:inputText>
                    <p:spacer width="5px;"/>
                    <h:outputText value="#{msg.get('app.credit.facility.propose.label.trade.interService')}"/>
                    <p:spacer width="5px;"/>
                    <p:inputText styleClass="large"
                                 value="#{creditFacPropose.creditFacProposeView.interService}"></p:inputText>
                </td>
            </tr>

            <tr>
                <td style="text-align: left" class="title">
                    <h:outputText value="#{msg.get('app.credit.facility.propose.label.trade.currentAddress')}"/>
                </td>
                <td>
                    <p:inputText styleClass="large" value="#{creditFacPropose.creditFacProposeView.currentAddress}"
                                 style="width:200px;">
                    </p:inputText>
                </td>
            </tr>

            <tr>
                <td style="text-align: left" class="title">
                    <h:outputText value="#{msg.get('app.credit.facility.propose.label.trade.registerredAddress')}"/>
                </td>
                <td>
                    <p:inputText styleClass="large" value="#{creditFacPropose.creditFacProposeView.registeredAddress}"
                                 style="width:200px;">
                    </p:inputText>
                </td>
            </tr>

            <tr>
                <td style="text-align: left" class="title">
                    <h:outputText value="#{msg.get('app.credit.facility.propose.label.trade.emailAddress')}"/>
                </td>
                <td>
                    <h:outputText value="#{msg.get('app.credit.facility.propose.label.trade.import')}"/>
                    <p:spacer width="5px;"/>
                    <p:inputText styleClass="large"
                                 value="#{creditFacPropose.creditFacProposeView.importMail}"></p:inputText>
                    <p:spacer width="5px;"/>
                    <h:outputText value="#{msg.get('app.credit.facility.propose.label.trade.export')}"/>
                    <p:spacer width="5px;"/>
                    <p:inputText styleClass="large"
                                 value="#{creditFacPropose.creditFacProposeView.exportMail}"></p:inputText>
                </td>
            </tr>

            <tr>
                <td style="text-align: left" class="title">
                    <h:outputText value="#{msg.get('app.credit.facility.propose.label.trade.depositBranchCode')}"/>
                </td>
                <td>
                    <p:inputText styleClass="large" value="#{creditFacPropose.creditFacProposeView.depositBranchCode}"
                                 style="width:200px;">
                    </p:inputText>
                </td>
            </tr>

            <tr>
                <td style="text-align: left" class="title">
                    <h:outputText value="#{msg.get('app.credit.facility.propose.label.trade.ownerBranchCode')}"/>
                </td>
                <td>
                    <p:inputText styleClass="large" value="#{creditFacPropose.creditFacProposeView.ownerBranchCode}"
                                 style="width:200px;">
                    </p:inputText>
                </td>
            </tr>

        </table>
    </td>
</tr>


<tr>
    <td colspan="2">
        <div class="separate"><!-- --></div>
    </td>
</tr>

<tr>
    <td colspan="2" style="text-align: left" class="title">
        <h:outputText value="#{msg.get('app.credit.facility.propose.caption.priceFeeReduction')}"/>
    </td>
</tr>

<tr>
    <td>
        <table class="table_content" style="width: 100%">
            <tr>
                <td style="width: 300px;text-align: left" class="title">
                    <h:outputText
                            value="#{msg.get('app.credit.facility.propose.label.intFeeDOA')}"/>
                </td>
                <td style="width: 70px;text-align: left">

                    <p:inputText styleClass="small"
                                 value="#{creditFacPropose.creditFacProposeView.intFeeDOA}"
                                 style="text-align: right;">
                        <p:ajax event="blur" update="@this"/>
                    </p:inputText> %
                </td>
                <td style="width: 300px;text-align: left" class="title">
                    <h:outputText
                            value="#{msg.get('app.credit.facility.propose.label.frontendFeeDOA')}"/>
                </td>
                <td style="width: 70px;text-align: left">

                    <p:inputText styleClass="small"
                                 value="#{creditFacPropose.creditFacProposeView.frontendFeeDOA}"
                                 style="text-align: right;">
                        <p:ajax event="blur" update="@this"/>
                    </p:inputText> %
                </td>
                <td style="width: 130px;text-align: left" class="title">
                    <h:outputText
                            value="#{msg.get('app.credit.facility.propose.label.guarantorBA')}"/>
                </td>
                <td style="width: 70px;text-align: left">

                    <p:inputText styleClass="small"
                                 value="#{creditFacPropose.creditFacProposeView.guarantorBA}"
                                 style="text-align: right;">
                         <f:convertNumber pattern="#,##0"
                                          minFractionDigits="2"
                                          maxFractionDigits="2"
                                          maxIntegerDigits="14"/>
                        <p:ajax event="blur" update="@this"/>
                    </p:inputText>
                </td>
            </tr>
            <tr>
                <td style="text-align: left" class="title">
                    <h:outputText
                            value="#{msg.get('app.credit.facility.propose.label.reasonForReduction')}"/>
                </td>
                <td style="text-align: left" colspan="5">
                    <p:inputTextarea cols="160"
                                     rows="4"
                                     value="#{creditFacPropose.creditFacProposeView.reasonForReduction}"/>
                </td>
            </tr>
        </table>
    </td>
</tr>

<tr>
    <td>

        <table class="content_table_form">
            <tr>
                <td colspan="2">
                    <p:dataTable id="tradeTable"
                                 var="tradeTableItem"
                                 value="#{creditFacPropose.creditFacProposeView.proposeFeeDetailViewList}"
                                 rowKey="#{tradeTableItem.ProposeFeeDetailView}"
                                 rowIndexVar="rowIndex"
                                 style="width: 100%">

                        <p:columnGroup type="header">
                            <p:row>
                                <p:column style="width:200px;"
                                          headerText="#{msg.get('app.credit.facility.propose.tb.label.fee.productProgram')}"/>
                                <p:column style="width:200px;"
                                          headerText="#{msg.get('app.credit.facility.propose.tb.label.fee.standardFrontEndFee')}"/>
                                <p:column style="width:500px;"
                                          headerText="#{msg.get('app.credit.facility.propose.tb.label.fee.commitmentFee')}"/>
                                <p:column style="width:500px;"
                                          headerText="#{msg.get('app.credit.facility.propose.tb.label.fee.extensionFee')}"/>
                                <p:column style="width:200px;"
                                          headerText="#{msg.get('app.credit.facility.propose.tb.label.fee.prepaymentFee')}"/>
                                <p:column style="width:200px;"
                                          headerText="#{msg.get('app.credit.facility.propose.tb.label.fee.cancellationFee')}"/>

                            </p:row>

                        </p:columnGroup>

                        <p:column styleClass="center">
                            <h:outputText value="#{tradeTableItem.productProgram}"/>
                        </p:column>

                        <p:column styleClass="center">
                            <h:outputText value="#{tradeTableItem.standardFrontEndFee}"/>
                        </p:column>

                        <p:column styleClass="center">
                            <h:outputText value="#{tradeTableItem.commitmentFee}"/>
                        </p:column>

                        <p:column styleClass="center">
                            <h:outputText value="#{tradeTableItem.extensionFee}"/>
                        </p:column>

                        <p:column styleClass="center">
                            <h:outputText value="#{tradeTableItem.prepaymentFee}"/>
                        </p:column>

                        <p:column styleClass="center">
                            <h:outputText value="#{tradeTableItem.cancellationFee}"/>
                        </p:column>
                    </p:dataTable>
                </td>
            </tr>
        </table>

    </td>
</tr>


<tr>
    <td colspan="2">
        <div class="separate"><!-- --></div>
    </td>
</tr>

<tr>
    <td colspan="2" style="text-align: left" class="title">
        <h:outputText value="#{msg.get('app.credit.facility.propose.caption.propose.collateral')}"/>
    </td>
</tr>

<tr>
    <td colspan="2" style="text-align: left">
        <h:outputText value="#{msg.get('app.credit.facility.propose.desc.propose.collateral')}"/>
    </td>
</tr>


<tr>
    <td colspan="2" style="text-align: left">
        <p:commandButton
                id="btnAddCollateralInfo"
                value="#{msg.get('app.addButton')}"
                styleClass="smaller"
                process="@this"
                actionListener="#{creditFacPropose.onAddProposeCollInfo}"
                update=":collateralDlgForm"
                oncomplete="collateralInfoDlg.show();">
            <p:resetInput target=":collateralDlgForm"/>
        </p:commandButton>
    </td>
</tr>


<tr>
    <td colspan="2">
        <div class="separate"><!-- --></div>
    </td>
</tr>

<tr>
<td colspan="2">
<table style="width:100%">
<tr>
    <td class="title" style="width:150px;text-align: left">
        <p:outputLabel value="#{msg.get('app.credit.facility.propose.label.collateral.jobID')}"/>
    </td>
    <td style="width:150px;text-align: left">
        <h:outputText id="jobID" value="#{creditFacPropose.proposeCollateralInfoView.jobID}"/>
    </td>
    <td colspan="2" style="text-align:right;">
        <p:commandButton value="Edit"
                         action="#{creditFacPropose.onEditProposeCollInfo()}"
                         update=":collateralDlgForm"
                         process=":frmMain"
                         oncomplete="collateralInfoDlg.show();">
            <f:setPropertyActionListener value="#{creditFacPropose.proposeCollateralInfoView}"
                                         target="#{creditFacPropose.selectCollateralDetailView}"/>
        </p:commandButton>
        <p:commandButton value="Remove" process="@this"
                         oncomplete="confirmDeleteCollateralInfoDlg.show()">
            <f:setPropertyActionListener value="#{creditFacPropose.proposeCollateralInfoView}"
                                         target="#{creditFacPropose.selectCollateralDetailView}"/>
        </p:commandButton>
    </td>
</tr>

<tr>
    <td class="title">
        <p:outputLabel value="#{msg.get('app.credit.facility.propose.label.collateral.appraisalDate')}"/>
    </td>
    <td colspan="3" style="text-align: left">
        <h:outputText value="#{creditFacPropose.proposeCollateralInfoView.appraisalDate}">
            <f:convertDateTime pattern="dd/MM/yyyy" locale="th_TH"/>
        </h:outputText>
    </td>
</tr>
<tr>
    <td class="title">
        <p:outputLabel value="#{msg.get('app.credit.facility.propose.label.collateral.AADDecision')}"/>
    </td>
    <td colspan="3" style="text-align: left">
        <h:outputText value="#{creditFacPropose.proposeCollateralInfoView.aadDecision}"/>
    </td>
</tr>
<tr>
    <td class="title">
        <p:outputLabel value="#{msg.get('app.credit.facility.propose.label.collateral.AADDecisionReason')}"/>
    </td>
    <td>
        <h:outputText value="#{creditFacPropose.proposeCollateralInfoView.aadDecisionReason}"/>
    </td>
    <td class="title">
        <p:outputLabel
                value="#{msg.get('app.credit.facility.propose.label.collateral.AADDecisionReasonDetail')}"/>
    </td>
    <td>
        <h:outputText value="#{creditFacPropose.proposeCollateralInfoView.aadDecisionReasonDetail}"/>
    </td>
</tr>
<tr>
    <td class="title">
        <p:outputLabel value="#{msg.get('app.credit.facility.propose.label.collateral.mortgageCondition')}"/>
    </td>
    <td>
        <h:outputText value="#{creditFacPropose.proposeCollateralInfoView.mortgageCondition}"/>
    </td>
    <td class="title">
        <p:outputLabel
                value="#{msg.get('app.credit.facility.propose.label.collateral.mortgageConditionDetail')}"/>
    </td>
    <td>
        <h:outputText value="#{creditFacPropose.proposeCollateralInfoView.mortgageConditionDetail}"/>
    </td>
</tr>
<tr>
    <td class="title">
        <p:outputLabel
                value="#{msg.get('app.credit.facility.propose.label.collateral.creditType.caption')}"/>
    </td>
    <td colspan="3">
        <p:dataTable value="#{creditFacPropose.proposeCollateralInfoView.creditTypeDetailViewList}"
                     var="creditTypeDetailItem"
                     rowKey="#{creditTypeDetailItem.CreditTypeDetailView}"
                     rowIndexVar="rowIndex">
            <p:columnGroup type="header">
                <p:row>
                    <p:column style="width:20px;"/>
                    <p:column style="width:150px;"
                              headerText="#{msg.get('app.credit.facility.propose.label.collateral.account')}"/>
                    <p:column style="width:200px;"
                              headerText="#{msg.get('app.credit.facility.propose.label.collateral.requestCreditType')}"/>
                    <p:column style="width:200px;"
                              headerText="#{msg.get('app.credit.facility.propose.label.collateral.productProgram')}"/>
                    <p:column style="width:200px;"
                              headerText="#{msg.get('app.credit.facility.propose.label.collateral.creditFacility')}"/>
                    <p:column style="width:150px;"
                              headerText="#{msg.get('app.credit.facility.propose.label.collateral.limit')}"/>
                </p:row>

            </p:columnGroup>

            <p:column styleClass="center">
                <h:outputText value="#{rowIndex+1}"/>
            </p:column>

            <p:column styleClass="center">
                <h:outputText value="#{creditTypeDetailItem.account}"/>
            </p:column>

            <p:column styleClass="center">
                <h:outputText value="#{creditTypeDetailItem.type}"/>
            </p:column>

            <p:column styleClass="center">
                <h:outputText value="#{creditTypeDetailItem.productProgram}"/>
            </p:column>

            <p:column styleClass="center">
                <h:outputText value="#{creditTypeDetailItem.creditFacility}"/>
            </p:column>

            <p:column styleClass="center">
                <h:outputText value="#{creditTypeDetailItem.limit}">
                    <f:convertNumber pattern="#,##0" minFractionDigits="2" maxFractionDigits="2"/>
                </h:outputText>
            </p:column>

        </p:dataTable>
    </td>
</tr>

<tr>
    <td class="title">
        <p:outputLabel value="#{msg.get('app.credit.facility.propose.label.collateral.BDMComments')}"/>
    </td>
    <td colspan="3">
        <h:outputText value="#{creditFacPropose.proposeCollateralInfoView.bdmComments}"/>
    </td>
</tr>
<tr>
    <td colspan="4">
        <div class="separate"></div>
    </td>
</tr>
<ui:repeat value="#{creditFacPropose.proposeCollateralInfoView.collateralHeaderDetailViewList}"
           var="collateralHeaderDetailView">
    <tr>
        <td class="title" style="width: 150px;">
            <p:outputLabel
                    value="#{msg.get('app.credit.facility.propose.label.headcoll.potential')}"/>
        </td>
        <td>
            <h:outputText value="#{collateralHeaderDetailView.potentialCollateral.description}"/>
        </td>
    </tr>
    <tr>
        <td class="title" style="width: 150px;">
            <p:outputLabel
                    value="#{msg.get('app.credit.facility.propose.label.headcoll.collTypePercentLTV')}"/>
        </td>
        <td>

        </td>
    </tr>
    <tr>
        <td class="title" style="width: 150px;">
            <p:outputLabel
                    value="#{msg.get('app.credit.facility.propose.label.headcoll.existingCredit')}"/>
        </td>
        <td>
            <h:outputText value="#{collateralHeaderDetailView.existingCredit}"/>
        </td>
    </tr>
    <tr>
        <td class="title" style="width: 150px;">
            <p:outputLabel
                    value="#{msg.get('app.credit.facility.propose.label.headcoll.titleDeed')}"/>
        </td>
        <td>
            <h:outputText value="#{collateralHeaderDetailView.titleDeed}"/>
        </td>
    </tr>
    <tr>
        <td class="title" style="width: 150px;">
            <p:outputLabel
                    value="#{msg.get('app.credit.facility.propose.label.headcoll.collateralLocation')}"/>
        </td>
        <td>
            <h:outputText value="#{collateralHeaderDetailView.collateralLocation}"/>
        </td>
    </tr>
    <tr>
        <td class="title" style="width: 150px;">
            <p:outputLabel
                    value="#{msg.get('app.credit.facility.propose.label.headcoll.appraisalValue')}"/>
        </td>
        <td>
            <h:outputText value="#{collateralHeaderDetailView.appraisalValue}">
                <f:convertNumber pattern="#,##0" minFractionDigits="2" maxFractionDigits="2"/>
            </h:outputText>
        </td>
    </tr>
    <tr>
        <td class="title" style="width: 150px;">
            <p:outputLabel
                    value="#{msg.get('app.credit.facility.propose.label.headcoll.headCollType')}"/>
        </td>
        <td>

        </td>
    </tr>
    <tr>
        <td class="title" style="width: 150px;">
            <p:outputLabel
                    value="#{msg.get('app.credit.facility.propose.label.headcoll.insuranceCompany')}"/>
        </td>
        <td>
            <p:selectOneRadio value="#{collateralHeaderDetailView.insuranceCompany}">
                <f:selectItem itemLabel="Partner" itemValue="1"/>
                <f:selectItem itemLabel="Non Partner" itemValue="0"/>
            </p:selectOneRadio>
        </td>
    </tr>
    <tr>
        <td colspan="4">
            <p:dataTable tableStyleClass="center"
                         id="subCollateralDetailViewTable"
                         var="subCollateralDetailView"
                         value="#{collateralHeaderDetailView.subCollateralDetailViewList}"
                         paginator="false"
                         rowKey="#{subCollateralDetailView.id}"
                         rowIndexVar="rowIndex">
                <p:columnGroup type="header">
                    <p:row>
                        <p:column/>
                        <p:column
                                headerText="#{msg.get('app.credit.facility.propose.label.subcoll.subcollTypeCaption')}"/>
                        <p:column headerText="#{msg.get('app.credit.facility.propose.label.subcoll.titleDeed')}"/>
                        <p:column
                                headerText="#{msg.get('app.credit.facility.propose.label.subcoll.collateralOwner.AAD')}"/>
                        <p:column
                                headerText="#{msg.get('app.credit.facility.propose.label.subcoll.collateralOwner.UW')} "/>
                        <p:column headerText="#{msg.get('app.credit.facility.propose.label.subcoll.mortgageType')} "/>
                        <p:column headerText="#{msg.get('app.credit.facility.propose.label.subcoll.relatedWith')} "/>
                        <p:column headerText="#{msg.get('app.credit.facility.propose.label.subcoll.appraisalValue')} "/>
                        <p:column headerText="#{msg.get('app.credit.facility.propose.label.subcoll.mortgageValue')} "/>
                        <p:column/>
                    </p:row>
                </p:columnGroup>
                <p:column styleClass="center">
                    <h:outputText value="#{subCollateralDetailView.no}"/>
                </p:column>
                <p:column styleClass="left">
                    <h:outputText value="#{subCollateralDetailView.subCollateralType.description}"/><br/>
                    <h:outputText value="#{subCollateralDetailView.address}"/><br/>
                    <h:outputText value="#{subCollateralDetailView.landOffice}"/>
                </p:column>
                <p:column styleClass="center" style="width:4%;">
                    <h:outputText value="#{subCollateralDetailView.titleDeed}"/>
                </p:column>
                <p:column styleClass="left">
                    <h:outputText value="#{subCollateralDetailView.collateralOwner}"/>
                </p:column>
                <p:column styleClass="left">
                    <h:outputText value="#{subCollateralDetailView.collateralOwner}"/>
                </p:column>
                <p:column styleClass="left">
                    <h:outputText value="#{subCollateralDetailView.mortgageType}"/>
                </p:column>
                <p:column styleClass="left">
                    <h:outputText value="#{subCollateralDetailView.relatedWith}"/>
                </p:column>
                <p:column styleClass="right">
                    <h:outputText value="#{subCollateralDetailView.appraisalValue}">
                        <f:convertNumber pattern="#,##0" minFractionDigits="2" maxFractionDigits="2"/>
                    </h:outputText>
                </p:column>
                <p:column styleClass="right">
                    <h:outputText value="#{subCollateralDetailView.mortgageValue}">
                        <f:convertNumber pattern="#,##0" minFractionDigits="2" maxFractionDigits="2"/>
                    </h:outputText>
                </p:column>
                <p:column styleClass="center"></p:column>
            </p:dataTable>
        </td>
    </tr>
    <tr>
        <td colspan="4">
            <p:spacer width="5px"/>
        </td>
    </tr>
    <tr>
        <td colspan="4">
            <div class="separate"></div>
        </td>
    </tr>
</ui:repeat>


</table>

</td>
</tr>


<tr>
    <td colspan="2">
        <div class="separate"><!-- --></div>
    </td>
</tr>

<tr class="title">
    <td>
        <h:outputText value="#{msg.get('app.credit.facility.propose.caption.proposedGuarantor')}"/>
    </td>
</tr>

<!-- Propose Guarantor Information-->

<tr>
    <td colspan="2">
        <p:commandButton
                id="addGuarantorButton"
                value="#{msg.get('app.credit.facility.propose.button.addGuarantorButton')}"
                styleClass="smaller"
                actionListener="#{creditFacPropose.onAddGuarantorInfo()}"
                process="@this"
                update=":guarantorDlgForm"
                oncomplete="guarantorInfoDlg.show();">
            <p:resetInput target=":guarantorDlgForm"/>
        </p:commandButton>

    </td>
</tr>


<tr>
    <td colspan="2">
        <table class="table_content" style="width:100%">

            <thead>
                <tr>
                    <th class="ui-state-default"></th>
                    <th class="ui-state-default">#{msg.get('app.credit.facility.propose.label.guarantor.guarantorName')}</th>
                    <th class="ui-state-default">#{msg.get('app.credit.facility.propose.label.guarantor.TCGLGNo')}</th>
                    <th class="ui-state-default">#{msg.get('app.credit.facility.propose.label.guarantor.creditType')}</th>
                    <th class="ui-state-default">#{msg.get('app.credit.facility.propose.label.guarantor.totalGuaranteeAmount')}</th>
                    <th class="ui-state-default"></th>
                </tr>
            </thead>

            <tbody class="ui-datatable-data ui-widget-content">

                <ui:repeat value="#{creditFacPropose.creditFacProposeView.proposeGuarantorDetailViewList}"
                           var="proposeGuarantorDetailView"  varStatus="g">
                    <tr>
                        <td class="center top" style="width: 50px;#{g.odd ? 'background-color:#e6e6e6' : ''}"  >
                            <h:outputText value="#{g.index+1}"/>
                        </td>

                        <td class="center top" style="width: 100px;#{g.odd ? 'background-color:#e6e6e6' : ''}">
                            <h:outputText value="#{proposeGuarantorDetailView.guarantorName}"/>
                        </td>

                        <td class="center top" style="width: 100px;#{g.odd ? 'background-color:#e6e6e6' : ''}">
                            <h:outputText value="#{proposeGuarantorDetailView.tcgLgNo}"/>
                        </td>

                        <td class="center top" style="width: 500px;#{g.odd ? 'background-color:#e6e6e6' : ''}">
                            <ui:repeat value="#{proposeGuarantorDetailView.creditTypeDetailViewList}"
                                       var="creditTypeDetail"  varStatus="c">
                                <table class="table_noborder">
                                     <tr>
                                         <td  style="width: 100px;" class="left top">
                                             <h:outputText value="#{creditTypeDetail.account}"/>
                                         </td>
                                         <td  style="width: 100px;" class="center top">
                                             <h:outputText value="#{creditTypeDetail.productProgram}"/><br/>
                                             <h:outputText value="#{creditTypeDetail.creditFacility}"/>
                                         </td>
                                         <td  style="width: 150px;" class="center top">
                                             <h:outputText value="#{creditTypeDetail.limit}">
                                                <f:convertNumber pattern="#,##0" minFractionDigits="2" maxFractionDigits="2"/>
                                             </h:outputText>
                                         </td>
                                         <td  style="width: 150px;" class="center top">
                                             <h:outputLabel value="#{msg.get('app.credit.facility.propose.label.guarantor.guaranteeAmount')}"/><br/>
                                             <h:outputText value="#{creditTypeDetail.guaranteeAmount}">
                                                 <f:convertNumber pattern="#,##0" minFractionDigits="2" maxFractionDigits="2"/>
                                             </h:outputText>
                                         </td>
                                     </tr>
                                </table>
                            </ui:repeat>
                        </td>
                        <td  class="right top" style="width: 100px;#{g.odd ? 'background-color:#e6e6e6' : ''}">
                            <h:outputText value="#{proposeGuarantorDetailView.guaranteeAmount}">
                                <f:convertNumber pattern="#,##0" minFractionDigits="2" maxFractionDigits="2"/>
                            </h:outputText>
                        </td>
                        <td  style="width: 50px;#{g.odd ? 'background-color:#e6e6e6' : ''}">
                            <p:commandButton icon="ui-icon-pencil"
                                             action="#{creditFacPropose.onEditGuarantorInfo()}"
                                             update=":guarantorDlgForm"
                                             process=":frmMain"
                                             oncomplete="guanrantorInfoDlg.show();">
                                <f:setPropertyActionListener value="#{proposeGuarantorDetailView}"
                                                             target="#{creditFacPropose.proposeGuarantorDetailViewItem}"/>
                                <f:setPropertyActionListener value="#{g.index}"
                                                             target="#{creditFacPropose.rowIndex}"/>
                            </p:commandButton>
                            <p:commandButton icon="ui-icon-trash"
                                             process="@this"
                                             oncomplete="confirmDeleteGuarantorInfoDlg.show()">
                                <f:setPropertyActionListener value="#{proposeGuarantorDetailView}"
                                                             target="#{creditFacPropose.proposeGuarantorDetailViewItem}"/>
                            </p:commandButton>
                        </td>

                    </tr>
                </ui:repeat>
                <h:panelGroup rendered="#{empty creditFacPropose.creditFacProposeView.proposeGuarantorDetailViewList}">
                    <tr>
                        <td colspan="6">No records found.</td>
                    </tr>
                </h:panelGroup>
                <tr>
                    <td colspan="4" class="title" style="background-color:#f4f8b6;">
                        <h:outputLabel value="#{msg.get('app.credit.facility.propose.label.guarantor.total')}"/>
                    </td>

                    <td  style="background-color:#f4f8b6;" class="right">
                        <h:outputText id="totalGuarantee" value="#{creditFacPropose.creditFacProposeView.totalGuaranteeAmount}"
                                      style="text-align:right">
                            <f:convertNumber pattern="#,##0" minFractionDigits="2" maxFractionDigits="2"/>
                        </h:outputText>
                    </td>
                    <td style="background-color:#f4f8b6;"></td>
                </tr>


             </tbody>
        </table>
    </td>
</tr>


<!-- Propose Guarantor Information-->
<tr>
    <td colspan="2">
        <div class="separate"><!-- --></div>
    </td>
</tr>


<tr class="title">
    <td colspan="2">
        <h:outputText value="#{msg.get('app.credit.facility.propose.caption.condition')}"/>
    </td>
</tr>

<tr>
    <td colspan="2">
        <p:commandButton
                id="addConditionButton"
                value="#{msg.get('app.credit.facility.propose.button.addConditionButton')}"
                styleClass="smaller"
                actionListener="#{creditFacPropose.onAddConditionInfo()}"
                process="@this"
                update=":conditionDlgForm"
                oncomplete="conditionDlg.show();">
            <p:resetInput target=":conditionDlgForm"/>
        </p:commandButton>
    </td>
</tr>


<tr>
    <td colspan="5">
        <p:dataTable
                id="conditionInfoDetailTable"
                var="conditionInfoItem"
                value="#{creditFacPropose.creditFacProposeView.proposeConditionDetailViewList}"
                paginator="false"
                rowKey="#{conditionInfoItem.ConditionInfoDetailView}"
                rowIndexVar="rowIndex"
                style="width:100%">

            <p:columnGroup type="header">
                <p:row>
                    <p:column style="width:20px;"/>
                    <p:column style="width:200px;"
                              headerText="#{msg.get('app.credit.facility.propose.label.condition.tb.loanType')}"/>
                    <p:column style="width:300px;"
                              headerText="#{msg.get('app.credit.facility.propose.label.condition.tb.conditionDesc')}"/>
                    <p:column style="width:30px;"/>
                </p:row>

            </p:columnGroup>

            <p:column styleClass="center">
                <h:outputText value="#{rowIndex+1}"/>
            </p:column>

            <p:column styleClass="center">
                <h:outputText value="#{conditionInfoItem.loanType}"/>
            </p:column>

            <p:column styleClass="center">
                <h:outputText value="#{conditionInfoItem.conditionDesc}"/>
            </p:column>

            <p:column styleClass="center">
                <p:commandButton title="Remove"
                                 icon="ui-icon-trash"
                                 process="@this"
                                 oncomplete="confirmDeleteConditionInfoDlg.show()">
                    <f:setPropertyActionListener value="#{conditionInfoItem}"
                                                 target="#{creditFacPropose.selectConditionItem}"/>
                </p:commandButton>
            </p:column>

        </p:dataTable>
    </td>
</tr>


<tr>
    <td colspan="2">
        <div class="separate"><!-- --></div>
    </td>
</tr>


<tr class="title">
    <td colspan="2" class="title">
        <h:outputText value="#{msg.get('app.credit.facility.propose.caption.other.related.info')}"/>
    </td>
</tr>

<tr>
    <td>
        <!-- start content -->
        <table class="table_content" style="width:100%">
            <tr>
                <td style="text-align: left;background-color:#ffffff" class="title">
                    <h:outputText value="#{msg.get('app.credit.facility.propose.label.relatedTMBLending')}"/>
                </td>
                <td style="text-align: left;background-color:#ffffff">
                    <p:selectOneRadio value="#{creditFacPropose.creditFacProposeView.relatedTMBLending}">
                        <f:selectItem itemLabel="" itemValue="1"/>
                        <f:selectItem itemLabel="" itemValue="0"/>
                    </p:selectOneRadio>
                </td>
            </tr>
            <tr>
                <td style="text-align: left;" class="title">
                    <h:outputText
                            value="#{msg.get('app.credit.facility.propose.label.25percentShareRelatedTMBLending')}"/>
                </td>
                <td style="text-align: left">
                    <p:selectOneRadio
                            value="#{creditFacPropose.creditFacProposeView.twentyFivePercentShareRelatedTMBLending}">
                        <f:selectItem itemLabel="" itemValue="1"/>
                        <f:selectItem itemLabel="" itemValue="0"/>
                    </p:selectOneRadio>
                </td>
            </tr>
            <tr>
                <td style="text-align: left;background-color:#ffffff" class="title">
                    <h:outputText value="#{msg.get('app.credit.facility.propose.label.singleLendingLimit')}"/>
                </td>
                <td style="text-align: left;background-color:#ffffff">
                    <p:selectOneRadio value="#{creditFacPropose.creditFacProposeView.singleLendingLimit}">
                        <f:selectItem itemLabel="" itemValue="1"/>
                        <f:selectItem itemLabel="" itemValue="0"/>
                    </p:selectOneRadio>
                </td>
            </tr>

        </table>
    </td>
</tr>


<tr>
    <td colspan="2">
        <div class="separate"><!-- --></div>
    </td>
</tr>


<tr>
    <td colspan="2" class="center">
        <p:commandButton id="btnSave" value="#{msg.get('app.button.save')}"
                         styleClass="smaller"
                         process="@form"
                         update=":frmMain, :msgBoxSystemMessagePanel"
                         actionListener="#{creditFacPropose.onSaveCreditFacPropose()}"/>
        <p:commandButton value="#{msg.get('app.button.cancel')}" styleClass="small"
                         process="@form" update=":frmMain"
                         actionListener="#{creditFacPropose.onCreation}"/>
    </td>
</tr>
</table>
<!-- end content -->
</div>
</div>
<div id="bottom_line"><!-- --></div>
</div>
<div class="clear"></div>
<!-- Start Footer -->
<ui:include src="include/footer.xhtml"/>
<!-- End Footer -->
</div>
</h:form>

<p:blockUI block=":frmMain" trigger=":frmMain:btnSave">
    LOADING<br/>
    <p:graphicImage value="/resources/images/shared/ajax-loader.gif"/>
</p:blockUI>

</p:panel>

<!-- Propose Credit Dialog -->
<p:dialog id="creditInfoDialog" header="Propose Credit Information" widgetVar="creditInfoDlg"
          modal="true" onShow="hideWindowsScrollBar()" onHide="showWindowsScrollBar()" height="500" width="900">
    <ui:include src="dialog/proposeCreditInfoDialog.xhtml"/>
</p:dialog>

<ui:include src="dialog/confirmDeleteDlg.xhtml">
    <ui:param name="id" value="confirmDeleteCreditInfoDialog"/>
    <ui:param name="name" value="confirmDeleteCreditInfoDlg"/>
    <ui:param name="formId" value="frmConfirmDeleteCreditInfo"/>
    <ui:param name="controller" value="#{creditFacPropose}"/>
    <ui:param name="action" value="onDeleteCreditInfo"/>
    <ui:param name="update" value=":frmMain"/>
</ui:include>

<!-- Propose Collateral Dialog -->
<p:dialog id="collateralInfoDialog" header="Propose Collateral Information" widgetVar="collateralInfoDlg"
          modal="true" onShow="hideWindowsScrollBar()" onHide="showWindowsScrollBar()" height="500">
    <ui:include src="dialog/proposeCollInfoDialog.xhtml"/>
</p:dialog>

<ui:include src="dialog/confirmDeleteDlg.xhtml">
    <ui:param name="id" value="confirmDeleteCollateralInfoDialog"/>
    <ui:param name="name" value="confirmDeleteCollateralInfoDlg"/>
    <ui:param name="formId" value="frmConfirmDeleteCollateralInfo"/>
    <ui:param name="controller" value="#{creditFacPropose}"/>
    <ui:param name="action" value="onDeleteProposeCollInfo"/>
    <ui:param name="update" value=":frmMain"/>
</ui:include>

<!-- Propose Guarantor Dialog -->
<p:dialog id="guarantorDialog" header="Propose Guarantor Information" widgetVar="guarantorInfoDlg"
          modal="true" onShow="hideWindowsScrollBar()" onHide="showWindowsScrollBar()" height="200">
    <ui:include src="dialog/proposeGuarantorInfoDialog.xhtml"/>
</p:dialog>

<ui:include src="dialog/confirmDeleteDlg.xhtml">
    <ui:param name="id" value="confirmDeleteGuarantorInfoDialog"/>
    <ui:param name="name" value="confirmDeleteGuarantorInfoDlg"/>
    <ui:param name="formId" value="frmConfirmDeleteGuarantorInfo"/>
    <ui:param name="controller" value="#{creditFacPropose}"/>
    <ui:param name="action" value="onDeleteGuarantorInfo"/>
    <ui:param name="update" value=":frmMain"/>
</ui:include>

<!-- Condition Dialog -->
<p:dialog id="conditionDialog" header="Condition Information" widgetVar="conditionDlg"
          modal="true" onShow="hideWindowsScrollBar()" onHide="showWindowsScrollBar()" height="180">
    <ui:include src="dialog/proposeConditionInfoDialog.xhtml"/>
</p:dialog>

<ui:include src="dialog/confirmDeleteDlg.xhtml">
    <ui:param name="id" value="confirmDeleteConditionInfoDialog"/>
    <ui:param name="name" value="confirmDeleteConditionInfoDlg"/>
    <ui:param name="formId" value="frmConfirmDeleteConditionInfo"/>
    <ui:param name="controller" value="#{creditFacPropose}"/>
    <ui:param name="action" value="onDeleteConditionInfo"/>
    <ui:param name="update" value=":frmMain"/>
</ui:include>

<!-- Control  All Page-->
<p:panel id="msgBoxSystemMessagePanel" styleClass="panel">
    <p:confirmDialog id="msgBoxSystemMessageDialog" widgetVar="msgBoxSystemMessageDlg"
                     header="#{creditFacPropose.messageHeader}" message="#{creditFacPropose.message}">
        <p:commandButton value="OK"
                         process="@this"
                         update="frmMain"
                         oncomplete="msgBoxSystemMessageDlg.hide()"/>
    </p:confirmDialog>
</p:panel>

</h:body>
</f:view>
</html>