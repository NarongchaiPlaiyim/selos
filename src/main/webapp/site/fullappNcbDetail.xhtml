<!DOCTYPE html>
<html>
<f:view xmlns="http://www.w3.org/1999/xhtml"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:p="http://primefaces.org/ui">

<h:head>
    <title>SE-LOS : NCB Record Detail</title>
    <link type="text/css" rel="stylesheet" href="#{request.contextPath}/resources/css/style.css"/>
    <script type="text/javascript" language="javascript" src="#{request.contextPath}/resources/js/jquery.numeric.js"/>
    <script type="text/javascript" language="javascript" src="#{request.contextPath}/resources/js/custom.js"/>
</h:head>

<h:body>
<p:panel id="pnl_maincontainer">
<h:form id="frmMain">
<div id="main_container">
<!-- Start Header Logo -->
<ui:include src="include/header_logo.xhtml"/>
<!-- End Header Logo -->
<!-- Start Header Detail -->
<ui:include src="include/header_detail.xhtml"/>
<!-- End Header Detail -->
<!-- Start Menu -->
<ui:include src="include/menubar.xhtml"/>
<!-- End Menu -->
<div id="content_container">
<div id="content_name"><h:outputText value="#{msg.get('app.ncbRecordDetail')}"/></div>
<div id="content">
<div id="content_info">
    <div id="content_trackchange" title="Click to view Track Change">[ View Track Change ]
    </div>
    <div id="content_lastupdate">Last update by <h:outputText id="lastupdateName"
                                                              value="MR.BDM Maker"/>,
        <h:outputText id="lastupdateTime" value="18/08/2556 11:11:01"/></div>
</div>
<div id="content_form">
<!-- start content -->
<table class="content_table_form">

<tr>
    <td style="width: 50px" class="title">
        <h:outputText value="#{msg.get('app.ncbSummaryResult')}"/>
    </td>
    <td style="width: 500px">
        <div style="width: 90px;height: 20px; line-height:20px;float: left;"
             class="result_green center">GREEN
        </div>
    </td>
</tr>
<tr>
    <td class="title">
        <h:outputText value="#{msg.get('app.ncbCheckingDate')}"/>
        <h:outputLabel value="*" styleClass="require-field"/>
    </td>
    <td>
        <p:inputText value="#{fullappNcb.ncbResultView.checkingDate}" id="checkingDate" disabled="true"/>
    </td>
</tr>

<tr>
    <td class="title">
        <h:outputText value="#{msg.get('app.noOfNCBCheckIn6months')}"/>
        <h:outputLabel value="*" styleClass="require-field"/>
    </td>
    <td>
        <p:inputText value="#{fullappNcb.ncbResultView.checkIn6Month}" disabled="true"/>
    </td>
</tr>
<tr>
    <td class="title">
        <h:outputText value="#{msg.get('app.paymentClass')}"/>
        <h:outputLabel value="*" styleClass="require-field"/>
    </td>
    <td>
        <p:inputText value="#{fullappNcb.ncbResultView.paymentClass}" disabled="true"/>
    </td>
</tr>
<tr>
    <td class="title">
        <h:outputText value="#{msg.get('app.typeOfCurrentPayment')}"/>
        <h:outputLabel value="*" styleClass="require-field"/>
    </td>
    <td>
        <p:inputText value="#{fullappNcb.ncbResultView.currentPaymentType}" disabled="true"/>
    </td>
</tr>
<tr>
    <td class="title">
        <h:outputText value="#{msg.get('app.typeOfHistoryPayment')}"/>
        <h:outputLabel value="*" styleClass="require-field"/>
    </td>
    <td>
        <p:inputText value="#{fullappNcb.ncbResultView.historyPaymentType}" disabled="true"/>
    </td>
</tr>
<tr>
    <td class="title">
        <h:outputText value="#{msg.get('app.NPLFlag')}"/>
        <h:outputLabel value="*" styleClass="require-field"/>
    </td>
    <td>
        <h:form>
            <table class="content_form">
                <tr>
                    <td class="title" style="width: 160px;">
                        <h:selectOneRadio id="NPLFlag" value="#{fullappNcb.ncbResultView.nplFlag}">
                            <f:selectItem itemLabel="Yes" itemValue="true"/>
                            <f:selectItem itemLabel="No" itemValue="false"/>
                        </h:selectOneRadio>
                     </td>
                    <td class="title">
                        <h:selectBooleanCheckbox value="#{fullappNcb.ncbResultView.nplTMBFlag}"/>
                        <h:outputText value="TMB :"></h:outputText>
                        <p:spacer width="5px;"/>
                        <h:selectOneMenu value="#{fullappNcb.ncbResultView.nplTMBMonth}">
                  <!--          <f:selectItems value="#{fullappNcb.ncbResultView.monthsList}"
                                           var="months"
                                           itemLabel="#{months.Month}"
                                           itemValue="#{months.value}"/>-->
                        </h:selectOneMenu>
                        <p:spacer width="5px;"/>
                        <h:selectOneMenu value="#{fullappNcb.ncbResultView.nplTMBYear}">
                            <!--<f:selectItems value="#{fullappNcb.ncbResultView.monthsList}"
                                           var="months2"
                                           itemLabel="#{months2.Month}"
                                           itemValue="#{months2.value}"/>-->
                        </h:selectOneMenu>
                        <p:spacer width="5px;"/>
                        <h:selectBooleanCheckbox value="#{fullappNcb.ncbResultView.nplOtherFlag}"/><h:outputText
                            value="Other :"/>
                        <p:spacer width="5px;"/>
                        <h:selectOneMenu value="#{fullappNcb.ncbResultView.nplOtherMonth}">
                            <!--<f:selectItems value="#{fullappNcb.ncbResultView.monthsList}"
                                           var="months3"
                                           itemLabel="#{months3.Month}"
                                           itemValue="#{months3.value}"/>-->
                        </h:selectOneMenu>
                        <p:spacer width="5px;"/>
                        <h:selectOneMenu value="#{fullappNcb.ncbResultView.nplOtherYear}">
                            <!--<f:selectItems value="#{fullappNcb.ncbResultView.monthsList}"
                                           var="months4"
                                           itemLabel="#{months4.Month}"
                                           itemValue="#{months4.value}"/>-->
                        </h:selectOneMenu>
                    </td>
                </tr>
            </table>
        </h:form>
    </td>
</tr>
<tr>
    <td class="title">
        <h:outputText value="#{msg.get('app.TDRFlag')}"/>
        <h:outputLabel value="*" styleClass="require-field"/>
    </td>
    <td>
        <h:form>
            <table class="content_form">
                <tr>
                    <td class="title" style="width: 160px;">
                        <h:selectOneRadio id="NPLFlag" value="#{fullappNcb.ncbResultView.tdrFlag}">
                            <f:selectItem itemLabel="Yes" itemValue="true"/>
                            <f:selectItem itemLabel="No" itemValue="false"/>
                        </h:selectOneRadio>
                    </td>
                    <td class="title">
                        <h:selectBooleanCheckbox value="#{fullappNcb.ncbResultView.tdrTMBFlag}"/>
                        <h:outputText value="TMB :"></h:outputText>
                        <p:spacer width="5px;"/>
                        <h:selectOneMenu value="#{fullappNcb.ncbResultView.tdrTMBMonth}">
                           <!-- <f:selectItems value="#{fullappNcb.ncbResultView.monthsList}"
                                           var="months"
                                           itemLabel="#{months.Month}"
                                           itemValue="#{months.value}"/>-->
                        </h:selectOneMenu>
                        <p:spacer width="5px;"/>
                        <h:selectOneMenu value="#{fullappNcb.ncbResultView.tdrTMBYear}">
                            <!--<f:selectItems value="#{fullappNcb.ncbResultView.monthsList}"
                                           var="months2"
                                           itemLabel="#{months2.Month}"
                                           itemValue="#{months2.value}"/>-->
                        </h:selectOneMenu>
                        <p:spacer width="5px;"/>
                        <h:selectBooleanCheckbox value="#{fullappNcb.ncbResultView.tdrOhterFlag}"/><h:outputText
                            value="Other :"/>
                        <p:spacer width="5px;"/>
                        <h:selectOneMenu value="#{fullappNcb.ncbResultView.tdrOtherMonth}">
                           <!-- <f:selectItems value="#{fullappNcb.ncbResultView.monthsList}"
                                           var="months3"
                                           itemLabel="#{months3.Month}"
                                           itemValue="#{months3.value}"/>-->
                        </h:selectOneMenu>
                        <p:spacer width="5px;"/>
                        <h:selectOneMenu value="#{fullappNcb.ncbResultView.tdrOtherYear}">
                            <!--<f:selectItems value="#{fullappNcb.ncbResultView.monthsList}"
                                           var="months4"
                                           itemLabel="#{months4.Month}"
                                           itemValue="#{months4.value}"/>-->
                        </h:selectOneMenu>
                    </td>
                </tr>
            </table>
        </h:form>
    </td>
</tr>
<tr>
    <td class="title">
        <h:outputText value="#{msg.get('app.TDRPaymentCondition')}"/>
        <h:outputLabel value="*" styleClass="require-field"/>
    </td>
    <td>
        <!-- <p:inputText   value="#{fullappNcb.ncbResultView.tdrPaymentCondition}"   disabled="true"/>-->
        <h:selectOneListbox id="dlgSattlementStatus" styleClass="largest" size="1"
                            value="#{fullappNcb.ncbRecordView.tdrCondition.id}" disabled="true">
            <f:selectItems value="#{fullappNcb.tdrConditionList}"
                           var="dlgTDRConditionList"
                           itemLabel="#{dlgTDRConditionList.description}"
                           itemValue="#{dlgTDRConditionList.id}"/>

        </h:selectOneListbox>
    </td>
</tr>
<tr>
    <td style="vertical-align: top" class="title">
        <h:outputText value="#{msg.get('app.remark')}"/>
    </td>
    <td>
        <p:inputTextarea cols="60" rows="3" name="remark" value="#{fullappNcb.ncbResultView.remark}" disabled="true"/>
    </td>
</tr>
<tr>
    <td colspan="100%">
        <div class="separate"></div>
    </td>
</tr>
<tr>
    <td colspan="2">
        <p:commandButton
                id="btnAdd"
                value="#{msg.get('app.addButton')}"
                styleClass="smaller"
                process="@this"
                actionListener="#{fullappNcb.onAddNcbRecord}"
                update=":ncbDlgForm"
                oncomplete="ncbDlg.show();">
            <p:resetInput target=":ncbDlgForm"/>
        </p:commandButton>
    </td>
</tr>
<tr>
    <td colspan="2">
        <table class="table_content">
            <tr>
                <td>

                    <p:dataTable id="resultNcbDetail" var="item" value="#{fullappNcb.ncbRecordViewList}"
                                 rowKey="#{item.ncbRecordView}" rowIndexVar="rowIndex">
                        <p:columnGroup type="header">
                            <p:row>
                                <p:column headerText="No." styleClass="center" style="width:22px;"/>
                                <p:column headerText="#{msg.get('app.loanAccountType')}" styleClass="center"
                                          style="width: 110px;"/>
                                <p:column headerText="#{msg.get('app.isTMBAccount')}" styleClass="center"
                                          style="width: 25px;"/>
                                <p:column headerText="#{msg.get('app.loanAccountStatus')}" styleClass="center"
                                          style="width: 70px;"/>
                                <p:column headerText="#{msg.get('app.dateOfInfo')}" styleClass="center"
                                          style="width: 90px;"/>
                                <p:column headerText="#{msg.get('app.accountOpenDate')}" styleClass="center"
                                          style="width: 90px;"/>
                                <p:column headerText="#{msg.get('app.limit')}" styleClass="center"
                                          style="width: 80px;"/>
                                <p:column headerText="#{msg.get('app.outstanding')}" styleClass="center"
                                          style="width: 80px;"/>
                                <p:column headerText="#{msg.get('app.installment')}" styleClass="center"
                                          style="width: 80px;"/>
                                <p:column headerText="#{msg.get('app.dateOfDebtRestructuring')}" styleClass="center"
                                          style="width: 100px;"/>
                                <p:column headerText="#{msg.get('app.typeOfCurrentPayment')}" styleClass="center"
                                          style="width: 110px;"/>
                                <p:column headerText="#{msg.get('app.typeOfHistoryPayment')}" styleClass="center"
                                          style="width: 110px;"/>
                                <p:column headerText="#{msg.get('app.noOfOutstandingPaymentIn12months')}"
                                          styleClass="center" style="width: 120px;"/>
                                <p:column headerText="#{msg.get('app.noOfOverLimit')}" styleClass="center"
                                          style="width: 110px;"/>
                                <p:column headerText="#{msg.get('app.refinanceFlag')}" styleClass="center"
                                          style="width: 30px;"/>
                                <p:column headerText="BUTTON" styleClass="center" style="width:60px;"/>
                            </p:row>
                        </p:columnGroup>
                        <p:subTable var="item1" value="#{fullappNcb.ncbRecordView}">
                            <f:facet name="header">
                            </f:facet>
                            <p:column>
                                <h:outputText value="#{rowIndex+1}"/>
                            </p:column>

                            <p:column>
                                <h:outputText value="#{item.accountType.name}"/>
                            </p:column>

                            <p:column>
                                <h:outputText value="#{item.TMBAccount}"/>
                            </p:column>

                            <p:column>
                                <h:outputText value="#{item.accountStatus.name}"/>
                            </p:column>

                            <p:column>
                                <h:outputText value="#{item.dateOfInfo}" id="dateOfInfo">
                                    <f:convertDateTime pattern="d/M/yyyy"/>
                                </h:outputText>
                            </p:column>

                            <p:column>
                                <h:outputText value="#{item.accountOpenDate}" id="accountOpenDate">
                                    <f:convertDateTime pattern="d/M/yyyy"/>
                                </h:outputText>
                            </p:column>

                            <p:column>
                                <h:outputText value="#{item.limit}">
                                    <f:convertNumber pattern="#,##0" minFractionDigits="2" maxFractionDigits="2"/>
                                </h:outputText>
                            </p:column>

                            <p:column>
                                <h:outputText value="#{item.outstanding}">
                                    <f:convertNumber pattern="#,##0" minFractionDigits="2" maxFractionDigits="2"/>
                                </h:outputText>
                            </p:column>

                            <p:column>
                                <h:outputText value="#{item.installment}">
                                    <f:convertNumber pattern="#,##0" minFractionDigits="2" maxFractionDigits="2"/>
                                </h:outputText>
                            </p:column>

                            <p:column>
                                <h:outputText value="#{item.dateOfDebtRestructuring}" id="dateOfDebtRestructuring">
                                    <f:convertDateTime pattern="d/M/yyyy"/>
                                </h:outputText>
                            </p:column>

                            <p:column>
                                <h:outputText value="#{item.currentPayment.name}"/>
                            </p:column>

                            <p:column>
                                <h:outputText value="#{item.historyPayment.name}"/>
                            </p:column>

                            <p:column>
                                <h:outputText value="#{item.noOfOutstandingPaymentIn12months}"/>
                            </p:column>

                            <p:column>
                                <h:outputText value="#{item.noOfOverLimit}"/>
                            </p:column>

                            <p:column>
                                <h:outputText value="#{item.refinanceFlag}"/>
                            </p:column>

                            <p:column>
                                <p:commandButton icon="ui-icon-pencil"
                                                 action="#{fullappNcb.onEditNcbDetail()}"
                                                 update=":ncbDlgForm"
                                                 oncomplete="ncbDlg.show();">
                                    <f:setPropertyActionListener value="#{item}"
                                                                 target="#{fullappNcb.selectNcbRecordItem}"/>
                                    <f:setPropertyActionListener value="#{rowIndex}"
                                                                 target="#{fullappNcb.rowIndex}"/>
                                </p:commandButton>
                                <p:commandButton title="Remove"
                                                 icon="ui-icon-trash"
                                                 oncomplete="confirmDeleteNcbRecordDlg.show()">
                                    <f:setPropertyActionListener value="#{item}"
                                                                 target="#{fullappNcb.selectNcbRecordItem}"/>
                                </p:commandButton>
                            </p:column>

                            <p:columnGroup type="footer" rendered="#{item.monthsPaymentFlag}">
                                <p:row>
                                    <p:column colspan="4" style="text-align: center"
                                              footerText="จำนวนเดือนที่หาร : #{item.noOfmonthsPayment}"/>
                                    <p:column colspan="12" style="text-align: left"
                                              footerText="#{item.moneyTotal}"></p:column>
                                </p:row>
                            </p:columnGroup>

                        </p:subTable>
                    </p:dataTable>
                </td>
            </tr>

        </table>
    </td>

</tr>
<tr>
    <td colspan="2" style="width:100%" class="center">
        <p:commandButton id="btnSave" value="Save"
                         styleClass="medium"
                         process=":frmMain"
                         action="#{fullappNcb.onSaveNcb()}"
                         update=":frmMain"/>
    </td>
</tr>
</table>
<!-- end content -->
</div>
</div>
<div id="bottom_line"><!-- --></div>
</div>
<div class="clear"></div>
<!-- Start Footer -->
<ui:include src="include/footer.xhtml"/>
<!-- End Footer -->
<h:inputHidden id="pagename" value="mnuprescreen"/>
<h:inputHidden id="subpagename" value="submnuprescreen"/>
</div>
</h:form>
</p:panel>

<p:dialog id="ncbDialog" header="NCB Record Information" widgetVar="ncbDlg"
          modal="true" width="520" height="550">
    <ui:include src="dialog/fullappNcbDialog.xhtml"/>
</p:dialog>

<ui:include src="dialog/confirmDeleteDlg.xhtml">
    <ui:param name="id" value="confirmDeleteNcbRecordDialog"/>
    <ui:param name="name" value="confirmDeleteNcbRecordDlg"/>
    <ui:param name="formId" value="frmConfirmDeleteNcbRecord"/>
    <ui:param name="controller" value="#{fullappNcb}"/>
    <ui:param name="action" value="onDeleteNcbDetail"/>
    <ui:param name="update" value=":frmMain"/>
</ui:include>

</h:body>
</f:view>
</html>