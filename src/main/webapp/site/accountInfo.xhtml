<!DOCTYPE html>
<html>
<f:view xmlns="http://www.w3.org/1999/xhtml"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:p="http://primefaces.org/ui"
        xmlns:fn="http://java.sun.com/jsp/jstl/functions"
        >

<h:head>
    <title>SE-LOS : Account Information</title>
    <h:outputStylesheet name="css/style.css" />
    <!-- <script type="text/javascript" language="javascript" src="#{request.contextPath}/resources/js/jquery.numeric.js"/> -->
    <h:outputScript library="js" name="custom.js" />
</h:head>

<h:body>
<!--<f:event type="preRenderView" listener="{basicInfo.preRender()}"/>-->
<p:panel id="pnl_maincontainer" style="border:0; margin:0; padding: 0;">
<h:form id="frmMain">
<div id="main_container">
<!-- Start Header Logo -->
<ui:include src="include/header_logo.xhtml"/>
<!-- End Header Logo -->
<!-- Start Header Detail -->
<ui:include src="include/header_detail.xhtml"/>
<!-- End Header Detail -->
<!-- Start Menu -->
<ui:include src="include/menubar.xhtml"/>
<!-- End Menu -->
<div id="content_container">
<div id="content_name">#{msg.get('app.accountInfo.header')}</div>
<div id="content">
<div id="content_info">
    <div id="content_trackchange" title="Click to view Track Change">[ View Track Change ]</div>
    <div id="content_lastupdate">Last update by <h:outputText id="lastupdateName" value="MR.BDM Maker"/>, <h:outputText
            id="lastupdateTime" value="18/08/2556 11:11:01"/></div>
</div>
<div id="content_form">

<!-- start content -->
<table class="content_table_form">

    <tr>
        <td class="title" style="width: 150px;">
            <p:outputLabel value="#{msg.get('app.accountInfo.approved')}"/>
        </td>
        <td class="left">
            <p:selectOneRadio value="#{accountInfo.accountInfoView.approvedType}" layout="grid" columns="2">
                <f:selectItem itemLabel="#{msg.get('app.accountInfo.content.radio.new')}" itemValue="0"/>
                <f:selectItem itemLabel="#{msg.get('app.accountInfo.content.radio.new.change')}" itemValue="1"/>
            </p:selectOneRadio>
        </td>
    </tr>

    <tr>
        <td colspan="2">
            <div class="separate"><!-- --></div>
        </td>
    </tr>

    <tr>
        <td style="padding-left: 50px;" colspan="2">
            <table>
                <tr>
                    <td class="title">
                        <p:outputLabel value="#{msg.get('app.accountInfo.content.opening.account.information')}"/>
                    </td>
                </tr>
                <tr>
                    <td>
                        <p:commandButton value="#{msg.get('app.button.add')}"
                                         styleClass="smaller"
                                         process="@this"
                                         actionListener="#{accountInfo.onAddAccountDetail()}"
                                         update=":accountInfoDialogForm"
                                         oncomplete="accountInfoDlg.show();">
                            <p:resetInput target=":accountInfoDialogForm"/>
                        </p:commandButton>
                    </td>
                </tr>

                <tr>
                    <td>
                        <p:dataTable id="accountDetailTable" var="accountDetail" value="#{accountInfo.accountInfoDetailViewList}"
                                     paginator="false" rowKey="#{accountDetail}" rowIndexVar="rowIndex">

                            <p:columnGroup type="header">
                                <p:row>
                                    <p:column colspan="9" style="width:222px;"
                                              headerText="#{msg.get('app.accountInfo.table.header')}"/>
                                </p:row>

                                <p:row>
                                    <p:column style="width: 22px;"/>
                                    <p:column headerText="#{msg.get('app.accountInfo.table.request')}" style="width: 130px;"/>
                                    <p:column headerText="#{msg.get('app.accountInfo.table.account.number')}" style="width: 110px;"/>
                                    <p:column headerText="#{msg.get('app.accountInfo.table.branch')}" style="width: 110px;"/>
                                    <p:column headerText="#{msg.get('app.accountInfo.table.account.name')}" style="width: 120px;"/>
                                    <p:column headerText="#{msg.get('app.accountInfo.table.product.type')}" style="width: 110px;"/>
                                    <p:column headerText="#{msg.get('app.accountInfo.table.term')}" style="width: 110px;"/>
                                    <p:column headerText="#{msg.get('app.accountInfo.table.purpose')}" style="width: 110px;"/>
                                    <p:column style="width: 55px;"/>
                                </p:row>
                            </p:columnGroup>

                            <p:column headerText="" styleClass="center" style="width:22px;">
                                <p:outputLabel value="#{rowIndex+1}"/>
                            </p:column>

                            <p:column headerText="#{'Request Account Type'}" style="width: 130px;">
                                <p:outputLabel value="#{accountDetail.reqAccountTypeForShow}"/>
                            </p:column>

                            <p:column headerText="#{'Account Number'}" style="width: 110px;">
                                <p:outputLabel value="#{accountDetail.accountNumberForShow}"/>
                            </p:column>

                            <p:column headerText="#{'Branch'}" style="width: 110px;">
                                <p:outputLabel value="#{accountDetail.branchView.name}"/>
                            </p:column>

                            <p:column headerText="#{'Account Name'}" style="width: 120px;">
                                <ui:repeat value="#{accountDetail.accountNameViewList}" var="accountNameList" varStatus="rowAccountNameIndex">
                                    <h:outputText value="#{accountNameList.name}"/>
                                    <br/>
                                </ui:repeat>
                            </p:column>

                            <p:column headerText="#{'Product Type'}" style="width: 110px;">
                                <p:outputLabel value="#{accountDetail.productTypeView.name}"/>
                            </p:column>

                            <p:column headerText="#{'Term'}" style="width: 110px;">
                                <p:outputLabel value="#{accountDetail.termForShow}"/>
                            </p:column>

                            <p:column headerText="#{'Purpose'}" style="width: 110px;">

                                <h:panelGroup rendered="#{fn : length(accountDetail.accountInfoPurposeViewList) gt 0 ? true : false }">
                                    <ui:repeat value="#{accountDetail.accountInfoPurposeViewList}" var="purposeList" varStatus="rowPurposeIndex">
                                        <h:panelGroup rendered="#{purposeList.selected}">
                                            <h:outputText value="#{purposeList.name}"/>
                                            <br/>
                                        </h:panelGroup>
                                    </ui:repeat>
                                </h:panelGroup>

                            </p:column>

                            <p:column headerText="" styleClass="center" style="width:54px;">
                                <p:commandButton title="#{msg.get('app.button.edit')}"
                                                 icon="ui-icon-pencil"
                                                 action="#{accountInfo.editAccountDetail()}"
                                                 update=":accountInfoDialogForm"
                                                 oncomplete="accountInfoDlg.show();">
                                    <f:setPropertyActionListener value="#{rowIndex}"
                                                                 target="#{accountInfo.rowIndex}"/>
                                    <f:setPropertyActionListener value="#{accountDetail}"
                                                                 target="#{accountInfo.accountInfoView.accountInfoDetailViewSelected}"/>
                                    <p:resetInput target=":accountInfoDialogForm"/>
                                </p:commandButton>

                                <p:commandButton title="#{msg.get('app.button.remove')}"
                                                 icon="ui-icon-trash"
                                                 oncomplete="confirmDeleteAccountDetailDlg.show()"
                                                 update=":frmMain:accountDetailTable"
                                                 process="@form">
                                    <f:setPropertyActionListener value="#{accountDetail}"
                                                                 target="#{accountInfo.accountInfoView.accountInfoDetailViewSelected}"/>
                                </p:commandButton>
                            </p:column>
                        </p:dataTable>

                    </td>
                </tr>
                <tr>
                    <td colspan="4" class="center">
                        <p:commandButton id="saveBtn" value="#{msg.get('app.button.save')}" styleClass="smaller"
                                         process="@form" update=":frmMain, :msgBoxSystemMessagePanel"
                                         actionListener="#{accountInfo.onSave()}"  binding="#{saveBtn}"/>
                        <p:commandButton value="#{msg.get('app.button.cancel')}" styleClass="small"
                                         process="@form" update=":frmMain"
                                         actionListener="#{accountInfo.onCreation()}"/>
                    </td>
                </tr>

            </table>
        </td>
    </tr>


</table>
<!-- end content -->
</div>

</div>
<div id="bottom_line"><!-- --></div>
</div>

    <div class="clear"></div>
    <!-- Start Footer -->
    <ui:include src="include/footer.xhtml"/>
    <!-- End Footer -->
    </div>
</h:form>

</p:panel>
    <p:dialog id="accountInfoDialog" widgetVar="accountInfoDlg" resizable="false"
              modal="true" width="700" height="650"
            header="#{msg.get('app.accountInfo.dialog.content.header')}">
        <ui:include src="dialog/accountInfoDialog.xhtml"/>
    </p:dialog>

    <ui:include src="dialog/confirmDeleteDlg.xhtml">
        <ui:param name="id" value="confirmDeleteAccountNameDialog"/>
        <ui:param name="name" value="confirmDeleteAccountNameDlg"/>
        <ui:param name="formId" value="frmConfirmDeleteAccount"/>
        <ui:param name="controller" value="#{accountInfo}"/>
        <ui:param name="action" value="removeAccountName"/>
        <ui:param name="update" value=":accountInfoDialogForm"/>
    </ui:include>

    <ui:include src="dialog/confirmDeleteDlg.xhtml">
        <ui:param name="id" value="confirmDeleteAccountDetailDialog"/>
        <ui:param name="name" value="confirmDeleteAccountDetailDlg"/>
        <ui:param name="formId" value="frmConfirmDeleteAccountDetail"/>
        <ui:param name="controller" value="#{accountInfo}"/>
        <ui:param name="action" value="removeAccountDetail"/>
        <ui:param name="update" value=":frmMain"/>
    </ui:include>

    <p:panel id="msgBoxSystemMessagePanel" styleClass="panel">
        <p:confirmDialog id="msgBoxSystemMessageDialog" widgetVar="msgBoxSystemMessageDlg"
                         header="#{accountInfo.messageHeader}" message="#{accountInfo.message}" >
            <p:commandButton value="OK"
                             process="@this"
                             update="frmMain"
                             oncomplete="msgBoxSystemMessageDlg.hide()"/>
        </p:confirmDialog>
    </p:panel>

</h:body>
</f:view>
</html>