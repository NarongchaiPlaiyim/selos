<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html>
<html>
<f:view xmlns="http://www.w3.org/1999/xhtml"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:p="http://primefaces.org/ui"
        xmlns:ui="http://java.sun.com/jsf/facelets">
<h:head>
    <title>ManageUser</title>
    <h:outputStylesheet name="css/style.css" />
    <!-- <script type="text/javascript" language="javascript" src="#{request.contextPath}/resources/js/jquery.numeric.js"/> -->
    <h:outputScript library="js" name="custom.js" />
    <!-- <script type="text/javascript" src="../resources/js/superfish.js"></script> -->
</h:head>
<h:body>
<p:panel id="pnl_maincontainer">
        <h:form id="baInformationForm">
        <div id="main_container">

            <ui:include src="include/header_logo.xhtml" />
            <!-- End Header Logo -->
            <!-- Start Header Detail -->
            <ui:include src="include/header_detail.xhtml" />
            <!-- End Header Detail -->
            <!-- Start Menu -->
            <ui:include src="include/menubar.xhtml" />
            <div id="content_container">
                <div id="content_name"><h:outputText value="#{msg.get('app.baInfo.header.bapaInfo')}"/></div>
                <div id="content">
                <div id="content_info">
                    <div id="content_trackchange" title="Click to view Track Change">[ View Track Change ]</div>
                    <div id="content_lastupdate">Last update by <h:outputText id="lastupdateName" value="MR.BDM Maker"/>, <h:outputText
                            id="lastupdateTime" value="18/08/2556 11:11:01"/></div>
                </div>
                <!-- start content -->

                <table class="content_table_form" >
                   <tr>
                       <td class="title" style="width:200px;"><h:outputText value="#{msg.get('app.baInfo.approvedType')}"/></td>
                       <td> <p:selectOneRadio value="#{baInfo.baPaInfoView.approvedType}">
                                <f:selectItem itemLabel="#{msg.get('app.baInfo.radio.new')}" itemValue="1"/>
                                <f:selectItem itemLabel="#{msg.get('app.baInfo.radio.newChange')}" itemValue="0"/>
                            </p:selectOneRadio>
                       </td>
                   </tr>
                   <tr>
                       <td colspan="100%"><div class="separate"/> </td>
                   </tr>
                   <tr>
                       <td>
                            <div class="title"><h:outputText value="#{msg.get('app.baInfo.header.baInfo')}"/> </div>
                       </td>
                   </tr>
                   <tr>
                    <td>
                        <div class="left title"><h:outputText value="#{msg.get('app.baInfo.applyBa')}"/></div>
                    </td>
                    <td>
                        <p:selectOneRadio value="#{baInfo.baPaInfoView.applyBA}">
                            <f:selectItem itemLabel="#{msg.get('app.button.yes')}"  itemValue="2" />
                            <f:selectItem itemLabel="#{msg.get('app.button.no')}" itemValue="1" />
                        </p:selectOneRadio>
                    </td>
                    </tr>
                    <tr>
                        <td>
                            <div class="left title"><h:outputText value="#{msg.get('app.baInfo.baPaymentMethod')}"/></div>
                        </td>
                        <td>
                            <p:selectOneRadio value="#{baInfo.baPaInfoView.baPaymentMethod}">
                                <f:selectItem itemLabel="#{msg.get('app.button.yes')}"  itemValue="2" />
                                <f:selectItem itemLabel="#{msg.get('app.button.no')}" itemValue="1" />
                            </p:selectOneRadio>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="100%">
                            <p:dataTable value="#{baInfo.baPaInfoView.ba}" var="item" rowIndexVar="rowIndex" style="width: 100%;">
                                <p:column headerText="#{msg.get('app.baInfo.tb.applyBa')}" style="width: 50px;"><p:selectBooleanCheckbox value="#{item.checked}"/></p:column>
                                <p:column headerText="#{msg.get('app.baInfo.tb.cusName')}" style="width: 250px;"><h:outputText value="#{item.cusName}"/> </p:column>
                                <p:column headerText="#{msg.get('app.baInfo.tb.contactNumber')}" style="width: 200px;"><h:outputText value="#{item.contactNumber}"/></p:column>
                                <p:column headerText="#{msg.get('app.baInfo.tb.relationship')}" style="width: 200px;"><h:outputText value="#{item.relationship}"/></p:column>
                                <p:column headerText="#{msg.get('app.baInfo.tb.resultHealthCheck')}" style="width: 250px;"><h:outputText value="#{item.resultHealtcheck}"/></p:column>
                                <p:column headerText="#{msg.get('app.baInfo.tb.checkDate')}" style="width: 200px;">
                                    <h:outputText value="#{item.checkDate}">
                                        <f:convertDateTime pattern="dd/MM/yyyy" locale="th_TH"/>
                                    </h:outputText>
                                </p:column>
                                <p:column style="width: 50px;"><p:commandButton icon="ui-icon-pencil"
                                                           action="#{baInfo.onOpenApplyBaDialog}"
                                                           oncomplete="applyBaInfoDialog.show()"
                                                           update=":baApplyInfoDlgForm" >
                                                <f:setPropertyActionListener value="#{item}" target="#{baInfo.newApplyBaInfoView}"  />
                                                <f:setPropertyActionListener value="#{rowIndex}" target="#{baInfo.selectRowNumber}" />
                                          </p:commandButton>
                                </p:column>
                            </p:dataTable>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="100%"><div class="separate"/> </td>
                    </tr>
                    <tr>
                        <td>
                            <div class="title">BA/PA Information</div>
                        </td>
                        <td>
                            <p:commandButton value="#{msg.get('app.button.add')}"  actionListener="#{baInfo.openAddDialog()}"
                                             update=":bapaInfoDlgForm"
                                             oncomplete="bapaInfoDialog.show()"
                                             styleClass="smaller"/>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="100%">
                            <p:dataTable value="#{baInfo.baPaInfoView.bapa}" var="bapa" rowIndexVar="rowIndex" style="width:100%">
                                <p:column headerText="" style="width: 50px;">#{rowIndex+1}</p:column>
                                <p:column headerText="#{msg.get('app.baInfo.tb.type')}" style="width: 150px;"><h:outputText value="#{bapa.type}"/></p:column>
                                <p:column headerText="#{msg.get('app.baInfo.tb.creditType')}" style="width: 350px;">
                                      <table style="width: 100% ; border-style: none !important;" >
                                          <ui:repeat value="#{bapa.creditType}" var="creditType">
                                          <tr>
                                              <td style="border-style: none !important;"><h:outputText value="#{msg.get('app.baInfo.tb.productProgram')}"/> </td>
                                              <td style="border-style: none !important;"><h:outputText value="#{creditType.productProgram}"/></td>
                                          </tr>
                                          <tr>
                                              <td style="border-style: none !important;"><h:outputText value="#{msg.get('app.baInfo.tb.creditType.creditType')}"/> </td>
                                              <td style="border-style: none !important;"><h:outputText value="#{creditType.creditFacility}"/></td>
                                          </tr>
                                          <tr>
                                              <td style="border-style: none !important;"><h:outputText value="#{msg.get('app.baInfo.tb.purpose')}"/> </td>
                                              <td style="border-style: none !important;"><h:outputText value="#{creditType.purpose}"/></td>
                                          </tr>
                                          </ui:repeat>
                                      </table>


                                </p:column>
                                <p:column headerText="#{msg.get('app.baInfo.tb.customerPay')}" style="width:150px;"><h:outputText value="#{bapa.customerPay}"/> </p:column>
                                <p:column headerText="#{msg.get('app.baInfo.tb.limit')}" style="width:150px;" styleClass="right">
                                    <h:outputText value="#{bapa.limit}">
                                        <f:convertNumber pattern="#,##0"
                                                         minFractionDigits="2"
                                                         maxFractionDigits="2"
                                                         maxIntegerDigits="14"/>
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="#{msg.get('app.baInfo.tb.premium')}" style="width: 150px;" styleClass="right">
                                    <h:outputText value="#{bapa.premium}">
                                        <f:convertNumber pattern="#,##0"
                                                         minFractionDigits="2"
                                                         maxFractionDigits="2"
                                                         maxIntegerDigits="14"/>
                                        </h:outputText>
                                </p:column>
                                <p:column headerText="#{msg.get('app.baInfo.tb.morePay')}" style="width: 150px;" styleClass="right">
                                    <h:outputText value="#{bapa.morePay}">
                                        <f:convertNumber pattern="#,##0"
                                                         minFractionDigits="2"
                                                         maxFractionDigits="2"
                                                         maxIntegerDigits="14"/>
                                    </h:outputText>
                                </p:column>
                                <p:column style="width: 50px;" styleClass="center">
                                    <p:commandButton icon="ui-icon-pencil" action="#{baInfo.openEditBaPaDialog}" update=":bapaInfoDlgForm" oncomplete="bapaInfoDialog.show()">
                                        <f:setPropertyActionListener value="#{bapa}" target="#{baInfo.newBaPaInfoAddViewItem}" />
                                        <f:setPropertyActionListener value="#{rowIndex}" target="#{baInfo.selectRowNumber}" />
                                    </p:commandButton>

                                    <p:commandButton icon="ui-icon-trash"
                                                     rendered="#{bapa.deleteFlag}"
                                                     oncomplete="confirmDeleteBaPaInfoDlg.show()">
                                        <f:setPropertyActionListener value="#{rowIndex}" target="#{baInfo.selectRowNumber}" />
                                    </p:commandButton>

                                </p:column>
                                <p:columnGroup type="footer">
                                    <p:row>
                                        <p:column colspan="8" style="height:10px;"/>
                                    </p:row>
                                    <p:row>
                                        <p:column colspan="4" footerText="#{msg.get('app.label.total')}" styleClass="summary_column"></p:column>
                                        <p:column styleClass="summary_column " style="text-align: right">
                                            <f:facet name="footer">
                                            <h:outputText value="#{baInfo.baPaInfoView.totalLimit}">
                                            <f:convertNumber pattern="#,##0"
                                                             minFractionDigits="2"
                                                             maxFractionDigits="2"
                                                             maxIntegerDigits="14"/>
                                            </h:outputText>
                                            </f:facet>
                                        </p:column>
                                        <p:column styleClass="summary_column" style="text-align: right">
                                            <f:facet name="footer">
                                            <h:outputText value="#{baInfo.baPaInfoView.totalPremium}">
                                                <f:convertNumber pattern="#,##0"
                                                                 minFractionDigits="2"
                                                                 maxFractionDigits="2"
                                                                 maxIntegerDigits="14"/>
                                            </h:outputText>
                                            </f:facet>
                                        </p:column>
                                        <p:column styleClass="summary_column" style="text-align: right">
                                            <f:facet name="footer">
                                            <h:outputText value="#{baInfo.baPaInfoView.totalMorePay}">
                                                <f:convertNumber pattern="#,##0"
                                                                 minFractionDigits="2"
                                                                 maxFractionDigits="2"
                                                                 maxIntegerDigits="14"/>
                                            </h:outputText>
                                            </f:facet>
                                        </p:column>
                                        <p:column styleClass="summary_column" headerText=""/>
                                    </p:row>
                                </p:columnGroup>
                            </p:dataTable>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="100%"><div class="separate"/> </td>
                    </tr>
                    <tr>
                        <td><div class="left title"><h:outputText value="#{msg.get('app.baInfo.InsuranceInfo')}" /></div> </td>
                    </tr>
                    <tr>
                        <td><div class="left title"><h:outputText value="#{msg.get('app.baInfo.insureName')}" /></div> </td>
                        <td>
                            <p:selectOneMenu value="#{baInfo.baPaInfoView.insureName}">
                                <f:selectItem itemLabel="- โปรดระบุ -" itemValue=""/>
                            </p:selectOneMenu>
                        </td>
                    </tr>
                    <tr>
                        <td><div class="left title"><h:outputText value="#{msg.get('app.baInfo.insureAccountNumber')}" /></div> </td>
                        <td><h:inputText value="#{baInfo.baPaInfoView.insureAccountNumber}"/> </td>
                    </tr>
                    <tr>
                        <td colspan="100%"><div class="separate"/> </td>
                    </tr>
                    <tr>
                        <td colspan="2" style="text-align: center">
                            <p:commandButton id="btnSave" value="#{msg.get('app.button.save')}" action="#{baInfo.save}" styleClass="smaller" update=":baInformationForm"/>
                            <p:commandButton value="#{msg.get('app.button.cancel')}" styleClass="smaller"/>
                        </td>
                    </tr>

                </table>

                </div>    <!-- content -->

            </div>     <!-- content contantner-->
            <div class="clear"></div>
            <!-- Start Footer -->
            <ui:include src="include/footer.xhtml" />
            <!-- End Footer -->
        </div>
    </h:form>
    </p:panel>

    <p:dialog widgetVar="bapaInfoDialog" header="#{msg.get('app.baInfo.dialog.bapa.header.bapa')}" resizable="false" modal="true"
            width="900" height="200">

        <ui:include src="dialog/bapaInfoAddDialog.xhtml"/>
    </p:dialog>

    <p:dialog widgetVar="applyBaInfoDialog" header="#{msg.get('app.baInfo.dialog.applyBa.header.applyBa')}" height="200" width="600"  modal="true" resizable="false" >

        <ui:include src="dialog/baApplyInfoDialog.xhtml"/>
    </p:dialog>

    <ui:include src="dialog/confirmDeleteDlg.xhtml">
        <ui:param name="id" value="confirmDeleteBaPaInfoDialog"/>
        <ui:param name="name" value="confirmDeleteBaPaInfoDlg"/>
        <ui:param name="formId" value="frmConfirmDeleteBaPaInfo"/>
        <ui:param name="controller" value="#{baInfo}"/>
        <ui:param name="action" value="onRemoveBaPaList"/>
        <ui:param name="update" value=":baInformationForm"/>
    </ui:include>

</h:body>

</f:view>
</html>