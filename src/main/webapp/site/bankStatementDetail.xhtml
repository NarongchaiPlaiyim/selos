<!DOCTYPE html>
<html>
<f:view xmlns="http://www.w3.org/1999/xhtml"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:p="http://primefaces.org/ui"
        xmlns:fn="http://java.sun.com/jsp/jstl/functions"
        xmlns:clv="http://clevel.com/ui">

<h:head>
    <title>SE-LOS : Bank Statement Detail</title>
    <h:outputStylesheet name="css/style.css" />
    <!--<script type="text/javascript" language="javascript" src="#{request.contextPath}/resources/js/jquery.numeric.js"></script>-->
    <h:outputScript library="js" name="custom.js" />
    <h:outputScript library="js" name="jquery.ui.datepicker.min.js" />
    <style type="text/css">
        .ui-datatable thead th {
            white-space: normal !important;
        }
        .ui-datatable tbody td {
            border-color: #868686 !important;
        }
        .calendar_right input {
            background: #ffffff !important;
            border: 1px solid #868686 !important;
        }
        /*.ui-chkbox-box {*/
            /*margin-bottom: -10px;*/
        /*}*/
        /*.ui-chkbox-box.ui-widget.ui-corner-all.ui-state-default.ui-state-active {*/
            /*margin-top: -18px;*/
        /*}*/
    </style>
</h:head>

<h:body>
<p:panel id="pnl_maincontainer" style="border:0; margin:0; padding: 0;">
    <h:form id="frmMain">
        <div id="main_container">
        <!-- Start Header Logo -->
        <ui:include src="include/header_logo.xhtml"/>
        <!-- End Header Logo -->
        <!-- Start Header Detail -->
        <ui:include src="include/header_detail.xhtml"/>
        <!-- End Header Detail -->
        <!-- Start Menu -->
        <ui:include src="include/menubar.xhtml"/>
        <!-- End Menu -->
        <div id="content_container">
            <div id="content_name">#{msg.get('app.bankStmtDetail.header')}</div>
            <div id="content">
            <div id="content_info">
                <div id="content_trackchange" title="Click to view Track Change">[ View Track Change ]</div>
                <div id="content_lastupdate">Last update by <h:outputText id="lastupdateName" value="MR.BDM Maker"/>, <h:outputText
                        id="lastupdateTime" value="18/08/2556 11:11:01"/></div>
            </div>
            <div id="content_form">
            <!-- start content -->
            <table class="content_table_form">
                <tr>
                    <td class="title" style="min-width: 170px; width: 170px; max-width: 170px;">
                        <h:outputText value="#{msg.get('app.bankStmtDetail.label.countIncome')}"/>
                    </td>
                    <td class="left" style="#{bankStatementDetail.numberOfMonths > 6 ? 'min-width: 1150px; width: 1150px; max-width: 1150px;' : ''}">
                        <table border="0">
                            <tr>
                                <td style="border-style: none !important;">
                                    <p:selectBooleanCheckbox id="countIncome"
                                                             value="#{bankStatementDetail.bankStmtView.notCountIncome}"/>
                                </td>
                                <td style="border-style: none !important; padding-left: 5px;">
                                    <h:outputText value="#{msg.get('app.bankStmtDetail.checkbox.isNotCountIncome')}"/>
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>

                <tr>
                    <td class="title" >
                        <h:outputText value="#{msg.get('app.bankStmtDetail.label.bankName')}"/>
                    </td>
                    <td class="left">
                        <p:selectOneMenu value="#{bankStatementDetail.bankStmtView.bankView.code}"
                                         required="#{not empty param[saveButton.clientId]}">
                            <f:selectItem itemLabel="#{msg.get('app.select.item0')}" itemValue=""/>
                            <f:selectItems value="#{bankStatementDetail.bankViewList}" var="bank"
                                           itemLabel="#{bank.bankName}" itemValue="#{bank.code}"/>
                        </p:selectOneMenu>
                    </td>
                </tr>

                <tr>
                    <td class="title" >
                        <h:outputText value="#{msg.get('app.bankStmtDetail.label.branchName')}"/>
                    </td>
                    <td class="left">
                        <p:inputText value="#{bankStatementDetail.bankStmtView.branchName}"
                                     required="#{not empty param[saveButton.clientId]}"
                                     styleClass="large"/>
                    </td>
                </tr>

                <tr>
                    <td class="title" >
                        <h:outputText value="#{msg.get('app.bankStmtDetail.label.accountType')}"/>
                    </td>
                    <td class="left">
                        <table border="0" style="float:left; border-collapse:separate; border-spacing:0;">
                            <tr>
                                <td>
                                    <p:selectOneMenu id="bankAccountTypeSelect"
                                                     value="#{bankStatementDetail.bankStmtView.bankAccountTypeId}"
                                                     style="width:160px;"
                                                     required="#{bankStatementDetail.bankAccTypeSelectRequired}">
                                        <f:selectItem itemLabel="#{msg.get('app.select.item0')}" itemValue="0"/>
                                        <f:selectItems value="#{bankStatementDetail.bankAccTypeViewList}" var="bankAccType"
                                                       itemLabel="#{bankAccType.name}" itemValue="#{bankAccType.id}"/>

                                        <p:ajax event="change" listener="#{bankStatementDetail.onChangeBankAccTypeSelected()}"
                                                process="@this" update=":frmMain:otherAccountTypeSelect"/>
                                    </p:selectOneMenu>
                                </td>
                                <td>
                                    <p:spacer width="50" height="0"/>
                                    <h:outputText value="#{msg.get('app.bankStmtDetail.label.otherType')}" styleClass="title"/>
                                    <p:spacer width="50" height="0"/>
                                </td>
                                <td>
                                    <p:selectOneMenu id="otherAccountTypeSelect"
                                                     value="#{bankStatementDetail.bankStmtView.otherAccountType}"
                                                     style="width:160px;"
                                                     required="#{bankStatementDetail.bankAccTypeSelectRequired}">
                                        <f:selectItem itemLabel="#{msg.get('app.select.item0')}" itemValue="0"/>
                                        <f:selectItems value="#{bankStatementDetail.othBankAccTypeViewList}" var="othBankAccType"
                                                       itemLabel="#{othBankAccType.name}" itemValue="#{othBankAccType.id}"/>

                                        <p:ajax event="change" listener="#{bankStatementDetail.onChangeOthAccTypeSelected()}"
                                                process="@this" update=":frmMain:bankAccountTypeSelect"/>
                                    </p:selectOneMenu>
                                </td>
                            </tr>
                        </table>

                    </td>
                </tr>

                <tr>
                    <td class="title" >
                        <h:outputText value="#{msg.get('app.bankStmtDetail.label.accountNumber')}"/>
                    </td>
                    <td class="left">
                        <p:inputMask value="#{bankStatementDetail.bankStmtView.accountNumber}"
                                     mask="999-9-99999-9"
                                     styleClass="large"/>
                    </td>
                </tr>

                <tr>
                    <td class="title" >
                        <h:outputText value="#{msg.get('app.bankStmtDetail.label.accountName')}"/>
                    </td>
                    <td class="left">
                        <p:inputText value="#{bankStatementDetail.bankStmtView.accountName}"
                                     required="#{not empty param[saveButton.clientId]}"
                                     styleClass="large"/>
                    </td>
                </tr>

                <tr>
                    <td class="title" >
                        <h:outputText value="#{msg.get('app.bankStmtDetail.label.accountStatus')}"/>
                    </td>
                    <td class="left">
                        <p:selectOneMenu value="#{bankStatementDetail.bankStmtView.accountStatusView.id}"
                                         required="#{not empty param[saveButton.clientId]}">
                            <f:selectItem itemLabel="#{msg.get('app.select.item0')}" itemValue=""/>
                            <f:selectItems value="#{bankStatementDetail.accStatusViewList}" var="accStatus"
                                           itemLabel="#{accStatus.status}" itemValue="#{accStatus.id}"/>
                        </p:selectOneMenu>
                    </td>
                </tr>

                <tr>
                    <td class="title" >
                        <h:outputText value="#{msg.get('app.bankStmtDetail.label.accountCharacteristic')}"/>
                    </td>
                    <td class="left">
                        <p:selectOneRadio value="#{bankStatementDetail.bankStmtView.accountCharacteristic}"
                                          required="#{not empty param[saveButton.clientId]}">
                            <f:selectItem itemLabel="#{msg.get('app.bankStmtDetail.radio.borrowersAccount')}" itemValue="1"/>
                            <f:selectItem itemLabel="#{msg.get('app.bankStmtDetail.radio.mainDirectorAccount')}" itemValue="2"/>
                            <f:selectItem itemLabel="#{msg.get('app.bankStmtDetail.radio.confederateAccount')}" itemValue="3"/>
                        </p:selectOneRadio>
                    </td>
                </tr>

                <!--<tr>-->
                    <!--<td class="right" colspan="2">-->
                        <!--<h:outputText value="#{msg.get('app.bankStmtDetail.bahtUnit')}"/>-->
                    <!--</td>-->
                <!--</tr>-->

                <tr>
                    <td class="left" colspan="2">

                        <table border="0">
                        <tr>
                            <td class="right">
                                <h:outputText value="#{msg.get('app.bankStmtDetail.bahtUnit')}"/>
                            </td>
                        </tr>
                        <tr>
                            <td class="left">
                                <!-- Bank statement detail Table -->
                                <div class="ui-datatable ui-widget">
                                    <div class="ui-datatable-tablewrapper">
                                        <table style="width: 100%">
                                            <thead>
                                                <tr>
                                                    <th class="ui-state-default"></th>
                                                    <ui:repeat value="#{bankStatementDetail.bankStmtView.bankStmtDetailViewList}" var="item">
                                                        <th class="ui-state-default">
                                                            <h:outputText value="#{item.asOfDate}">
                                                                <f:convertDateTime pattern="MMM yyyy" locale="en"/>
                                                            </h:outputText>
                                                        </th>
                                                    </ui:repeat>
                                                </tr>
                                            </thead>

                                            <tbody class="ui-datatable-data ui-widget-content" style="background:none;">
                                                <tr>
                                                    <td class="left" style="background:none;">#{msg.get('app.bankStmtDetail.table.row.overLimitAmount')}</td>
                                                    <ui:repeat value="#{bankStatementDetail.bankStmtView.bankStmtDetailViewList}" var="item" varStatus="i">
                                                        <td class="center"
                                                            style="#{i.index + 1 le (bankStatementDetail.numberOfMonths / 2) ? 'background-color:#cccccc' : ''}">
                                                            <p:inputText value="#{item.overLimitAmount}"
                                                                         onclick="this.select()"
                                                                         onkeydown="return onKeyDownMoney(event);" onkeypress="return onKeyPressMoney(event);"
                                                                         styleClass="right">
                                                                <f:convertNumber pattern="#,##0.##" minFractionDigits="2" maxFractionDigits="2" maxIntegerDigits="14"/>
                                                                <p:ajax event="blur" update="@this"/>
                                                            </p:inputText>
                                                        </td>
                                                    </ui:repeat>
                                                </tr>
                                                <tr>
                                                    <td class="left">#{msg.get('app.bankStmtDetail.table.row.grossCreditBalance')}</td>
                                                    <ui:repeat value="#{bankStatementDetail.bankStmtView.bankStmtDetailViewList}" var="item" varStatus="i">
                                                        <td class="center"
                                                            style="#{i.index + 1 le (bankStatementDetail.numberOfMonths / 2) ? 'background-color:#cccccc' : ''}">
                                                            <p:inputText value="#{item.grossCreditBalance}"
                                                                         maxlength="18"
                                                                         onclick="this.select();"
                                                                         onkeydown="return onKeyDownMoney(event);" onkeypress="return onKeyPressMoney(event);"
                                                                         styleClass="right">
                                                                <f:convertNumber pattern="#,##0.##" minFractionDigits="2" maxFractionDigits="2" maxIntegerDigits="14"/>
                                                                <p:ajax event="blur" update="@this"/>
                                                            </p:inputText>
                                                        </td>
                                                    </ui:repeat>
                                                </tr>
                                                <tr>
                                                    <td class="left">#{msg.get('app.bankStmtDetail.table.row.numberOfCreditTxn')}</td>
                                                    <ui:repeat value="#{bankStatementDetail.bankStmtView.bankStmtDetailViewList}" var="item" varStatus="i">
                                                        <td class="center"
                                                            style="#{i.index + 1 le (bankStatementDetail.numberOfMonths / 2) ? 'background-color:#cccccc' : ''}">
                                                            <p:inputText value="#{item.numberOfCreditTxn}"
                                                                         maxlength="9"
                                                                         onclick="this.select()"
                                                                         onkeydown="return onKeyDownMoney(event);" onkeypress="return onKeyPressMoney(event);"
                                                                         styleClass="right">
                                                                <f:convertNumber pattern="#,##0" integerOnly="true" maxIntegerDigits="10"/>
                                                                <p:ajax event="blur" update="@this"/>
                                                            </p:inputText>
                                                        </td>
                                                    </ui:repeat>
                                                </tr>
                                                <tr>
                                                    <td colspan="#{bankStatementDetail.numberOfMonths + 1}" class="cell_spacer"></td>
                                                </tr>
                                                <tr>
                                                    <td class="left">#{msg.get('app.bankStmtDetail.table.row.excludeListBDM')}</td>
                                                    <ui:repeat value="#{bankStatementDetail.bankStmtView.bankStmtDetailViewList}" var="item" varStatus="i">
                                                        <td class="center"
                                                            style="#{i.index + 1 le (bankStatementDetail.numberOfMonths / 2) ? 'background-color:#cccccc' : ''}">
                                                            <p:inputText value="#{item.excludeListBDM}"
                                                                         maxlength="18"
                                                                         readonly="#{bankStatementDetail.roleUW}"
                                                                         onclick="this.select()"
                                                                         onkeydown="return onKeyDownMoney(event);" onkeypress="return onKeyPressMoney(event);"
                                                                         styleClass="right">
                                                                <f:convertNumber pattern="#,##0.##" minFractionDigits="2" maxFractionDigits="2" maxIntegerDigits="14"/>
                                                                <p:ajax event="blur" update="@this"/>
                                                            </p:inputText>
                                                        </td>
                                                    </ui:repeat>
                                                </tr>
                                                <tr>
                                                    <td class="left">#{msg.get('app.bankStmtDetail.table.row.excludeListUW')}</td>
                                                    <ui:repeat value="#{bankStatementDetail.bankStmtView.bankStmtDetailViewList}" var="item" varStatus="i">
                                                        <td class="center"
                                                            style="#{i.index + 1 le (bankStatementDetail.numberOfMonths / 2) ? 'background-color:#cccccc' : ''}">
                                                            <p:inputText value="#{item.excludeListUW}"
                                                                         maxlength="18"
                                                                         readonly="#{not bankStatementDetail.roleUW}"
                                                                         onclick="this.select()"
                                                                         onkeydown="return onKeyDownMoney(event);" onkeypress="return onKeyPressMoney(event);"
                                                                         styleClass="right">
                                                                <f:convertNumber pattern="#,##0.##" minFractionDigits="2" maxFractionDigits="2" maxIntegerDigits="14"/>
                                                                <p:ajax event="blur" update="@this"/>
                                                            </p:inputText>
                                                        </td>
                                                    </ui:repeat>
                                                </tr>
                                                <tr>
                                                    <td class="left">#{msg.get('app.bankStmtDetail.table.row.creditAmountBDM')}</td>
                                                    <ui:repeat value="#{bankStatementDetail.bankStmtView.bankStmtDetailViewList}" var="item" varStatus="i">
                                                        <td class="center"
                                                            style="#{i.index + 1 le (bankStatementDetail.numberOfMonths / 2) ? 'background-color:#cccccc' : ''}">
                                                            <p:inputText value="#{item.creditAmountBDM}"
                                                                         readonly="true"
                                                                         onclick="this.select()"
                                                                         onkeydown="return onKeyDownMoney(event);" onkeypress="return onKeyPressMoney(event);"
                                                                         styleClass="right">
                                                                <f:convertNumber pattern="#,##0.##" minFractionDigits="2" maxFractionDigits="2" maxIntegerDigits="14"/>
                                                                <p:ajax event="blur" update="@this"/>
                                                            </p:inputText>
                                                        </td>
                                                    </ui:repeat>
                                                </tr>
                                                <tr>
                                                    <td class="left">#{msg.get('app.bankStmtDetail.table.row.creditAmountUW')}</td>
                                                    <ui:repeat value="#{bankStatementDetail.bankStmtView.bankStmtDetailViewList}" var="item" varStatus="i">
                                                        <td class="center"
                                                            style="#{i.index + 1 le (bankStatementDetail.numberOfMonths / 2) ? 'background-color:#cccccc' : ''}">
                                                            <p:inputText value="#{item.creditAmountUW}"
                                                                         readonly="true"
                                                                         onclick="this.select()"
                                                                         onkeydown="return onKeyDownMoney(event);" onkeypress="return onKeyPressMoney(event);"
                                                                         styleClass="right">
                                                                <f:convertNumber pattern="#,##0.##" minFractionDigits="2" maxFractionDigits="2" maxIntegerDigits="14"/>
                                                                <p:ajax event="blur" update="@this"/>
                                                            </p:inputText>
                                                        </td>
                                                    </ui:repeat>
                                                </tr>
                                                <tr>
                                                    <td class="left">#{msg.get('app.bankStmtDetail.table.row.timesOfAvgCreditBDM')}</td>
                                                    <ui:repeat value="#{bankStatementDetail.bankStmtView.bankStmtDetailViewList}" var="item" varStatus="i">
                                                        <td class="center"
                                                            style="#{i.index + 1 le (bankStatementDetail.numberOfMonths / 2) ? 'background-color:#cccccc' : ''}">
                                                            <p:inputText value="#{item.timesOfAvgCreditBDM}"
                                                                         readonly="true"
                                                                         onclick="this.select()"
                                                                         onkeydown="return onKeyDownMoney(event);" onkeypress="return onKeyPressMoney(event);"
                                                                         styleClass="right">
                                                                <f:convertNumber pattern="#,##0.##" minFractionDigits="2" maxFractionDigits="2" maxIntegerDigits="14"/>
                                                                <p:ajax event="blur" update="@this"/>
                                                            </p:inputText>
                                                        </td>
                                                    </ui:repeat>
                                                </tr>
                                                <tr>
                                                    <td class="left">#{msg.get('app.bankStmtDetail.table.row.timesOfAvgCreditUW')}</td>
                                                    <ui:repeat value="#{bankStatementDetail.bankStmtView.bankStmtDetailViewList}" var="item" varStatus="i">
                                                        <td class="center"
                                                            style="#{i.index + 1 le (bankStatementDetail.numberOfMonths / 2) ? 'background-color:#cccccc' : ''}">
                                                            <p:inputText value="#{item.timesOfAvgCreditUW}"
                                                                         readonly="true"
                                                                         onclick="this.select()"
                                                                         onkeydown="return onKeyDownMoney(event);" onkeypress="return onKeyPressMoney(event);"
                                                                         styleClass="right">
                                                                <f:convertNumber pattern="#,##0.##" minFractionDigits="2" maxFractionDigits="2" maxIntegerDigits="14"/>
                                                                <p:ajax event="blur" update="@this"/>
                                                            </p:inputText>
                                                        </td>
                                                    </ui:repeat>
                                                </tr>
                                                <tr>
                                                    <td colspan="#{bankStatementDetail.numberOfMonths + 1}" class="cell_spacer"></td>
                                                </tr>
                                                <tr>
                                                    <td class="left">#{msg.get('app.bankStmtDetail.table.row.debitAmount')}</td>
                                                    <ui:repeat value="#{bankStatementDetail.bankStmtView.bankStmtDetailViewList}" var="item" varStatus="i">
                                                        <td class="center"
                                                            style="#{i.index + 1 le (bankStatementDetail.numberOfMonths / 2) ? 'background-color:#cccccc' : ''}">
                                                            <p:inputText value="#{item.debitAmount}"
                                                                         maxlength="18"
                                                                         onclick="this.select()"
                                                                         onkeydown="return onKeyDownMoney(event);" onkeypress="return onKeyPressMoney(event);"
                                                                         styleClass="right">
                                                                <f:convertNumber pattern="#,##0.##" minFractionDigits="2" maxFractionDigits="2" maxIntegerDigits="14"/>
                                                                <p:ajax event="blur" update="@this"/>
                                                            </p:inputText>
                                                        </td>
                                                    </ui:repeat>
                                                </tr>
                                                <tr>
                                                    <td class="left">#{msg.get('app.bankStmtDetail.table.row.numberOfDebitTxn')}</td>
                                                    <ui:repeat value="#{bankStatementDetail.bankStmtView.bankStmtDetailViewList}" var="item" varStatus="i">
                                                        <td class="center"
                                                            style="#{i.index + 1 le (bankStatementDetail.numberOfMonths / 2) ? 'background-color:#cccccc' : ''}">
                                                            <p:inputText value="#{item.numberOfDebitTxn}"
                                                                         maxlength="9"
                                                                         onclick="this.select()"
                                                                         onkeydown="return onKeyDownMoney(event);" onkeypress="return onKeyPressMoney(event);"
                                                                         styleClass="right">
                                                                <f:convertNumber pattern="#,##0" integerOnly="true" maxIntegerDigits="10"/>
                                                                <p:ajax event="blur" update="@this"/>
                                                            </p:inputText>
                                                        </td>
                                                    </ui:repeat>
                                                </tr>
                                                <tr>
                                                    <td colspan="#{bankStatementDetail.numberOfMonths + 1}" class="cell_spacer"></td>
                                                </tr>
                                                <tr>
                                                    <td class="left">#{msg.get('app.bankStmtDetail.table.row.dateOfMaxBalance')}</td>
                                                    <ui:repeat value="#{bankStatementDetail.bankStmtView.bankStmtDetailViewList}" var="item" varStatus="i">
                                                        <td class="center"
                                                            style="#{i.index + 1 le (bankStatementDetail.numberOfMonths / 2) ? 'background-color:#cccccc' : ''}">
                                                            <clv:BECalendar showOn="focus" showButtonPanel="true" navigator="true"
                                                                            yearRange="1950:2100"
                                                                            defaultdate="#{bankStatementDetail.currentDateDDMMYY}"
                                                                            maxdate="#{bankStatementDetail.currentDateDDMMYY}"
                                                                            pattern="dd/MM/yyyy"
                                                                            value="#{item.dateOfMaxBalance}"
                                                                            locale="th_TH"
                                                                            readonlyInput="true"
                                                                            styleClass="calendar_right">
                                                            </clv:BECalendar>
                                                        </td>
                                                    </ui:repeat>
                                                </tr>
                                                <tr>
                                                    <td class="left">#{msg.get('app.bankStmtDetail.table.row.maxBalance')}</td>
                                                    <ui:repeat value="#{bankStatementDetail.bankStmtView.bankStmtDetailViewList}" var="item" varStatus="i">
                                                        <td class="center"
                                                            style="#{i.index + 1 le (bankStatementDetail.numberOfMonths / 2) ? 'background-color:#cccccc' : ''}">
                                                            <p:inputText value="#{item.maxBalance}"
                                                                         maxlength="18"
                                                                         onclick="this.select()"
                                                                         onkeydown="return onKeyDownMoney(event);" onkeypress="return onKeyPressMoney(event);"
                                                                         styleClass="right">
                                                                <f:convertNumber pattern="#,##0.##" minFractionDigits="2" maxFractionDigits="2" maxIntegerDigits="14"/>
                                                                <p:ajax event="blur" update="@this"/>
                                                            </p:inputText>
                                                        </td>
                                                    </ui:repeat>
                                                </tr>
                                                <tr>
                                                    <td class="left">#{msg.get('app.bankStmtDetail.table.row.dateOfMinBalance')}</td>
                                                    <ui:repeat value="#{bankStatementDetail.bankStmtView.bankStmtDetailViewList}" var="item" varStatus="i">
                                                        <td class="center"
                                                            style="#{i.index + 1 le (bankStatementDetail.numberOfMonths / 2) ? 'background-color:#cccccc' : ''}">
                                                            <clv:BECalendar showOn="focus" showButtonPanel="true" navigator="true"
                                                                            yearRange="1950:2100"
                                                                            defaultdate="#{bankStatementDetail.currentDateDDMMYY}"
                                                                            maxdate="#{bankStatementDetail.currentDateDDMMYY}"
                                                                            pattern="dd/MM/yyyy"
                                                                            value="#{item.dateOfMinBalance}"
                                                                            locale="th_TH"
                                                                            readonlyInput="true"
                                                                            styleClass="calendar_right">
                                                            </clv:BECalendar>
                                                        </td>
                                                    </ui:repeat>
                                                </tr>
                                                <tr>
                                                    <td class="left">#{msg.get('app.bankStmtDetail.table.row.minBalance')}</td>
                                                    <ui:repeat value="#{bankStatementDetail.bankStmtView.bankStmtDetailViewList}" var="item" varStatus="i">
                                                        <td class="center"
                                                            style="#{i.index + 1 le (bankStatementDetail.numberOfMonths / 2) ? 'background-color:#cccccc' : ''}">
                                                            <p:inputText value="#{item.minBalance}"
                                                                         maxlength="18"
                                                                         onclick="this.select()"
                                                                         onkeydown="return onKeyDownMoney(event);" onkeypress="return onKeyPressMoney(event);"
                                                                         styleClass="right">
                                                                <f:convertNumber pattern="#,##0.##" minFractionDigits="2" maxFractionDigits="2" maxIntegerDigits="14"/>
                                                                <p:ajax event="blur" update="@this"/>
                                                            </p:inputText>
                                                        </td>
                                                    </ui:repeat>
                                                </tr>
                                                <tr>
                                                    <td class="left">#{msg.get('app.bankStmtDetail.table.row.monthBalance')}</td>
                                                    <ui:repeat value="#{bankStatementDetail.bankStmtView.bankStmtDetailViewList}" var="item" varStatus="i">
                                                        <td class="center"
                                                            style="#{i.index + 1 le (bankStatementDetail.numberOfMonths / 2) ? 'background-color:#cccccc' : ''}">
                                                            <p:inputText value="#{item.monthBalance}"
                                                                         maxlength="18"
                                                                         onclick="this.select()"
                                                                         onkeydown="return onKeyDownNegMoney(event);" onkeypress="return onKeyPressNegMoney(event);"
                                                                         styleClass="right">
                                                                <f:convertNumber pattern="#,##0.##" minFractionDigits="2" maxFractionDigits="2" maxIntegerDigits="14"/>
                                                                <p:ajax event="blur" update="@this"/>
                                                            </p:inputText>
                                                        </td>
                                                    </ui:repeat>
                                                </tr>
                                                <tr>
                                                    <td colspan="#{bankStatementDetail.numberOfMonths + 1}" class="cell_spacer"></td>
                                                </tr>
                                                <tr>
                                                    <td class="left">#{msg.get('app.bankStmtDetail.table.row.numberOfChequeReturn')}</td>
                                                    <ui:repeat value="#{bankStatementDetail.bankStmtView.bankStmtDetailViewList}" var="item" varStatus="i">
                                                        <td class="center"
                                                            style="#{i.index + 1 le (bankStatementDetail.numberOfMonths / 2) ? 'background-color:#cccccc' : ''}">
                                                            <p:inputText value="#{item.numberOfChequeReturn}"
                                                                         maxlength="9"
                                                                         onclick="this.select()"
                                                                         onkeydown="return onKeyDownMoney(event);" onkeypress="return onKeyPressMoney(event);"
                                                                         styleClass="right">
                                                                <f:convertNumber pattern="#,##0" integerOnly="true" maxIntegerDigits="10"/>
                                                                <p:ajax event="blur" update="@this"/>
                                                            </p:inputText>
                                                        </td>
                                                    </ui:repeat>
                                                </tr>
                                                <tr>
                                                    <td class="left">#{msg.get('app.bankStmtDetail.table.row.chequeReturnAmount')}</td>
                                                    <ui:repeat value="#{bankStatementDetail.bankStmtView.bankStmtDetailViewList}" var="item" varStatus="i">
                                                        <td class="center"
                                                            style="#{i.index + 1 le (bankStatementDetail.numberOfMonths / 2) ? 'background-color:#cccccc' : ''}">
                                                            <p:inputText value="#{item.chequeReturnAmount}"
                                                                         maxlength="18"
                                                                         onclick="this.select()"
                                                                         onkeydown="return onKeyDownMoney(event);" onkeypress="return onKeyPressMoney(event);"
                                                                         styleClass="right">
                                                                <f:convertNumber pattern="#,##0.##" minFractionDigits="2" maxFractionDigits="2" maxIntegerDigits="14"/>
                                                                <p:ajax event="blur" update="@this"/>
                                                            </p:inputText>
                                                        </td>
                                                    </ui:repeat>
                                                </tr>
                                                <tr>
                                                    <td class="left">#{msg.get('app.bankStmtDetail.table.row.overLimitTimes')}</td>
                                                    <ui:repeat value="#{bankStatementDetail.bankStmtView.bankStmtDetailViewList}" var="item" varStatus="i">
                                                        <td class="center"
                                                            style="#{i.index + 1 le (bankStatementDetail.numberOfMonths / 2) ? 'background-color:#cccccc' : ''}">
                                                            <p:inputText value="#{item.overLimitTimes}"
                                                                         maxlength="9"
                                                                         onclick="this.select()"
                                                                         onkeydown="return onKeyDownMoney(event);" onkeypress="return onKeyPressMoney(event);"
                                                                         styleClass="right">
                                                                <f:convertNumber pattern="#,##0" integerOnly="true" maxIntegerDigits="10"/>
                                                                <p:ajax event="blur" update="@this"/>
                                                            </p:inputText>
                                                        </td>
                                                    </ui:repeat>
                                                </tr>
                                                <tr>
                                                    <td class="left">#{msg.get('app.bankStmtDetail.table.row.overLimitDays')}</td>
                                                    <ui:repeat value="#{bankStatementDetail.bankStmtView.bankStmtDetailViewList}" var="item" varStatus="i">
                                                        <td class="center"
                                                            style="#{i.index + 1 le (bankStatementDetail.numberOfMonths / 2) ? 'background-color:#cccccc' : ''}">
                                                            <p:inputText value="#{item.overLimitDays}"
                                                                         maxlength="9"
                                                                         onclick="this.select()"
                                                                         onkeydown="return onKeyDownMoney(event);" onkeypress="return onKeyPressMoney(event);"
                                                                         styleClass="right">
                                                                <f:convertNumber pattern="#,##0" integerOnly="true" maxIntegerDigits="10"/>
                                                                <p:ajax event="blur" update="@this"/>
                                                            </p:inputText>
                                                        </td>
                                                    </ui:repeat>
                                                </tr>
                                                <tr>
                                                    <td class="left">#{msg.get('app.bankStmtDetail.table.row.swingPercent')}</td>
                                                    <ui:repeat value="#{bankStatementDetail.bankStmtView.bankStmtDetailViewList}" var="item" varStatus="i">
                                                        <td class="center"
                                                            style="#{i.index + 1 le (bankStatementDetail.numberOfMonths / 2) ? 'background-color:#cccccc' : ''}">
                                                            <p:inputText value="#{item.swingPercent}"
                                                                         readonly="true"
                                                                         onclick="this.select()"
                                                                         onkeydown="return onKeyDownMoney(event);" onkeypress="return onKeyPressMoney(event);"
                                                                         styleClass="right">
                                                                <f:convertNumber pattern="##0.##"
                                                                                 minFractionDigits="2" maxFractionDigits="2"
                                                                                 maxIntegerDigits="3"/>
                                                                <p:ajax event="blur" update="@this"/>
                                                            </p:inputText>
                                                        </td>
                                                    </ui:repeat>
                                                </tr>
                                                <tr>
                                                    <td class="left">#{msg.get('app.bankStmtDetail.table.row.utilizationPercent')}</td>
                                                    <ui:repeat value="#{bankStatementDetail.bankStmtView.bankStmtDetailViewList}" var="item" varStatus="i">
                                                        <td class="center"
                                                            style="#{i.index + 1 le (bankStatementDetail.numberOfMonths / 2) ? 'background-color:#cccccc' : ''}">
                                                            <p:inputText value="#{item.utilizationPercent}"
                                                                         readonly="true"
                                                                         onclick="this.select()"
                                                                         onkeydown="return onKeyDownMoney(event);" onkeypress="return onKeyPressMoney(event);"
                                                                         styleClass="right">
                                                                <f:convertNumber pattern="##0.##"
                                                                                 minFractionDigits="2" maxFractionDigits="2"
                                                                                 maxIntegerDigits="3"/>
                                                                <p:ajax event="blur" update="@this"/>
                                                            </p:inputText>
                                                        </td>
                                                    </ui:repeat>
                                                </tr>
                                                <tr>
                                                    <td colspan="#{bankStatementDetail.numberOfMonths + 1}" class="cell_spacer"></td>
                                                </tr>
                                                <tr>
                                                    <td class="left">#{msg.get('app.bankStmtDetail.table.row.grossInflowPerLimit')}</td>
                                                    <ui:repeat value="#{bankStatementDetail.bankStmtView.bankStmtDetailViewList}" var="item" varStatus="i">
                                                        <td class="center"
                                                            style="#{i.index + 1 le (bankStatementDetail.numberOfMonths / 2) ? 'background-color:#cccccc' : ''}">
                                                            <p:inputText value="#{item.grossInflowPerLimit}"
                                                                         readonly="true"
                                                                         onclick="this.select()"
                                                                         onkeydown="return onKeyDownMoney(event);" onkeypress="return onKeyPressMoney(event);"
                                                                         styleClass="right">
                                                                <f:convertNumber pattern="#0.##" minFractionDigits="2" maxFractionDigits="2" maxIntegerDigits="2"/>
                                                                <p:ajax event="blur" update="@this"/>
                                                            </p:inputText>
                                                        </td>
                                                    </ui:repeat>
                                                </tr>
                                                <tr>
                                                    <td class="left">#{msg.get('app.bankStmtDetail.table.row.totalTransaction')}</td>
                                                    <ui:repeat value="#{bankStatementDetail.bankStmtView.bankStmtDetailViewList}" var="item" varStatus="i">
                                                        <td class="center"
                                                            style="#{i.index + 1 le (bankStatementDetail.numberOfMonths / 2) ? 'background-color:#cccccc' : ''}">
                                                            <p:inputText value="#{item.totalTransaction}"
                                                                         readonly="true"
                                                                         onclick="this.select()"
                                                                         onkeydown="return onKeyDownMoney(event);" onkeypress="return onKeyPressMoney(event);"
                                                                         styleClass="right">
                                                                <f:convertNumber pattern="#,##0" minFractionDigits="0" maxFractionDigits="0" maxIntegerDigits="14"/>
                                                                <p:ajax event="blur" update="@this"/>
                                                            </p:inputText>
                                                        </td>
                                                    </ui:repeat>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                                <!-- End Bank statement detail Table -->
                            </td>
                        </tr>

                        </table>
                    </td>
                </tr>

                <tr>
                    <td colspan="2" style="height:28px;"></td>
                </tr>

                <!-- Average Section -->
                <tr>
                    <td class="title" >
                        <h:outputText value="#{msg.get('app.bankStmtDetail.label.avgIncomeGross')}"/>
                    </td>
                    <td class="left">
                        <p:inputText id="avgIncomeGross"
                                     value="#{bankStatementDetail.bankStmtView.avgIncomeGross}"
                                     readonly="true"
                                     onclick="this.select()"
                                     onkeydown="return onKeyDownMoney(event);" onkeypress="return onKeyPressMoney(event);"
                                     styleClass="right" style="width:200px;">
                            <f:convertNumber pattern="#,##0.##" minFractionDigits="2" maxFractionDigits="2" maxIntegerDigits="14"/>
                            <p:ajax event="blur" update="@this"/>
                        </p:inputText>
                    </td>
                </tr>

                <tr>
                    <td class="title" >
                        <h:outputText value="#{msg.get('app.bankStmtDetail.label.avgIncomeNetBDM')}"/>
                    </td>
                    <td class="left">
                        <p:inputText id="avgIncomeNetBDM"
                                     value="#{bankStatementDetail.bankStmtView.avgIncomeNetBDM}"
                                     readonly="true"
                                     onclick="this.select()"
                                     onkeydown="return onKeyDownMoney(event);" onkeypress="return onKeyPressMoney(event);"
                                     styleClass="right" style="width:200px;">
                            <f:convertNumber pattern="#,##0.##" minFractionDigits="2" maxFractionDigits="2" maxIntegerDigits="14"/>
                            <p:ajax event="blur" update="@this"/>
                        </p:inputText>
                    </td>
                </tr>

                <tr>
                    <td class="title" >
                        <h:outputText value="#{msg.get('app.bankStmtDetail.label.avgIncomeNetUW')}"/>
                    </td>
                    <td class="left">
                        <p:inputText id="avgIncomeNetUW"
                                     value="#{bankStatementDetail.bankStmtView.avgIncomeNetUW}"
                                     readonly="true"
                                     onclick="this.select()"
                                     onkeydown="return onKeyDownMoney(event);" onkeypress="return onKeyPressMoney(event);"
                                     styleClass="right" style="width:200px;">
                            <f:convertNumber pattern="#,##0.##" minFractionDigits="2" maxFractionDigits="2" maxIntegerDigits="14"/>
                            <p:ajax event="blur" update="@this"/>
                        </p:inputText>
                    </td>
                </tr>

                <tr>
                    <td class="title" >
                        <h:outputText value="#{msg.get('app.bankStmtDetail.label.avgWithdrawAmount')}"/>
                    </td>
                    <td class="left">
                        <p:inputText id="avgWithDrawAmount"
                                     value="#{bankStatementDetail.bankStmtView.avgWithDrawAmount}"
                                     readonly="true"
                                     onclick="this.select()"
                                     onkeydown="return onKeyDownMoney(event);" onkeypress="return onKeyPressMoney(event);"
                                     styleClass="right" style="width:200px;">
                            <f:convertNumber pattern="#,##0.##" minFractionDigits="2" maxFractionDigits="2" maxIntegerDigits="14"/>
                            <p:ajax event="blur" update="@this"/>
                        </p:inputText>
                    </td>
                </tr>

                <tr>
                    <td class="title" >
                        <h:outputText value="#{msg.get('app.bankStmtDetail.label.swingPercent')}"/>
                    </td>
                    <td class="left">
                        <p:inputText id="swingPercent"
                                     value="#{bankStatementDetail.bankStmtView.avgSwingPercent}"
                                     readonly="true"
                                     onclick="this.select()"
                                     onkeydown="return onKeyDownMoney(event);" onkeypress="return onKeyPressMoney(event);"
                                     styleClass="right" style="width:200px;">
                            <f:convertNumber pattern="##0.##"
                                             minFractionDigits="2" maxFractionDigits="2"
                                             maxIntegerDigits="3"/>
                            <p:ajax event="blur" update="@this"/>
                        </p:inputText>
                    </td>
                </tr>

                <tr>
                    <td class="title" >
                        <h:outputText value="#{msg.get('app.bankStmtDetail.label.utilizationPercent')}"/>
                    </td>
                    <td class="left">
                        <p:inputText id="utilizationPercent"
                                     value="#{bankStatementDetail.bankStmtView.avgUtilizationPercent}"
                                     readonly="true"
                                     onclick="this.select()"
                                     onkeydown="return onKeyDownMoney(event);" onkeypress="return onKeyPressMoney(event);"
                                     styleClass="right" style="width:200px;">
                            <f:convertNumber pattern="##0.##"
                                             minFractionDigits="2" maxFractionDigits="2"
                                             maxIntegerDigits="3"/>
                            <p:ajax event="blur" update="@this"/>
                        </p:inputText>
                    </td>
                </tr>

                <tr>
                    <td class="title" >
                        <h:outputText value="#{msg.get('app.bankStmtDetail.label.avgGrossInflowPerLimit')}"/>
                    </td>
                    <td class="left">
                        <p:inputText id="avgGrossInflowPerLimit"
                                     value="#{bankStatementDetail.bankStmtView.avgGrossInflowPerLimit}"
                                     readonly="true"
                                     onclick="this.select()"
                                     onkeydown="return onKeyDownMoney(event);" onkeypress="return onKeyPressMoney(event);"
                                     styleClass="right" style="width:200px;">
                            <f:convertNumber pattern="#,##0.##" minFractionDigits="2" maxFractionDigits="2" maxIntegerDigits="14"/>
                            <p:ajax event="blur" update="@this"/>
                        </p:inputText>
                    </td>
                </tr>

                <tr>
                    <td class="title" >
                        <h:outputText value="#{msg.get('app.bankStmtDetail.label.chequeReturn')}"/>
                    </td>
                    <td class="left">
                        <p:inputText id="chequeReturn"
                                     value="#{bankStatementDetail.bankStmtView.chequeReturn}"
                                     readonly="true"
                                     onclick="this.select()"
                                     onkeydown="return onKeyDownMoney(event);" onkeypress="return onKeyPressMoney(event);"
                                     styleClass="right" style="width:200px;">
                            <f:convertNumber pattern="#,##0" minFractionDigits="0" maxFractionDigits="0" maxIntegerDigits="14"/>
                            <p:ajax event="blur" update="@this"/>
                        </p:inputText>
                    </td>
                </tr>

                <tr>
                    <td class="title" >
                        <h:outputText value="#{msg.get('app.bankStmtDetail.label.trdChequeReturnAmount')}"/>
                    </td>
                    <td class="left">
                        <p:inputText id="trdChequeReturnAmount"
                                     value="#{bankStatementDetail.bankStmtView.trdChequeReturnAmount}"
                                     readonly="true"
                                     onclick="this.select()"
                                     onkeydown="return onKeyDownMoney(event);" onkeypress="return onKeyPressMoney(event);"
                                     styleClass="right" style="width:200px;">
                            <f:convertNumber pattern="#,##0.##" minFractionDigits="2" maxFractionDigits="2" maxIntegerDigits="14"/>
                            <p:ajax event="blur" update="@this"/>
                        </p:inputText>
                    </td>
                </tr>

                <tr>
                    <td class="title" >
                        <h:outputText value="#{msg.get('app.bankStmtDetail.label.overLimitTimes')}"/>
                    </td>
                    <td class="left">
                        <p:inputText id="overLimitTimes"
                                     value="#{bankStatementDetail.bankStmtView.overLimitTimes}"
                                     readonly="true"
                                     onclick="this.select()"
                                     onkeydown="return onKeyDownMoney(event);" onkeypress="return onKeyPressMoney(event);"
                                     styleClass="right" style="width:200px;">
                            <f:convertNumber pattern="#,##0" minFractionDigits="0" maxFractionDigits="0" maxIntegerDigits="14"/>
                            <p:ajax event="blur" update="@this"/>
                        </p:inputText>
                    </td>
                </tr>

                <tr>
                    <td class="title" >
                        <h:outputText value="#{msg.get('app.bankStmtDetail.label.overLimitDays')}"/>
                    </td>
                    <td class="left">
                        <p:inputText id="overLimitDays"
                                     value="#{bankStatementDetail.bankStmtView.overLimitDays}"
                                     readonly="true"
                                     onclick="this.select()"
                                     onkeydown="return onKeyDownMoney(event);" onkeypress="return onKeyPressMoney(event);"
                                     styleClass="right" style="width:200px;">
                            <f:convertNumber pattern="#,##0" minFractionDigits="0" maxFractionDigits="0" maxIntegerDigits="14"/>
                            <p:ajax event="blur" update="@this"/>
                        </p:inputText>
                    </td>
                </tr>

                <tr>
                    <td class="title" >
                        <h:outputText value="#{msg.get('app.bankStmtDetail.label.remark')}"/>
                    </td>
                    <td class="left">
                        <p:inputTextarea value="#{bankStatementDetail.bankStmtView.remark}" rows="5" cols="100" autoResize="false"/>
                    </td>
                </tr>

                <tr>
                    <td colspan="2">
                        <!-- Hidden -->
                        <h:inputHidden value="#{bankStatementDetail.bankStmtView.TMB}"
                                       rendered="#{not empty bankStatementDetail.bankStmtView}"/>
                        <h:inputHidden value="#{bankStatementDetail.bankStmtView.highestInflow}"
                                       rendered="#{not empty bankStatementDetail.bankStmtView}"/>
                        <div class="separate"><!-- --></div>
                    </td>
                </tr>

                <tr>
                    <td colspan="2" class="center">
                        <p:commandButton id="btnSave" value="#{msg.get('app.button.save')}"
                                         binding="#{saveButton}"
                                         actionListener="#{bankStatementDetail.onSave()}"
                                         process="@form"
                                         update=":frmMain,:msgBoxSystemMessagePanel"
                                         styleClass="smaller"/>
                        <p:spacer width="10" height="0"/>
                        <p:commandButton id="btnCancel" value="#{msg.get('app.button.cancel')}"
                                         actionListener="#{bankStatementDetail.onCancel()}"
                                         process="@form"
                                         update=":frmMain"
                                         styleClass="smaller"/>
                    </td>
                </tr>
            </table>
            </div>
            </div>
        </div>
        <div class="clear"></div>

        <div id="bottom_line"></div>
        <!-- Start Footer -->
        <ui:include src="include/footer.xhtml"/>
        <!-- End Footer -->
        </div>

        <p:blockUI widgetVar="blockUI" block=":frmMain"
                   trigger=":frmMain:btnSave,:frmMain:btnCancel">
            LOADING<br/>
            <p:graphicImage value="/resources/images/shared/ajax-loader.gif"/>
        </p:blockUI>
    </h:form>
</p:panel>

<p:panel id="msgBoxSystemMessagePanel" styleClass="panel">
    <p:confirmDialog id="msgBoxSystemMessageDialog" widgetVar="msgBoxSystemMessageDlg"
                     severity="#{bankStatementDetail.severity}"
                     header="#{bankStatementDetail.messageHeader}" message="#{bankStatementDetail.message}">
        <p:commandButton value="OK"
                         process="@this"
                         update="frmMain"
                         oncomplete="msgBoxSystemMessageDlg.hide()"/>
    </p:confirmDialog>
</p:panel>

</h:body>
</f:view>
</html>