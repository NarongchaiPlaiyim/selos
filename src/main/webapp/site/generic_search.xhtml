<!DOCTYPE html>
<html>
<f:view xmlns="http://www.w3.org/1999/xhtml"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:p="http://primefaces.org/ui"
        xmlns:clv="http://clevel.com/ui">

<h:head>
    <title>SE-LOS : Search</title>
    <h:outputStylesheet name="css/style.css" />
    <h:outputScript library="js" name="custom.js" />

    <style type="text/css">
        table.ui-selectoneradio.nolabel_radio {
            border-collapse: collapse;
            margin: 0;
            padding: 0;
            width: 100%;
        }
        table.ui-selectoneradio.nolabel_radio tr,
        table.ui-selectoneradio.nolabel_radio td {
            border-spacing: 0;
            padding: 0;
        }
        .dialog_noheader.ui-dialog .ui-dialog-titlebar {
            display:none;
        }
        .div_row {
            display: block;
            height: 28px;
            line-height: 28px;
            padding: 1px;
        }
        table table.ui-selectoneradio,
        table table.ui-selectoneradio td,
        table table.ui-selectoneradio tr {
            border: medium none !important;
        }
        .full_table table.ui-selectoneradio td {
            padding : 0 10px 0 0 !important;
        }
        .full_table table.ui-selectoneradio {
            width : auto !important;
        }
        .ui-icon {
            width: 16px!important;
            height: 16px!important;
        }
        .ui-datatable thead th, .ui-datatable tbody td, .ui-datatable tfoot td {
            padding: 1px 10px !important;
            overflow: hidden !important;
            white-space: normal !important;
            border-width: 1px !important;
            border-style: solid !important;
            border-color: #868686;
        }
    </style>
</h:head>

<script>
function resetter()
{
    document.getElementById('frmMain:stepNameId').value = '';
    document.getElementById('frmMain:statusNameId').value = '';

}
</script>

<h:body>

<h:form id="frmMain" style="position: relative; min-height: 100%; height: 100%;">
<p:panel id="pnl_maincontainer">
<div id="main_container">
<!-- Start Header Logo -->
<ui:include src="include/header_logo.xhtml"/>
<ui:include src="include/menubar_inbox.xhtml"/>

<!-- End Menu -->
<div id="content_container">
<div id="content_name">Search</div>
<div id="content">
<table id="content_form">
<tr><td colspan="100%" style="padding-right: 10px;"><p:spacer width="5"></p:spacer></td></tr>
<tr>
    <td style="width: 20px;"></td>
    <td>
        <h:messages style="color:red;margin:8px;" />
        <table>

            <tr>
                <td class="title"></td>
                <td><h:selectOneRadio id="radio"  value="#{peSearch.statusType}" required="true" requiredMessage="Please Select One Radio Button" onchange="resetter();submit();" valueChangeListener="#{statusname.valueChangeMethod1}" >
                    <f:selectItem id="InprocessCases" itemValue="InprocessCases" itemLabel="Inprocess Cases"/>
                    <f:selectItem id="CompletedCases" itemValue="CompletedCases" itemLabel="Completed Cases"/>
                    <!--<h:message for="radio" style="color: red;"/>-->
                </h:selectOneRadio></td>
            </tr>
            <tr>
                <td colspan="100%" style="line-height: 10px;"><p:spacer width="2px"/></td>
            </tr>

            <tr>
                <td class="title" style="width: 150px;">Application No. :</td>
                <td><h:inputText size="20" value="#{peSearch.applicationNumber}" onkeypress="if(event.which &lt; 48 || event.which &gt; 57) return false;"> </h:inputText></td>

            </tr>
            <tr>
                <td colspan="100%" style="line-height: 10px;"><p:spacer width="2px"/></td>
            </tr>
            <tr>
                <td class="title" style="width: 150px;">User ID :</td>
                <td><h:inputText size="20" value="#{peSearch.userid}" id="userIdId"> </h:inputText></td>

            </tr>
            <tr>
                <td colspan="100%" style="line-height: 10px;"><p:spacer width="2px"/></td>
            </tr>

            <tr>
                <td class="title" style="width: 150px;">Step:</td>
                <td>
                    <h:selectOneMenu id="stepNameId"  class="largest" value="#{peSearch.step}" onchange="submit()" readonly="#{peSearch.statusType eq 'CompletedCases'}" disabled="#{peSearch.statusType eq 'CompletedCases'}"  valueChangeListener="#{statusname.valueChangeMethod}"  >
                        <f:selectItem itemValue="" itemLabel="-Please Select-" />
                        <f:selectItems value="#{stepid.stepnameidlist}"
                                       var="stepItem"
                                       itemLabel="#{stepItem.description}"
                                       itemValue="#{stepItem.id}"/>

                    </h:selectOneMenu>
                </td>

                <td class="title" style="width: 150px;">Status :</td>
                <td>
                    <h:selectOneMenu id="statusNameId"  class="largest" value="#{peSearch.status}" >
                        <f:selectItem itemValue="" itemLabel="-Please Select-" />

                        <f:selectItems value="#{statusname.statusnamelist}"  var="statusItem"
                                       itemLabel="#{statusItem.name}"
                                       itemValue="#{statusItem.id}"/>
                    </h:selectOneMenu>
                    <p:spacer width="15px"/>

                </td>

            </tr>
            <tr>
                <td colspan="100%" style="line-height: 10px;"><p:spacer width="2px"/></td>
            </tr>

            <tr>
                <td class="title" style="width: 150px;">Citizen ID/Registration ID/Passport No :</td>
                <td><h:inputText size="20" value="#{peSearch.citizendid}"> </h:inputText></td>

            </tr>
            <tr>
                <td colspan="100%" style="line-height: 10px;"><p:spacer width="2px"/></td>
            </tr>
            <tr>
                <td class="title" style="width: 150px;">First Name :</td>
                <td>
                    <h:inputText id="firstNameId" size="20" value="#{peSearch.firstname}" maxlength="50" validatorMessage="Enter more than 3 and less than 50 letters for First Name">
                        <!--<f:validateLength minimum="3" maximum="50" disabled="{empty param['frmMain:firstNameId']}" />-->
                    </h:inputText>

                </td>

                <td class="title" style="width: 150px;">Last Name :</td>
                <td>
                    <h:inputText id="lastNameId" size="20" value="#{peSearch.lastname}" maxlength="50" xvalidatorMessage="Enter more than 3 and less than 50 letters for Last Name">
                        <!--<f:validateLength minimum="3" maximum="50" disabled="{empty param['frmMain:lastNameId']}"  />-->
                    </h:inputText>
                </td>
            </tr>
            <tr>
                <td colspan="100%" style="line-height: 10px;"><p:spacer width="2px"/></td>
            </tr>

            <tr>
                <td class="title">Start date From :</td>
                <td style="width: 350px;">
                    <clv:BECalendar id="startformDate" showOn="button" showButtonPanel="true" navigator="true"
                                    yearRange="1950:2100"
                                    mindate="01/01/1950"
                                    maxdate="#{peSearch.currentDateDDMMYY}"
                                    pattern="dd/MM/yyyy"
                                    value="#{peSearch.date1}"
                                    requiredMessage="Please Enter From Date"
                                    required="#{not empty param['frmMain:userIdId']}"
                                    readonlyInput="true">
                    </clv:BECalendar>
                </td>
                <td class="title">To :</td>
                <td>
                    <clv:BECalendar id="starttoDate" showOn="button" showButtonPanel="true" navigator="true"
                                    yearRange="1950:2100"
                                    mindate="01/01/1950"
                                    maxdate="#{peSearch.currentDateDDMMYY}"
                                    pattern="dd/MM/yyyy"
                                    value="#{peSearch.date2}"
                                    requiredMessage="Please Enter To Date"
                                    required="#{not empty param['frmMain:userIdId']}"
                                    readonlyInput="true">
                    </clv:BECalendar>
                </td>
            </tr>
            <tr>
                <td colspan="100%" style="line-height: 10px;"><p:spacer width="2px"/></td>
            </tr>


            <tr >
                <td class="title" >Terminate date From :</td>
                <td style="width: 350px;">
                    <clv:BECalendar id="terminateformDate" showOn="button" showButtonPanel="true" navigator="true"
                                    yearRange="1950:2100"
                                    mindate="01/01/1950"
                                    maxdate="#{peSearch.currentDateDDMMYY}"
                                    pattern="dd/MM/yyyy"
                                    value="#{peSearch.date3}"
                                    readonlyInput="true"
                                    readonly="#{peSearch.statusType eq 'InprocessCases'}" disabled="#{peSearch.statusType eq 'InprocessCases'}">
                    </clv:BECalendar>
                </td>
                <td class="title">To :</td>
                <td>
                    <clv:BECalendar id="terminatetoDate" showOn="button" showButtonPanel="true" navigator="true"
                                    yearRange="1950:2100"
                                    mindate="01/01/1950"
                                    maxdate="#{peSearch.currentDateDDMMYY}"
                                    pattern="dd/MM/yyyy"
                                    value="#{peSearch.date4}"
                                    readonlyInput="true"
                                    readonly="#{peSearch.statusType eq 'InprocessCases'}" disabled="#{peSearch.statusType eq 'InprocessCases'}">
                    </clv:BECalendar>
                </td>
            </tr>



            <tr>
                <td colspan="100%" style="line-height: 10px;"><p:spacer width="2px"/></td>
            </tr>
            <tr>
                <td class="title" ></td> <td class="title" style="width: 350px;"></td><td class="title"></td><td class="title"> <h:commandButton id="name1"  value="Search" ajax="false" styleClass="medium" action="#{peSearch.search()}">  </h:commandButton></td>
            </tr>

        </table>

    </td>
</tr>
<tr>
    <td colspan="100%" style="line-height: 10px;"><p:spacer width="2px"/></td>
</tr>
<tr>
    <td colspan="100%"><p:separator/></td>


</tr>
<tr>
    <td style="width: 20px;"></td><td></td>

</tr>
<tr>
    <td colspan="100%" style="line-height: 15px;"></td>
</tr>
<tr>
    <td class="top" colspan="100%">

        <h:panelGroup id="pnl_menu_inbox1" rendered='#{peSearch.searchViewList != null}' styleClass="panel">


            <table class="content_form"  style="width: 100%">
                <tr>
                    <td>
                        <p:dataTable id="resultInbox" var="item"

                                     value="#{peSearch.searchViewList}"

                                     selection="#{peSearch.inboxViewSelectItem}"

                                     selectionMode="single"

                                     paginator="true"

                                     rows="20"

                                     rowsPerPageTemplate="20,40,60"

                                     rowKey="#{item.receiveddate}"

                                     rowIndexVar="rowIndex">

                            <p:ajax event="rowSelect" update=":frmMain:resultInbox"
                                    listener="#{peSearch.onSelectInbox}" onstart="blockInbox.show()"/>

                            <p:column headerText="" styleClass="center" style="width:22px;">
                                <h:outputText value="#{rowIndex+1}"/>
                            </p:column>

                            <p:column headerText="Received Date" styleClass="center" style="width: 130px;" sortBy="#{item.receiveddate}">
                                <h:outputText value="#{item.receiveddate}"/>
                            </p:column>

                            <p:column headerText="At User Team" styleClass="center" style="width: 130px;" sortBy="#{item.atuserteam}">
                                <h:outputText value="#{item.atuserteam}" />
                            </p:column>

                            <p:column headerText="Application Number" styleClass="center" style="width: 110px;" sortBy="#{item.applicationno}">
                                <h:outputText value="#{item.applicationno}" />
                            </p:column>

                            <p:column headerText="Name" styleClass="center" style="width: 110px;" sortBy="#{item.name}">
                                <h:outputText value="#{item.name}"/>
                            </p:column>

                            <p:column headerText="Product Group" style="width: 120px;" styleClass="center" sortBy="#{item.productgroup}" >
                                <h:outputText value="#{item.productgroup}"/>
                            </p:column>

                            <p:column headerText="Request Type" style="width: 120px;" styleClass="center" sortBy="#{item.requestTypeStr}">
                                <h:outputText value="#{item.requestTypeStr}"/>
                            </p:column>

                            <p:column headerText="Step" styleClass="center" style="width: 110px;" sortBy="#{item.step}" >
                                <h:outputText value="#{item.step}"/>
                            </p:column>

                            <p:column headerText="Status" styleClass="center" style="width: 110px;"  sortBy="#{item.status}">
                                <h:outputText value="#{item.status}"/>
                            </p:column>

                            <p:column headerText="From User" styleClass="center" style="width: 110px;" sortBy="#{item.fromuser}">
                                <h:outputText value="#{item.fromuser}" />
                            </p:column>

                            <p:column headerText="At User" styleClass="center" style="width: 110px;" sortBy="#{item.atuser}">
                                <h:outputText value="#{item.atuser}"/>
                            </p:column>

                            <p:column headerText="Appointment Date" styleClass="center" style="width: 110px;" sortBy="#{item.appointmentdate}">
                                <h:outputText value="#{item.appointmentdate}"/>
                            </p:column>

                            <p:column headerText="DOA Level" styleClass="center" style="width: 110px;">
                                <h:outputText value="#{item.doalevel}"/>
                            </p:column>

                            <p:column headerText="Action" styleClass="center" style="width: 110px;" sortBy="#{item.action}">
                                <h:outputText value="#{item.action}"/>
                            </p:column>

                            <p:column headerText="SLA End Date" styleClass="center" style="width: 110px; background-color : #{item.slastatus eq 'A' ? 'yellow' : (item.slastatus eq 'R' ? 'red' : 'default')};" >
                                <h:outputText value="#{item.slaenddate}"/>
                            </p:column>

                            <p:column headerText="Total Time Spent At User " styleClass="center" style="width: 110px;" sortBy="#{item.totaltimespentatuser}">
                                <h:outputText value="#{item.totaltimespentatuser}"/>
                            </p:column>

                            <p:column headerText="Total Time Spent At Process" styleClass="center" style="width: 110px;" sortBy="#{item.totaltimespentatprocess}" >
                                <h:outputText value="#{item.totaltimespentatprocess}"/>
                            </p:column>

                        </p:dataTable>
                    </td>
                </tr>
            </table>

        </h:panelGroup>

    </td>
</tr>
<tr><td colspan="100%"><p:spacer width="10px"/></td></tr>

</table>
</div>
<div class="bottom_line"><!-- --></div>
</div>
<div class="clear"></div>
<!-- Start Footer -->
<ui:include src="include/footer_inbox.xhtml" />
<!-- End Footer -->

</div>
</p:panel>
</h:form>

<p:blockUI widgetVar="blockInbox" block=":frmMain">
    LOADING<br/>
    <!--<p:graphicImage value="/resources/images/shared/ajax-loader.gif"/>-->
    <h:graphicImage library="images" name="shared/ajax-loader.gif" />
</p:blockUI>
</h:body>
</f:view>
</html>
