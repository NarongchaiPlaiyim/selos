<ui:composition
        xmlns="http://www.w3.org/1999/xhtml"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:p="http://primefaces.org/ui">
    <div id="header_detail">
        <div id="header_collapse" class="close" onclick="collapseDetail();"><p:spacer width="2"/></div>
        <div id="header_button_bar">
            <!--View Relate CA-->
            <p:commandButton id="btnViewRelatedCA" value="#{msg.get('app.header.button.viewRelatedCA')}" styleClass="blueButton" title="#{msg.get('app.header.button.viewRelatedCA')}"
                             rendered="#{baseController.manageButton.viewRelatedCA}"
                             >

            </p:commandButton>
            <!--Return to Maker-->
            <p:commandButton id="btnReturnMaker" value="#{msg.get('app.header.button.returnMaker')}" styleClass="blueButton" title="#{msg.get('app.header.button.returnMaker')}"
                             rendered="#{baseController.manageButton.checkNCBButton}"
                             actionListener="#{prescreenChecker.onReturnToMaker()}"
                             oncomplete="returnMakerDlg.show()"
                             update=":returnMakerDlgForm">
                <p:resetInput target=":returnMakerDlgForm"/>
            </p:commandButton>
            <!--Check NCB-->
            <p:commandButton id="btnCheckNCB" value="#{msg.get('app.header.button.checkNCB')}" styleClass="blueButton" title="#{msg.get('app.header.button.checkNCB')}"
                             rendered="#{baseController.manageButton.checkNCBButton}"
                             actionListener="#{prescreenChecker.onCheckCustomer}" process="@form"
                             oncomplete="blockUICheckCustomer.hide()"
                             update=":frmMain :msgBoxSystemMessagePanel"
                             onclick="blockUICheckCustomer.show()"/>
            <!--Assign To Checker-->
            <p:commandButton id="btnAssignChecker" value="#{msg.get('app.header.button.assignChecker')}" styleClass="blueButton" title="#{msg.get('app.header.button.assignChecker')}"
                             rendered="#{baseController.manageButton.assignToCheckerButton}" disabled="#{prescreenMaker.disableAssignButton}"
                             process="@this"
                             actionListener="#{prescreenMaker.onOpenAssignCheckerDialog()}"
                             oncomplete="assignCheckerDlg.show()"
                             update=":assignCheckerDlgForm">
                <p:resetInput target=":assignCheckerDlgForm"/>
            </p:commandButton>
            <!--Mandate Document-->
            <p:commandButton id="btnMandateDoc" value="#{msg.get('app.header.button.mandateDoc')}" styleClass="blueButton" title="#{msg.get('app.header.button.mandateDoc')}"
                             rendered="#{baseController.manageButton.checkMandateDocButton}" disabled="true"/>
            <!--Check PreScreen (BRMS)-->
            <p:commandButton id="btnCheckPreScreen" value="#{msg.get('app.header.button.checkPreScreen')}" styleClass="blueButton" title="#{msg.get('app.header.button.checkPreScreen')}"
                             rendered="#{baseController.manageButton.checkBRMSButton}"
                             action="#{baseController.onCheckPreScreen}"/>
            <!--Request Appraisal-->
            <p:commandButton id="btnRequestAppraisal" value="#{msg.get('app.header.button.requestAppraisal')}" styleClass="blueButton" title="#{msg.get('app.header.button.requestAppraisal')}"
                             onclick="confirmRequestAppraisal.show()" type="button"
                             rendered="#{baseController.manageButton.requestAppraisalButton}">
                <p:confirmDialog header="Confirmation" message="Are you want to Request Appraisa?" styleClass="left"
                                 icon="ui-icon-alert"
                                 widgetVar="confirmRequestAppraisal" global="false" showEffect="fade"
                                 rendered="#{baseController.manageButton.requestAppraisalButton}">
                    <p:commandButton value="Yes" styleClass="ui-confirmdialog-yes"
                                     update=":frmMain:msgBoxBaseMessagePanel :frmMain:msgBoxBaseRedirectPanel"
                                     actionListener="#{baseController.onRequestAppraisal()}"
                                     process="@this" oncomplete="confirmRequestAppraisal.hide()"/>
                    <p:commandButton value="No" type="button" onclick="confirmRequestAppraisal.hide()"
                                     styleClass="ui-confirmdialog-no"/>
                </p:confirmDialog>
            </p:commandButton>
            <!--Check Criteria-->
            <p:commandButton id="btnCheckCriteria" value="#{msg.get('app.header.button.checkCriteria')}" styleClass="blueButton" title="#{msg.get('app.header.button.checkCriteria')}"
                             rendered="#{baseController.manageButton.checkCriteriaButton}"
                    >

            </p:commandButton>
            <!--Assign to ABDM-->
            <p:commandButton id="btnAssignABDM" value="#{msg.get('app.header.button.assignABDM')}" styleClass="blueButton" title="#{msg.get('app.header.button.assignABDM')}"
                             rendered="#{baseController.manageButton.assignToABDMButton}"
                             actionListener="#{baseController.onOpenAssignToABDM()}"
                             oncomplete="assignABDMDlg.show()"
                             update=":frmMain:assignABDMPanel">

            </p:commandButton>
            <!--Cancel CA-->
            <p:commandButton id="btnCancelCA" value="#{msg.get('app.header.button.cancelCA')}" styleClass="blueButton" title="#{msg.get('app.header.button.cancelCA')}"
                             rendered="#{baseController.manageButton.cancelCAButton}" type="button"
                             onclick="confirmCancelCA.show()"/>
                <p:confirmDialog header="Confirmation" message="Are you sure to Cancel CA?" styleClass="left"
                                 icon="ui-icon-alert"
                                 widgetVar="confirmCancelCA" global="false" showEffect="fade"
                                 rendered="#{baseController.manageButton.cancelCAButton}">
                    <p:commandButton value="Yes" styleClass="ui-confirmdialog-yes"
                                     update=":msgBoxSystemMessagePanel :msgBoxRedirectPanel"
                                     actionListener="#{prescreenMaker.onCancelCA}"
                                     process="@this" oncomplete="confirmCancelCA.hide()"/>
                    <p:commandButton value="No" type="button" onclick="confirmCancelCA.hide()"
                                     styleClass="ui-confirmdialog-no"/>
                </p:confirmDialog>
            <!--Submit Case-->
            <p:commandButton id="btnSubmitCase" value="#{msg.get('app.header.button.submitCA')}" styleClass="blueButton" title="#{msg.get('app.header.button.submitCA')}"
                             actionListener="#{baseController.onOpenSubmitZM()}"
                             oncomplete="submitZMDlg.show()"
                             update=":frmMain:submitZMPanel"
                             rendered="#{baseController.manageButton.submitCAButton}">

            </p:commandButton>
            <!--Close Sale-->
            <p:commandButton id="btnCloseSale" value="#{msg.get('app.header.button.closeSale')}" styleClass="blueButton" title="#{msg.get('app.header.button.closeSale')}"
                             rendered="#{baseController.manageButton.closeSaleButton}" type="button"
                             onclick="confirmCloseSaleCA.show()"/>
                <p:confirmDialog header="Confirmation" message="Are you sure to Close Sale?" styleClass="left"
                                 icon="ui-icon-alert"
                                 widgetVar="confirmCloseSaleCA" global="false" showEffect="fade"
                                 rendered="#{baseController.manageButton.closeSaleButton}">
                    <p:commandButton value="Yes" styleClass="ui-confirmdialog-yes"
                                     update=":msgBoxSystemMessagePanel :msgBoxRedirectPanel"
                                     actionListener="#{prescreenMaker.onCloseSale()}"
                                     process="@this" oncomplete="confirmCloseSaleCA.hide()"/>
                    <p:commandButton value="No" type="button" onclick="confirmCloseSaleCA.hide()"
                                     styleClass="ui-confirmdialog-no"/>
                </p:confirmDialog>
            <!-- Appraisal flow : Cancel Appraisal Request -->
            <p:commandButton id="btnCancelAppraisal" value="Cancel Appraisal Request" styleClass="blueButton" title=""
                             rendered="#{baseController.manageButton.cancelAppraisalButton}">
                <p:confirmDialog header="Confirmation" message="Are you sure to Cancel Appraisal Request?" styleClass="left"
                                 icon="ui-icon-alert"
                                 widgetVar="confirmCancelAppraisalRequest" global="false" showEffect="fade"
                                 rendered="#{baseController.manageButton.cancelAppraisalButton}">
                    <!--<p:commandButton value="Yes" styleClass="ui-confirmdialog-yes"
                                     update=":msgBoxSystemMessagePanel :msgBoxRedirectPanel"
                                     actionListener="#{prescreenMaker.onCloseSale()}"
                                     process="@this" oncomplete="confirmCloseSaleCA.hide()"/>
                    <p:commandButton value="No" type="button" onclick="confirmCloseSaleCA.hide()"
                                     styleClass="ui-confirmdialog-no"/>-->
                </p:confirmDialog>
            </p:commandButton>
            <!-- Appraisal flow : Return to BDM -->
            <p:commandButton id="btnReturnAppraisalBDM" value="Return to BDM" styleClass="blueButton" title=""
                             rendered="#{baseController.manageButton.returnBDMButton}">

            </p:commandButton>
            <!-- Appraisal flow : Submit to AAD Committee-->
            <p:commandButton id="btnSubmitAADCommittee" value="Submit to AAD Committee" styleClass="blueButton" title=""
                             rendered="#{baseController.manageButton.submitAADCommitteeButton}" >

            </p:commandButton>
            <!-- Appraisal flow : Return to AAD Admin-->
            <p:commandButton id="btnSubmitAADAdmin" value="Return to AAD Admin" styleClass="blueButton" title=""
                             rendered="#{baseController.manageButton.returnAADAdminButton}">

            </p:commandButton>
            <!-- Appraisal flow : Submit to UW2-->
            <p:commandButton id="btnSubmitUW2" value="Submit" styleClass="blueButton" title=""
                             rendered="#{baseController.manageButton.submitRequestAppraisalButton}">

            </p:commandButton>
        </div>
        <div class="clear"></div>
        <div id="header_information">
            <table id="header_information_table">
                <tr>
                    <td colspan="11" style="font-weight: bold; text-align: right;">Status :</td>
                    <td><h:outputText value="#{baseController.appHeaderView.caseStatus}"/></td>
                </tr>
                <tr>
                    <td class="title left" style="min-width: 130px; max-width: 180px;">BDM :</td>
                    <td class="left" style="min-width: 180px;"><h:outputText
                            value="#{baseController.appHeaderView.bdmName}"/></td>
                    <td class="title right" style="min-width: 50px; max-width: 60px;">Tel. :</td>
                    <td class="left" style="min-width:90px; max-width:100px;"><h:outputText
                            value="#{baseController.appHeaderView.bdmPhoneNumber}"/></td>
                    <td class="title right" style="min-width: 50px; max-width: 60px;">Ext. :</td>
                    <td class="left" style="min-width:80px; max-width: 90px;"><h:outputText
                            value="#{baseController.appHeaderView.bdmPhoneExtNumber}"/></td>
                    <td class="title right" style="min-width: 50px; max-width: 60px;">Zone :</td>
                    <td class="left" style="min-width:100px; max-width: 130px;"><h:outputText
                            value="#{baseController.appHeaderView.bdmZoneName}"/></td>
                    <td class="title right" style="min-width: 60px; max-width: 70px;">Region :</td>
                    <td class="left" style="min-width:80px;"><h:outputText
                            value="#{baseController.appHeaderView.bdmRegionName}"/></td>
                    <td class="title right" style="min-width: 100px; max-width: 110px;">Submit Date :</td>
                    <td class="left" style="min-width:90px; max-width: 90px;"><h:outputText
                            value="#{baseController.appHeaderView.submitDate}"/></td>
                </tr>
                <tr>
                    <td class="title">Underwriter :</td>
                    <td><h:outputText value="#{baseController.appHeaderView.uwName}"/></td>
                    <td class="title right">Tel. :</td>
                    <td><h:outputText value="#{baseController.appHeaderView.uwPhoneNumber}"/></td>
                    <td class="title right">Ext. :</td>
                    <td><h:outputText value="#{baseController.appHeaderView.uwPhoneExtNumber}"/></td>
                    <td class="title right">Team :</td>
                    <td><h:outputText value="#{baseController.appHeaderView.uwTeamName}"/></td>
                    <td colspan="3" class="title right">Request Type :</td>
                    <td><h:outputText value="#{baseController.appHeaderView.requestType}"/></td>
                </tr>
                <tr>
                    <td colspan="11" style="font-weight: bold; text-align: right;">Refinance :</td>
                    <td><h:outputText value="#{baseController.appHeaderView.refinance}"/></td>
                </tr>
                <tr>
                    <td style="font-weight: bold;">CA No. :</td>
                    <td colspan="2"><h:outputText value="#{baseController.appHeaderView.caNo}"/></td>
                    <td class="title right">Ref CA No. :</td>
                    <td colspan="3"><h:outputText value="#{baseController.appHeaderView.appRefNo}"/></td>
                    <td colspan="2" class="title right">Ref CA Date :</td>
                    <td colspan="2"><h:outputText value="#{baseController.appHeaderView.appRefDate}"/></td>
                    <td></td>
                </tr>
                <tr>
                    <td style="font-weight: bold;">Borrower Name :</td>
                    <td colspan="11" style="padding:0; vertical-align: top;">
                        <table>
                            <tr>
                                <ui:repeat var="borrower" value="#{baseController.appHeaderView.borrowerHeaderViewList}"
                                           varStatus="status">
                                    <td style="min-width: 140px; max-width: 140px; width: 140px;">#{borrower.borrowerName}</td>
                                </ui:repeat>
                            </tr>
                        </table>
                    </td>
                </tr>
                <tr>
                    <td style="font-weight: bold;">Citizen ID/<br/>Registration ID :</td>
                    <td colspan="11" style="padding:0; vertical-align: top;">
                        <table>
                            <tr>
                                <ui:repeat var="personalId"
                                           value="#{baseController.appHeaderView.borrowerHeaderViewList}"
                                           varStatus="status">
                                    <td style="min-width: 140px; max-width: 140px; width: 140px;"><h:outputText
                                            rendered="#{baseController.stepId != 1002}"
                                            value="#{personalId.personalId}"/></td>
                                </ui:repeat>
                            </tr>
                        </table>
                    </td>
                </tr>
                <tr>
                    <td style="font-weight: bold;">Product Program :</td>
                    <td colspan="11">
                        <table>
                            <tr>
                                <ui:repeat var="productProgram"
                                           value="#{baseController.appHeaderView.productProgramList}"
                                           varStatus="status">
                                    <td>#{productProgram}</td>
                                </ui:repeat>
                            </tr>
                        </table>
                    </td>
                </tr>
                <tr>
                    <td style="font-weight: bold;">Prescreen Result :</td>
                    <td colspan="11"></td>
                </tr>
            </table>
        </div>
    </div>
    <div class="clear"></div>
    <script type="text/javascript" language="javascript">
        function collapseDetail() {
            var currentState = $("#header_collapse").attr("class");
            if (currentState == 'close') {
                $("#header_collapse").removeAttr("class");
                $("#header_collapse").attr("class", "open");
                $("#header_information").fadeOut();
            } else {
                $("#header_collapse").removeAttr("class");
                $("#header_collapse").attr("class", "close");
                $("#header_information").fadeIn();
            }
        }
    </script>
    <p:panel id="msgBoxBaseMessagePanel" styleClass="panel">
        <p:confirmDialog id="msgBoxBaseMessageDialog" widgetVar="msgBoxBaseMessageDlg" styleClass="messageDialog"
                         header="#{baseController.messageHeader}" >
            <f:facet name="message">
                <h:outputText value="#{baseController.message}" escape="false"/>
            </f:facet>
            <p:commandButton value="OK"
                             process="@this"
                             oncomplete="msgBoxBaseMessageDlg.hide()"/>
        </p:confirmDialog>
    </p:panel>

    <p:panel id="msgBoxBaseRedirectPanel" styleClass="panel">
        <p:confirmDialog id="msgBoxBaseRedirectDialog" widgetVar="msgBoxBaseRedirectDlg" styleClass="messageDialog"
                         header="#{baseController.messageHeader}" >
            <f:facet name="message">
                <h:outputText value="#{baseController.message}" escape="false"/>
            </f:facet>
            <p:commandButton value="OK"
                             process="@this"
                             action="#{baseController.onGoToInbox}"/>
        </p:confirmDialog>
    </p:panel>

    <p:panel id="assignABDMPanel" styleClass="panel">
        <p:dialog id="assignABDMDialog" widgetVar="assignABDMDlg" header="Assign To ABDM"
                  onShow="hideWindowsScrollBar()" onHide="showWindowsScrollBar()" resizable="false"
                  modal="true" width="400" height="160">
            <ui:include src="/site/dialog/assignABDMDialog.xhtml"/>
        </p:dialog>
    </p:panel>

    <p:panel id="submitZMPanel" styleClass="panel">
        <p:dialog id="submitZMDialog" widgetVar="submitZMDlg" header="Submit to Zone Manager"
                  onShow="hideWindowsScrollBar()" onHide="showWindowsScrollBar()" resizable="false"
                  modal="true" width="550" height="360">
            <ui:include src="/site/dialog/submitCaseDialog.xhtml"/>
        </p:dialog>
    </p:panel>

</ui:composition>