<!DOCTYPE html>
<html>
<f:view xmlns="http://www.w3.org/1999/xhtml"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:p="http://primefaces.org/ui"
        xmlns:clv="http://clevel.com/ui">

    <h:head>
        <title>Business Information Summary</title>
        <h:outputStylesheet name="css/style.css" />
        <h:outputScript library="js" name="custom.js" />
        <h:outputScript library="js" name="jquery.ui.datepicker.min.js" />
    </h:head>
    <h:body>
    <p:panel id="pnl_maincontainer" style="border:0; margin:0; padding: 0;">
        <h:form id="frmMain">
        <div id="main_container">
            <!-- Start Header Logo -->
            <ui:include src="include/header_logo.xhtml" />
            <!-- End Header Logo -->
            <!-- Start Header Detail -->
            <ui:include src="include/header_detail.xhtml" />
            <!-- End Header Detail -->
            <!-- Start Menu -->
            <ui:include src="include/menubar.xhtml" />
            <!-- End Menu -->
            <div id="content_container">
                <div id="content_name"><p:outputLabel value="#{msg.get('app.bizInfoSummary.header')}"/></div>
                <div id="content">
                    <table id="content_form" class="content_table_form" >
                        <colgroup>
                            <col style="width: 180px"/>
                            <col style="width: 150px"/>
                            <col style="width: 80px"/>
                            <col style="width: 120px"/>
                            <col style="width: 400px"/>
                        </colgroup>

                        <tr>
                            <td class="right" colspan="5" style="padding-right: 10px;">
                                Last update by <p:outputLabel value="#{bizInfoSummary.bizInfoSummaryView.modifyBy.userName}"/> , <p:outputLabel value="#{bizInfoSummary.bizInfoSummaryView.modifyDate}"/>
                                <a style="cursor: pointer;" href="#">[View Track Change]</a>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="5"><div class="separate"><!-- --></div></td>
                        </tr>
                        <tr>
                            <td colspan="5" class="title" ><p:outputLabel value="#{msg.get('app.bizInfoSummary.label.businessLocationDetail')}"/></td>
                        </tr>
                        <tr>
                            <td colspan="5">
                                <table style="width:100%;"  >
                                    <colgroup>
                                        <col style="width: 200px"/>
                                        <col style="width: 120px"/>
                                        <col style="width: 200px"/>
                                        <col style="width: auto"/>
                                    </colgroup>
                                    <tr>
                                        <td class="title"><p:outputLabel value="#{msg.get('app.bizInfoSummary.label.businessLocationName')}"/></td>
                                        <td><p:inputText id="bizLocationName" value="#{bizInfoSummary.bizInfoSummaryView.bizLocationName}" required="#{not empty param[addBizInfoSummary.clientId]}"/></td>
                                    </tr>
                                    <tr>
                                        <td class="title"><p:outputLabel value="#{msg.get('app.bizInfoSummary.label.isRental')}"/> : </td>
                                        <td>
                                            <p:selectOneRadio id="isRentRadio" value="#{bizInfoSummary.bizInfoSummaryView.rental}" layout="custom" required="#{not empty param[addBizInfoSummary.clientId]}">
                                                <f:selectItem itemLabel="No"  itemValue="0" />
                                                <f:selectItem itemLabel="Yes" itemValue="1" />
                                                <p:ajax process="@this" update=":frmMain:ownerName,:frmMain:expiryDate" listener="#{bizInfoSummary.onChangeRental}"/>
                                            </p:selectOneRadio>
                                            <p:radioButton id="Peropt1" for="isRentRadio" itemIndex="0"/> <p:spacer width="8px" />
                                            <h:outputLabel for="Peropt1" value="NO" />
                                        </td>
                                        <td class="title">
                                            <p:outputLabel value="#{msg.get('app.bizInfoSummary.label.ownerName')}"/> :
                                        </td>
                                        <td>
                                            <p:inputText id="ownerName" value="#{bizInfoSummary.bizInfoSummaryView.ownerName}" disabled="#{bizInfoSummary.disableOwnerName}" required="#{!bizInfoSummary.disableOwnerName and not empty param[addBizInfoSummary.clientId]}"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td></td>
                                        <td>
                                            <p:radioButton id="Peropt2" for="isRentRadio" itemIndex="1"/> <p:spacer width="8px" />
                                            <h:outputLabel for="Peropt2" value="Yes" />
                                        </td>
                                        <td class="title">
                                            <p:outputLabel value="#{msg.get('app.bizInfoSummary.label.expiryDate')}"/> :
                                        </td>
                                        <td class="title">
                                            
                                            <clv:BECalendar size="10" id="expiryDate" showOn="button" navigator="true" disabled="#{bizInfoSummary.disableExpiryDate}" required="#{!bizInfoSummary.disableExpiryDate and not empty param[addBizInfoSummary.clientId]}"
                                                        value="#{bizInfoSummary.bizInfoSummaryView.expiryDate}"
                                                        defaultdate="#{bizInfoSummary.currentDateDDMMYY}"
                                                        mindate="#{bizInfoSummary.currentDateDDMMYY}"
                                                        pattern="dd/MM/yyyy"
                                                        timeZone="Asia/Bangkok"
                                                        yearRange="1950:2100"
                                                        locale="th_TH" >
                                            </clv:BECalendar>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="title" style="vertical-align: top;"><p:outputLabel value="#{msg.get('app.bizInfoSummary.label.bizLocationAddress')}"/> : </td>
                                        <td colspan="3">
                                            <table>
                                                <colgroup>
                                                    <col style="width: 150px"/>
                                                    <col style="width: 100px"/>
                                                    <col style="width: 130px"/>
                                                    <col style="width: 250px"/>
                                                </colgroup>
                                                <tr>
                                                    <td class="left title"><p:outputLabel value="#{msg.get('app.bizInfoSummary.label.addressNo')}"/> : </td>
                                                    <td class="left title" colspan="3">
                                                        <p:inputText styleClass="smallest" id="addressNo" onkeydown="return onKeyAddressMoo(event);" onkeypress="return onKeyAddressMoo(event);"
                                                                     value="#{bizInfoSummary.bizInfoSummaryView.addressNo}" required="#{not empty param[addBizInfoSummary.clientId]}"/>
                                                        <p:spacer width="30px"/>
                                                        <p:outputLabel value="#{msg.get('app.bizInfoSummary.label.addressMoo')}" styleClass="title"/> :
                                                        <p:spacer width="30px"/>
                                                        <p:inputText styleClass="smallest" id="addressMoo" onkeydown="return onKeyAddressMoo(event);" onkeypress="return onKeyAddressMoo(event);"
                                                                     value="#{bizInfoSummary.bizInfoSummaryView.addressMoo}"/>
                                                        <p:spacer width="30px"/>
                                                        <p:outputLabel value="#{msg.get('app.bizInfoSummary.label.addressBuilding')}"/> :
                                                        <p:spacer width="30px"/>
                                                        <p:inputText styleClass="large" id="addressBuilding" onkeydown="return onKeyText(event);" onkeypress="return onKeyText(event);"
                                                                     value="#{bizInfoSummary.bizInfoSummaryView.addressBuilding}" />
                                                    </td>

                                                </tr>
                                                <tr>
                                                    <td class="title left"><p:outputLabel value="#{msg.get('app.bizInfoSummary.label.addressStreet')}"/> :</td>
                                                    <td class="left" colspan="3">
                                                        <p:inputText style="width: 500px;" id="addressStreet" onkeydown="return onKeyText(event);" onkeypress="return onKeyText(event);"
                                                                     value="#{bizInfoSummary.bizInfoSummaryView.addressStreet}" />
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td></td>
                                                    <td>
                                                        <p:selectOneMenu itemLabel="- Please Select -" itemValue="" size="1"  value="#{bizInfoSummary.bizInfoSummaryView.province.code}" required="#{not empty param[addBizInfoSummary.clientId]}"
                                                                         id="provinceCode">
                                                            <f:selectItem itemLabel="- Please Select -" itemValue=""/>
                                                            <f:selectItems value="#{bizInfoSummary.provinceList}"
                                                                           var="province"
                                                                           itemLabel="#{province.name}"
                                                                           itemValue="#{province.code}"/>
                                                            <p:ajax listener="#{bizInfoSummary.onChangeProvince}"
                                                                    update=":frmMain:districtCode,:frmMain:subDistrictCode"/>
                                                        </p:selectOneMenu>
                                                    </td>
                                                    <td>
                                                        <p:selectOneMenu  size="1" value="#{bizInfoSummary.bizInfoSummaryView.district.id}" required="#{not empty param[addBizInfoSummary.clientId]}"
                                                                         id="districtCode">
                                                            <f:selectItem itemLabel="- Please Select -" itemValue=""/>
                                                            <f:selectItems value="#{bizInfoSummary.districtList}"
                                                                           var="district"
                                                                           itemLabel="#{district.name}"
                                                                           itemValue="#{district.id}"/>
                                                            <p:ajax listener="#{bizInfoSummary.onChangeDistrict()}" update=":frmMain:subDistrictCode"/>
                                                        </p:selectOneMenu>
                                                    </td>
                                                    <td>
                                                        <p:selectOneMenu  size="1" value="#{bizInfoSummary.bizInfoSummaryView.subDistrict.code}" required="#{not empty param[addBizInfoSummary.clientId]}"
                                                                         id="subDistrictCode">
                                                            <f:selectItem itemLabel="- Please Select -" itemValue=""/>
                                                            <f:selectItems value="#{bizInfoSummary.subDistrictList}"
                                                                           var="subDistrict"
                                                                           itemLabel="#{subDistrict.name}"
                                                                           itemValue="#{subDistrict.code}"/>
                                                        </p:selectOneMenu>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td class="title"><p:outputLabel value="#{msg.get('app.bizInfoSummary.label.postCode')}"/> :</td>
                                                    <td><p:inputMask mask="99999" styleClass="medium" id="posCode" value="#{bizInfoSummary.bizInfoSummaryView.postCode}" required="#{not empty param[addBizInfoSummary.clientId] }"/></td>
                                                </tr>
                                                <tr>
                                                    <td class="title"><p:outputLabel value="#{msg.get('app.bizInfoSummary.label.country')}"/> :</td>
                                                    <td colspan="3">
                                                        <p:selectOneMenu  value="#{bizInfoSummary.bizInfoSummaryView.country.id}" required="#{not empty param[addBizInfoSummary.clientId]}"
                                                                          id="countryId">
                                                            <f:selectItem itemLabel="- Please Select -" itemValue=""/>
                                                            <f:selectItems value="#{bizInfoSummary.countryList}"
                                                                           var="country"
                                                                           itemLabel="#{country.name}"
                                                                           itemValue="#{country.id}"/>
                                                        </p:selectOneMenu>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td class="title"><p:outputLabel value="#{msg.get('app.bizInfoSummary.label.AddressEN')}"/> :</td>
                                                    <td colspan="3"><p:inputText style="width: 500px;" id="addressEng" onkeydown="return onKeyText(event);" onkeypress="return onKeyText(event);"
                                                                                 value="#{bizInfoSummary.bizInfoSummaryView.addressEng}" /></td>
                                                </tr>
                                            </table>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="title"><p:outputLabel value="#{msg.get('app.bizInfoSummary.label.phoneNo')}"/> : </td>
                                        <td colspan="4">
                                            <p:inputText styleClass="large"  id="phoneNo" value="#{bizInfoSummary.bizInfoSummaryView.phoneNo}"
                                                         onkeydown="return onKeyDownTelNo(event);" onkeypress="return onKeyPressTelNo(event);"
                                                         required="#{not empty param[addBizInfoSummary.clientId]}" />
                                            <p:spacer width="20px" />
                                            <p:outputLabel value="#{msg.get('app.bizInfoSummary.label.extension')}"/>
                                            <p:spacer width="20px"></p:spacer>
                                            <p:inputText styleClass="smaller" id="extension" onkeydown="return onKeyNumber(event);" onkeypress="return onKeyText(event);"
                                                         value="#{bizInfoSummary.bizInfoSummaryView.extension}"  />
                                        </td>
                                    </tr>
                                </table>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="5">
                                <p:spacer  width="2px"/>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="5">
                                <h:outputLabel  class="title" value="#{msg.get('app.bizInfoSummary.label.businessPeriod')}"/>
                            </td>
                        </tr>
                        <tr>
                            <td class="title">
                                <h:outputLabel  class="title" value="#{msg.get('app.bizInfoSummary.label.registrationDate')}"/>
                            </td>
                            <td colspan="4">
                                <clv:BECalendar size="10" id="registrationDate" showOn="button" navigator="true"
                                            value="#{bizInfoSummary.bizInfoSummaryView.registrationDate}"
                                            pattern="dd/MM/yyyy"
                                            timeZone="Asia/Bangkok"
                                            yearRange="1950:2100"
                                            locale="th_TH">
                                </clv:BECalendar>
                            </td>
                        </tr>
                        <tr >
                            <td class="title">
                                <h:outputLabel  class="title" value="#{msg.get('app.bizInfoSummary.label.establishDate')}"/>
                            </td>
                            <td>
                                <clv:BECalendar size="10" id="establishDate" maxdate="#{bizInfoSummary.currentDate}" showOn="button" navigator="true"
                                            value="#{bizInfoSummary.bizInfoSummaryView.establishDate}"
                                            defaultdate="#{bizInfoSummary.currentDateDDMMYY}"
                                            pattern="dd/MM/yyyy"
                                            timeZone="Asia/Bangkok"
                                            yearRange="1950:2100"
                                            locale="th_TH">
                                </clv:BECalendar>
                            </td>
                            <td class="title">
                                <h:outputLabel  class="title" value="#{msg.get('app.bizInfoSummary.label.referredExp')}"/>
                            </td>
                            <td>
                                <p:selectOneMenu  size="1"  value="#{bizInfoSummary.bizInfoSummaryView.referredExperience.id}" required="#{not empty param[addBizInfoSummary.clientId]}"
                                                 id="referExpId">
                                    <f:selectItem itemLabel="- Please Select -" itemValue=""/>
                                    <f:selectItems value="#{bizInfoSummary.referredExperienceList}"
                                                   var="referExp"
                                                   itemLabel="#{referExp.description}"
                                                   itemValue="#{referExp.id}"/>
                                </p:selectOneMenu>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="5"><p:spacer width="2px"/></td>
                        </tr>
                        <tr>
                            <td colspan="5"><p:separator/></td>
                        </tr>
                        <tr>
                            <td class="left title" colspan="5">
                                <h:outputLabel value="#{msg.get('app.bizInfoSummary.label.bizInterviewInfo')}"/>
                            </td>
                        </tr>
                        <tr>
                            <td class="left title" colspan="5">
                                <table class="table_content" style="padding: 0%" >
                                    <tr>
                                        <th>
                                            <h:outputLabel value="#{msg.get('app.bizInfoSummary.table.column.list')}"/>
                                        </th>
                                        <th>
                                            <h:outputLabel value="#{msg.get('app.bizInfoSummary.table.column.amount')}"/>
                                        </th>
                                        <th>
                                            <h:outputLabel value="#{msg.get('app.bizInfoSummary.table.column.percent')}"/>
                                        </th>
                                    </tr>
                                    <tr>
                                        <td>
                                            <h:outputLabel value="#{msg.get('app.bizInfoSummary.label.circulation')}"/>
                                        </td>
                                        <td>
                                            <p:inputText id="circulationAmount" styleClass="right" value="#{bizInfoSummary.bizInfoSummaryView.circulationAmount}" readonly="true">
                                                <f:convertNumber pattern="#,##0" minFractionDigits="2" maxFractionDigits="2"  />
                                                <p:ajax event="blur" update=":frmMain:circulationAmount"/>
                                            </p:inputText>
                                        </td>
                                        <td>
                                            <p:inputText id="circulationPercentage" styleClass="right" value="#{bizInfoSummary.bizInfoSummaryView.circulationPercentage}" readonly="true">
                                                <f:convertNumber pattern="#,##0"  minFractionDigits="2" maxFractionDigits="2" />
                                                <p:ajax event="blur" update=":frmMain:circulationPercentage"/>
                                            </p:inputText>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="title" >
                                            <h:outputLabel value="#{msg.get('app.bizInfoSummary.label.productionCosts')}"/>
                                        </td>
                                        <td>
                                            <p:inputText id="productionCostsAmount" styleClass="right" value="#{bizInfoSummary.bizInfoSummaryView.productionCostsAmount}" readonly="true">
                                                <f:convertNumber pattern="#,##0" minFractionDigits="2" maxFractionDigits="2" />
                                                <p:ajax event="blur" update=":frmMain:productionCostsAmount"/>
                                            </p:inputText>
                                        </td>
                                        <td>
                                            <p:inputText id="productionCostsPercentage" styleClass="right" readonly="#{bizInfoSummary.readonlyInterview}"
                                                         onkeydown="return onKeyMoney(event);" onkeypress="return onKeyMoney(event);"
                                                         value="#{bizInfoSummary.bizInfoSummaryView.productionCostsPercentage}">
                                                <f:convertNumber pattern="##0.00" minFractionDigits="2" maxFractionDigits="2" maxIntegerDigits="3"/>
                                                <f:validateDoubleRange maximum="100"/>
                                                <p:ajax event="blur" update=":msgBoxSystemMessagePanel,:frmMain" listener="#{bizInfoSummary.onCalSummaryTable}" />
                                            </p:inputText>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="title" >
                                            <h:outputLabel value="#{msg.get('app.bizInfoSummary.label.profitMargin')}"/>
                                        </td>
                                        <td>
                                            <p:inputText id="profitMarginAmount" styleClass="right" value="#{bizInfoSummary.bizInfoSummaryView.profitMarginAmount}" readonly="true">
                                                <f:convertNumber pattern="#,##0" minFractionDigits="2" maxFractionDigits="2"  />
                                                <p:ajax event="blur" update=":frmMain:profitMarginAmount"/>
                                            </p:inputText>
                                        </td>
                                        <td>
                                            <p:inputText id="profitMarginPercentage" styleClass="right" value="#{bizInfoSummary.bizInfoSummaryView.profitMarginPercentage}" readonly="true">
                                                <f:convertNumber pattern="#,##0"  minFractionDigits="2" maxFractionDigits="2" maxIntegerDigits="2"  />
                                                <p:ajax event="blur" update=":frmMain:profitMarginPercentage"/>
                                            </p:inputText>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="title" >
                                            <h:outputLabel value="#{msg.get('app.bizInfoSummary.label.operatingExpense')}"/>
                                        </td>
                                        <td>
                                            <p:inputText id="operatingExpenseAmount" styleClass="right"  readonly="#{bizInfoSummary.readonlyInterview}"
                                                         onkeydown="return onKeyMoney(event);" onkeypress="return onKeyMoney(event);"
                                                         value="#{bizInfoSummary.bizInfoSummaryView.operatingExpenseAmount}">
                                                <f:convertNumber pattern="#,##0" minFractionDigits="2"  maxFractionDigits="2"  />
                                                <p:ajax event="blur" update=":msgBoxSystemMessagePanel,:frmMain" listener="#{bizInfoSummary.onCalSummaryTable}" />
                                            </p:inputText>
                                        </td>
                                        <td>
                                            <p:inputText id="operatingExpensePercentage" styleClass="right" value="#{bizInfoSummary.bizInfoSummaryView.operatingExpensePercentage}" readonly="true">
                                                <f:convertNumber pattern="#,##0"  minFractionDigits="2" maxFractionDigits="2" maxIntegerDigits="2"  />
                                                <p:ajax event="blur" update=":frmMain:operatingExpensePercentage"/>
                                            </p:inputText>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="title" >
                                            <h:outputLabel value="#{msg.get('app.bizInfoSummary.label.earningsBeforeTax')}"/>
                                        </td>
                                        <td>
                                            <p:inputText id="earningsBeforeTaxAmount" styleClass="right"
                                                         value="#{bizInfoSummary.bizInfoSummaryView.earningsBeforeTaxAmount}" readonly="true">
                                                <f:convertNumber pattern="#,##0"  minFractionDigits="2" maxFractionDigits="2"  />
                                                <p:ajax event="blur" update=":frmMain:earningsBeforeTaxAmount"/>
                                            </p:inputText>
                                        </td>
                                        <td>
                                            <p:inputText id="earningsBeforeTaxPercentage" styleClass="right" value="#{bizInfoSummary.bizInfoSummaryView.earningsBeforeTaxPercentage}" readonly="true">
                                                <f:convertNumber pattern="#,##0"  minFractionDigits="2" maxFractionDigits="2" maxIntegerDigits="2"  />
                                                <p:ajax event="blur" update=":frmMain:earningsBeforeTaxPercentage"/>
                                            </p:inputText>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="title" >
                                            <h:outputLabel value="#{msg.get('app.bizInfoSummary.label.reduceInterest')}"/>
                                        </td>
                                        <td>
                                            <p:inputText id="reduceInterestAmount" styleClass="right" readonly="#{bizInfoSummary.readonlyInterview}"
                                                         onkeydown="return onKeyMoney(event);" onkeypress="return onKeyMoney(event);"
                                                         value="#{bizInfoSummary.bizInfoSummaryView.reduceInterestAmount}">
                                                <f:convertNumber pattern="#,##0" minFractionDigits="2"  maxFractionDigits="2"  />
                                                <p:ajax event="blur" update=":msgBoxSystemMessagePanel,:frmMain" listener="#{bizInfoSummary.onCalSummaryTable}" />
                                            </p:inputText>
                                        </td>
                                        <td>
                                            <p:inputText id="reduceInterestPercentage" styleClass="right" value="#{bizInfoSummary.bizInfoSummaryView.reduceInterestPercentage}" readonly="true">
                                                <f:convertNumber pattern="#,##0"  minFractionDigits="2" maxFractionDigits="2" maxIntegerDigits="2"  />
                                                <p:ajax event="blur" update=":frmMain:reduceInterestPercentage"/>
                                            </p:inputText>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="title" >
                                            <h:outputLabel value="#{msg.get('app.bizInfoSummary.label.reduceTax')}"/>
                                        </td>
                                        <td>
                                            <p:inputText id="reduceTaxAmount" styleClass="right" readonly="#{bizInfoSummary.readonlyInterview}"
                                                         onkeydown="return onKeyMoney(event);" onkeypress="return onKeyMoney(event);"
                                                         value="#{bizInfoSummary.bizInfoSummaryView.reduceTaxAmount}">
                                                <f:convertNumber pattern="#,##0" minFractionDigits="2"  maxFractionDigits="2" />
                                                <p:ajax event="blur" update=":msgBoxSystemMessagePanel,:frmMain" listener="#{bizInfoSummary.onCalSummaryTable}" />
                                            </p:inputText>
                                        </td>
                                        <td>
                                            <p:inputText id="reduceTaxPercentage" styleClass="right" value="#{bizInfoSummary.bizInfoSummaryView.reduceTaxPercentage}" readonly="true">
                                                <f:convertNumber pattern="#,##0"  minFractionDigits="2" maxFractionDigits="2" maxIntegerDigits="2"  />
                                                <p:ajax event="blur" update=":frmMain:reduceTaxPercentage" />
                                            </p:inputText>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="title" >
                                            <h:outputLabel value="#{msg.get('app.bizInfoSummary.label.netMargin')}"/>
                                        </td>
                                        <td>
                                            <p:inputText id="netMarginAmount" styleClass="right" value="#{bizInfoSummary.bizInfoSummaryView.netMarginAmount}" readonly="true">
                                                <f:convertNumber pattern="#,##0"  minFractionDigits="2" maxFractionDigits="2" />
                                                <p:ajax event="blur" update=":frmMain:netMarginAmount"/>
                                            </p:inputText>
                                        </td>
                                        <td>
                                            <p:inputText id="netMarginPercentage" styleClass="right" value="#{bizInfoSummary.bizInfoSummaryView.netMarginPercentage}" readonly="true">
                                                <f:convertNumber pattern="#,##0"  minFractionDigits="2" maxFractionDigits="2" maxIntegerDigits="2"  />
                                                <p:ajax event="blur" update=":frmMain:netMarginPercentage"/>
                                            </p:inputText>
                                        </td>
                                    </tr>
                                </table>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="5"><p:spacer width="2px"/></td>
                        </tr>

                        <tr>
                            <td class="left title">
                                <h:outputLabel value="#{msg.get('app.bizInfoSummary.label.netFixAsset')}"/>
                            </td>
                            <td class="left">
                                <p:inputText id="netFixAsset" styleClass="right" value="#{bizInfoSummary.bizInfoSummaryView.netFixAsset}"
                                             onkeydown="return onKeyMoney(event);" onkeypress="return onKeyMoney(event);"
                                             required="#{not empty param[addBizInfoSummary.clientId]}">
                                    <f:convertNumber pattern="#,##0" minFractionDigits="2" maxFractionDigits="2" />
                                    <p:ajax event="blur" update=":frmMain:netFixAsset"/>
                                </p:inputText>
                                <p:spacer width="10px"/>
                                <h:outputLabel value="#{msg.get('app.bizInfoSummary.label.money.unit')}"/>
                            </td>
                        </tr>
                        <tr>
                            <td class="left title">
                                <h:outputLabel value="#{msg.get('app.bizInfoSummary.label.noOfEmployee')}"/>
                            </td>
                            <td class="left">
                                <p:inputText id="noOfEmployee" styleClass="right" onkeydown="return onKeyDownNumber(event);" onkeypress="return onKeyPressNumber(event);"
                                             value="#{bizInfoSummary.bizInfoSummaryView.noOfEmployee}" required="#{not empty param[addBizInfoSummary.clientId] }">
                                    <f:convertNumber pattern="#,##0" integerOnly="true"/>
                                    <p:ajax event="blur" update=":frmMain:noOfEmployee"/>
                                </p:inputText>
                                <p:spacer width="10px"/>
                                <h:outputLabel value="#{msg.get('app.bizInfoSummary.label.labor.unit')}"/>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="5"><p:spacer width="2px"/></td>
                        </tr>
                        <tr>
                            <td colspan="5"><p:separator/></td>
                        </tr>
                        <tr>
                            <td colspan="5"><p:spacer width="2px"/></td>
                        </tr>
                        <tr>
                            <td colspan="5" class="left">
                                <p:commandButton id="btnAddBizInfoDetail" styleClass="medium" binding="#{addBizInfoDetail}"
                                                 value="#{msg.get('app.button.add')}"
                                                 oncomplete="confirmAddBizInfoDetailDlg.show()"
                                                 process="@this"
                                                 update="frmMain"
                                                >
                                    <f:setPropertyActionListener value="addDetail" target="#{bizInfoSummary.redirect}"/>
                                </p:commandButton>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="100%"><p:spacer width="2"/></td>
                        </tr>
                        <tr>
                            <td colspan="5" align="center">
                                <p:dataTable id="businessInfoTable"
                                             var="bizInfoDetailx"
                                             value="#{bizInfoSummary.bizInfoDetailViewList}"
                                             rowKey="#{bizInfoDetail.bizComment}"
                                             rowIndexVar="rowIndex">

                                    <p:column headerText="" styleClass="center" style="width:25px;">
                                        <p:outputLabel value="#{rowIndex+1}"/>
                                    </p:column>
                                    <p:column headerText="#{msg.get('app.bizInfoSummary.table.column.business.bizCode')}" styleClass="center" style="width: 70px;">
                                        <p:outputLabel value="#{bizInfoDetailx.bizCode}"/>
                                    </p:column>
                                    <p:column headerText="#{msg.get('app.bizInfoSummary.table.column.business.bizType')}" styleClass="center" style="width: 100px;">
                                        <p:outputLabel value="#{bizInfoDetailx.bizType.name}"/>
                                    </p:column>
                                    <p:column headerText="#{msg.get('app.bizInfoSummary.table.column.business.bizGroup')}" styleClass="center" style="width: 100px;">
                                        <p:outputLabel value="#{bizInfoDetailx.bizGroup.name}"/>
                                    </p:column>
                                    <p:column headerText="#{msg.get('app.bizInfoSummary.table.column.business.bizDesc')}" styleClass="center" style="width: 140px;">
                                        <p:outputLabel value="#{bizInfoDetailx.bizDesc.name}"/>
                                    </p:column>
                                    <p:column headerText="#{msg.get('app.bizInfoSummary.table.column.business.incomeAmount')}" styleClass="right" style="width: 140px;">
                                        <p:outputLabel styleClass="right" value="#{bizInfoDetailx.buyerUWAdjustCreditTerm}" >
                                            <f:convertNumber pattern="#,##0"  minFractionDigits="2" maxFractionDigits="2"/>
                                        </p:outputLabel>
                                    </p:column>
                                    <p:column headerText="#{msg.get('app.bizInfoSummary.table.column.business.incomePercent')}" styleClass="right" style="width: 140px;">
                                        <p:outputLabel styleClass="right" value="#{bizInfoDetailx.percentBiz}">
                                            <f:convertNumber pattern="#,##0"  minFractionDigits="2" maxFractionDigits="2"/>
                                        </p:outputLabel>
                                    </p:column>
                                    <p:column headerText="#{msg.get('app.bizInfoSummary.table.column.business.incomeFactorPercent')}" styleClass="right" style="width: 100px;">
                                        <p:outputLabel styleClass="right" value="#{bizInfoDetailx.incomeFactor}">
                                            <f:convertNumber pattern="#,##0"  minFractionDigits="2" maxFractionDigits="2"/>
                                        </p:outputLabel>
                                    </p:column>
                                    <p:column headerText="#{msg.get('app.bizInfoSummary.table.column.business.InterviewedIncomeFactorPercent')}" styleClass="right" style="width: 100px;">
                                        <p:outputLabel styleClass="right" value="#{bizInfoDetailx.adjustedIncomeFactor}">
                                            <f:convertNumber pattern="#,##0"  minFractionDigits="2" maxFractionDigits="2"/>
                                        </p:outputLabel>
                                    </p:column>
                                    <p:column headerText="#{msg.get('app.bizInfoSummary.table.column.business.AR')}" styleClass="right" style="width: 50px;">
                                        <p:outputLabel styleClass="right"  value="#{bizInfoDetailx.bizDesc.ar}">
                                            <f:convertNumber pattern="#,##0"  minFractionDigits="2" maxFractionDigits="2"/>
                                        </p:outputLabel>
                                    </p:column>
                                    <p:column headerText="#{msg.get('app.bizInfoSummary.table.column.business.AP')}" styleClass="right" style="width: 50px;">
                                        <p:outputLabel styleClass="right" value="#{bizInfoDetailx.bizDesc.ap}">
                                            <f:convertNumber pattern="#,##0"  minFractionDigits="2" maxFractionDigits="2"/>
                                        </p:outputLabel>
                                    </p:column>
                                    <p:column headerText="#{msg.get('app.bizInfoSummary.table.column.business.INV')}" styleClass="right" style="width: 50px;">
                                        <p:outputLabel styleClass="right" value="#{bizInfoDetailx.bizDesc.inv}">
                                            <f:convertNumber pattern="#,##0"  minFractionDigits="2" maxFractionDigits="2"/>
                                        </p:outputLabel>
                                    </p:column>
                                    <p:column headerText="#{msg.get('app.bizInfoSummary.table.column.business.IndustryComment')}" styleClass="center" style="width: 100px;">
                                        <p:outputLabel value="#{bizInfoDetailx.bizComment}"/>
                                    </p:column>
                                    <p:column headerText="" styleClass="left" style="width:100px;">

                                        <p:commandButton icon="ui-icon-pencil"
                                                         title="Edit" process="@this"
                                                         oncomplete="confirmAddBizInfoDetailDlg.show()" >
                                            <f:setPropertyActionListener value="#{bizInfoDetailx}" target="#{bizInfoSummary.selectBizInfoDetailView}"/>
                                            <f:setPropertyActionListener value="viewDetail" target="#{bizInfoSummary.redirect}"/>
                                        </p:commandButton>

                                        <p:commandButton icon="ui-icon-trash" rendered="#{rowIndex!=0}"
                                                         title="Remove" process="@this"
                                                         oncomplete="confirmDeleteBizInfoDetailDlg.show();" >
                                            <f:setPropertyActionListener value="#{bizInfoDetailx}" target="#{bizInfoSummary.selectBizInfoDetailView}"/>
                                        </p:commandButton>
                                    </p:column>

                                    <p:columnGroup type="footer">
                                        <p:row>
                                            <p:column colspan="5" footerText="#{msg.get('app.bizInfoSummary.table.footer.sumIncomeAmount')}"
                                                      style="background-color:#f4f8b6; text-align:left;"/>

                                            <p:column footerText="#{bizInfoSummary.sumIncomeAmountDis}"
                                                      style="background-color:#f4f8b6; text-align:right;"/>

                                            <p:column footerText="#{bizInfoSummary.sumIncomePercent}"
                                                      style="background-color:#f4f8b6; text-align:right;"/>

                                            <p:column style="background-color:#f4f8b6;" colspan="7" />
                                        </p:row>
                                        <p:row>
                                            <p:column colspan="7" footerText="#{msg.get('app.bizInfoSummary.table.footer.sumWeight')}"
                                                        style="background-color:#f8d0b6;; text-align:left;"/>

                                            <p:column footerText="-"
                                                      style="background-color:#f8d0b6; text-align:right;"/>

                                            <p:column footerText="#{bizInfoSummary.sumWeightIntvIncomeFactor}"
                                                      style="background-color:#f8d0b6; text-align:right;">
                                            </p:column>

                                            <p:column footerText="#{bizInfoSummary.sumWeightAR}"
                                                      style="background-color:#f8d0b6; text-align:right;"/>

                                            <p:column footerText="#{bizInfoSummary.sumWeightAP}"
                                                      style="background-color:#f8d0b6; text-align:right;"/>

                                            <p:column footerText="#{bizInfoSummary.sumWeightINV}"
                                                      style="background-color:#f8d0b6; text-align:right;"/>

                                            <p:column footerText="-"
                                                      style="background-color:#f8d0b6; text-align:center;"/>

                                            <p:column style="background-color:#f8d0b6;"/>
                                        </p:row>
                                    </p:columnGroup>

                                </p:dataTable>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="5"><p:spacer width="2px"/></td>
                        </tr>
                        <tr>
                            <td colspan="5"><p:separator/></td>
                        </tr>
                        <tr>
                            <td colspan="5"><p:spacer width="2px"/></td>
                        </tr>
                        <tr>
                            <td colspan="5" class="center">
                                <p:commandButton id="btnAddBizInfoSummary" binding="#{addBizInfoSummary}"
                                                 value="#{msg.get('app.button.save')}"
                                                 process="@form"
                                                 update=":msgBoxSystemMessagePanel,:frmMain"
                                                 action="#{bizInfoSummary.onSaveBizInfoSummary()}"/>

                                <p:commandButton  value="#{msg.get('app.button.cancel')}" onclick="document.location.replace('bizInfoSummary.jsf')"/>
                            </td>
                        </tr>
                    </table>
                </div>

                <div class="bottom_line"></div>
            </div>
            <div class="clear"></div>
            <!-- Start Footer -->
            <ui:include src="include/footer.xhtml" />
            <!-- End Footer -->
        </div>
        </h:form>
    </p:panel>
        <ui:include src="dialog/confirmDeleteDlg.xhtml">
            <ui:param name="id" value="confirmDeleteBizInfoDetailDialog"/>
            <ui:param name="name" value="confirmDeleteBizInfoDetailDlg"/>
            <ui:param name="formId" value="frmConfirmDeleteBizInfoDetail"/>
            <ui:param name="controller" value="#{bizInfoSummary}"/>
            <ui:param name="action" value="onDeleteBizInfoToDB"/>
            <ui:param name="update" value=":frmMain"/>
        </ui:include>

    <p:panel id="msgBoxSystemMessagePanel" styleClass="panel">
        <p:confirmDialog id="msgBoxSystemMessageDialog" widgetVar="msgBoxSystemMessageDlg"
                         header="#{bizInfoSummary.messageHeader}" message="#{bizInfoSummary.message}" >
            <p:commandButton value="OK"
                             process="@this"
                             update="frmMain"
                             oncomplete="msgBoxSystemMessageDlg.hide()"/>
        </p:confirmDialog>
    </p:panel>

    <ui:include src="dialog/confirmChangeScreenDlg.xhtml">
        <ui:param name="headerMessage" value="คำเตือน"/>
        <ui:param name="message" value="เมื่อทำการเปลี่ยนหน้าจอ จะทำการบันทึกหน้าปัจจุบัน"/>
        <ui:param name="id" value="confirmAddBizInfoDetailDialog"/>
        <ui:param name="name" value="confirmAddBizInfoDetailDlg"/>
        <ui:param name="formId" value="frmConfirmAddBizInfoDetail"/>
        <ui:param name="controller" value="#{bizInfoSummary}"/>
        <ui:param name="action" value="onSaveBizInfoSummary"/>
        <ui:param name="redirectValue" value="#{bizInfoSummary.redirect}"/>
        <ui:param name="update" value=":msgBoxSystemMessagePanel,:frmMain"/>
    </ui:include>
    <p:blockUI block=":frmMain" trigger=":frmMain:btnAddBizInfoSummary">
        LOADING<br />
        <p:graphicImage value="/resources/images/shared/ajax-loader.gif"/>
    </p:blockUI>
    <p:blockUI block=":frmMain" trigger=":frmMain:btnAddBizInfoDetail">
        LOADING<br />
        <p:graphicImage value="/resources/images/shared/ajax-loader.gif"/>
    </p:blockUI>

    </h:body>
</f:view>
</html>
