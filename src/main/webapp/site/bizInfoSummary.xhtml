<!DOCTYPE html>
<html>
<f:view xmlns="http://www.w3.org/1999/xhtml"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:p="http://primefaces.org/ui"
        xmlns:clv="http://clevel.com/ui">

    <h:head>
        <title>Business Information Summary</title>
        <h:outputStylesheet name="css/style.css" />
        <h:outputScript library="js" name="custom.js" />
        <h:outputScript library="js" name="jquery.ui.datepicker.min.js" />
    </h:head>
    <h:body>
    <p:panel id="pnl_maincontainer" style="border:0; margin:0; padding: 0;">
        <h:form id="frmMain">
        <div id="main_container">
            <!-- Start Header Logo -->
            <ui:include src="include/header_logo.xhtml" />
            <!-- End Header Logo -->
            <!-- Start Header Detail -->
            <ui:include src="include/header_detail.xhtml" />
            <!-- End Header Detail -->
            <!-- Start Menu -->
            <ui:include src="include/menubar.xhtml" />
            <!-- End Menu -->
            <div id="content_container">
                <div id="content_name"><p:outputLabel value="#{msg.get('app.bizInfoSummary.header')}"/></div>
                <div id="content">
                    <div id="content_info">
                        <div id="content_trackchange">[ View Track Change ]</div>
                        <div id="content_lastupdate">Last update by <h:outputText value="#{bizInfoSummary.bizInfoSummaryView.modifyBy.userName}"/>, <h:outputText value="#{bizInfoSummary.bizInfoSummaryView.modifyDate}"/></div>
                    </div>
                    <div id="content_form">
                        <table class="content_table_form">
                        <tr>
                            <td class="title"><p:spacer width="2"/><h:outputText value="#{msg.get('app.bizInfoSummary.label.businessLocationDetail')}"/></td>
                        </tr>
                        <tr>
                            <td>
                                <table style="border-spacing: 0;" border="0">
                                    <tr>
                                        <td class="title" style="min-width: 210px; width: 210px; max-width: 210px;">
                                            <p:outputLabel value="#{msg.get('app.bizInfoSummary.label.businessLocationName')}" /> :
                                        </td>
                                        <td colspan="3"><p:inputText id="bizLocationName"
                                                                     style="width: 300px"
                                                                     value="#{bizInfoSummary.bizInfoSummaryView.bizLocationName}"
                                                                     required="#{not empty param[addBizInfoSummary.clientId]}"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="title"><p:outputLabel value="#{msg.get('app.bizInfoSummary.label.isRental')}"/> : </td>
                                        <td style="min-width: 180px; width: 180px; max-width: 180px;" colspan="3">
                                            <p:selectOneRadio id="isRentRadio" value="#{bizInfoSummary.bizInfoSummaryView.rental}" layout="custom" required="#{not empty param[addBizInfoSummary.clientId]}">
                                                <f:selectItem itemLabel="No"  itemValue="0" />
                                                <f:selectItem itemLabel="Yes" itemValue="1" />
                                                <p:ajax process="@this" update=":frmMain:ownerName,:frmMain:expiryDate" listener="#{bizInfoSummary.onChangeRental}"/>
                                            </p:selectOneRadio>
                                            <p:radioButton id="Peropt1" for="isRentRadio" itemIndex="0"/> <p:spacer width="8px" />
                                            <h:outputLabel for="Peropt1" value="No" /><p:spacer width="20px" />
                                            <p:outputLabel value="#{msg.get('app.bizInfoSummary.label.ownerName')}" styleClass="title left"/> : <p:spacer width="2"/>
                                            <p:inputText id="ownerName" value="#{bizInfoSummary.bizInfoSummaryView.ownerName}" disabled="#{bizInfoSummary.disableOwnerName}" required="#{!bizInfoSummary.disableOwnerName and not empty param[addBizInfoSummary.clientId]}"/>
                                        </td>
                                        <!--<td class="title left" style="min-width: 157px; width: 157px; max-width: 157px;">-->
                                            <!--<p:outputLabel value="#{msg.get('app.bizInfoSummary.label.ownerName')}"/> :-->
                                        <!--</td>-->
                                        <!--<td>-->
                                            <!--<p:spacer width="2"/><p:inputText id="ownerName" value="#{bizInfoSummary.bizInfoSummaryView.ownerName}" disabled="#{bizInfoSummary.disableOwnerName}" required="#{!bizInfoSummary.disableOwnerName and not empty param[addBizInfoSummary.clientId]}"/>-->
                                        <!--</td>-->
                                    </tr>
                                    <tr>
                                        <td></td>
                                        <td colspan="3">
                                            <p:radioButton id="Peropt2" for="isRentRadio" itemIndex="1"/> <p:spacer width="8px" />
                                            <h:outputLabel for="Peropt2" value="Yes" /><p:spacer width="15px" />
                                            <p:outputLabel value="#{msg.get('app.bizInfoSummary.label.expiryDate')}" styleClass="title left"/> :
                                            <clv:BECalendar id="expiryDate" showOn="button" navigator="true" locale="th_TH"
                                                            value="#{bizInfoSummary.bizInfoSummaryView.expiryDate}"
                                                            disabled="#{bizInfoSummary.disableExpiryDate}" required="#{!bizInfoSummary.disableExpiryDate and not empty param[addBizInfoSummary.clientId]}"
                                                            yearRange="1950:2100"
                                                            defaultdate="#{bizInfoSummary.currentDateDDMMYY}"
                                                            mindate="#{bizInfoSummary.currentDateDDMMYY}"
                                                            showButtonPanel="true"
                                                            pattern="dd/MM/yyyy">
                                            </clv:BECalendar>
                                        </td>
                                        <!--<td class="title left">-->
                                            <!--<p:outputLabel value="#{msg.get('app.bizInfoSummary.label.expiryDate')}"/> :-->
                                        <!--</td>-->
                                        <!--<td class="title">-->
                                            <!--<clv:BECalendar id="expiryDate" showOn="button" navigator="true" locale="th_TH"-->
                                                            <!--value="#{bizInfoSummary.bizInfoSummaryView.expiryDate}"-->
                                                            <!--disabled="#{bizInfoSummary.disableExpiryDate}" required="#{!bizInfoSummary.disableExpiryDate and not empty param[addBizInfoSummary.clientId]}"-->
                                                            <!--yearRange="1950:2100"-->
                                                            <!--defaultdate="#{bizInfoSummary.currentDateDDMMYY}"-->
                                                            <!--mindate="#{bizInfoSummary.currentDateDDMMYY}"-->
                                                            <!--showButtonPanel="true"-->
                                                            <!--pattern="dd/MM/yyyy">-->
                                            <!--</clv:BECalendar>-->
                                        <!--</td>-->
                                    </tr>
                                    <tr>
                                        <td class="title" style="vertical-align: top;"><p:outputLabel value="#{msg.get('app.bizInfoSummary.label.bizLocationAddress')}"/> : </td>
                                        <td colspan="3">
                                            <table style="border-spacing: 0;">
                                                <tr>
                                                    <td class="left title" style="min-width: 115px; width: 115px; max-width: 115px;"><p:outputLabel value="#{msg.get('app.bizInfoSummary.label.addressNo')}" /> : </td>
                                                    <td class="left" colspan="3"><p:inputText styleClass="medium" style="width: 140px;" id="addressNo" onkeydown="return onKeyDownHomeNo(event);"
                                                                                              onkeypress="return onKeyPressHomeNo(event);" value="#{bizInfoSummary.bizInfoSummaryView.addressNo}"
                                                                                              required="#{not empty param[addBizInfoSummary.clientId]}"/>
                                                        <p:spacer width="35" height="5" />
                                                        <p:outputLabel value="#{msg.get('app.bizInfoSummary.label.addressMoo')} :" styleClass="title" for="addressMoo"/>
                                                        <p:spacer width="5" height="5"/>
                                                        <p:inputText styleClass="smaller" id="addressMoo" onkeydown="return onKeyDownHomeNo(event);" onkeypress="return onKeyPressHomeNo(event);"
                                                                     value="#{bizInfoSummary.bizInfoSummaryView.addressMoo}"/>
                                                        <p:spacer width="22" height="5"/>
                                                        <p:outputLabel value="#{msg.get('app.bizInfoSummary.label.addressBuilding')} :" styleClass="title" for="addressBuilding"/>
                                                        <p:spacer width="5" height="5"/>
                                                        <p:inputText styleClass="larger" id="addressBuilding" value="#{bizInfoSummary.bizInfoSummaryView.addressBuilding}" />
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td class="title left"><p:outputLabel value="#{msg.get('app.bizInfoSummary.label.addressStreet')}" for="addressStreet"/> :</td>
                                                    <td class="left" colspan="3">
                                                        <p:inputText style="width: 608px;" id="addressStreet"
                                                                     value="#{bizInfoSummary.bizInfoSummaryView.addressStreet}" />
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td></td>
                                                    <td>
                                                        <p:selectOneMenu id="provinceCode" size="1" style="min-width: 200px; width: 200px; max-width: 200px;"
                                                                         value="#{bizInfoSummary.bizInfoSummaryView.province.code}"
                                                                         required="#{not empty param[addBizInfoSummary.clientId]}" >
                                                            <f:selectItem itemLabel="- Please Select -" itemValue=""/>
                                                            <f:selectItems value="#{bizInfoSummary.provinceList}"
                                                                           var="province"
                                                                           itemLabel="#{province.name}"
                                                                           itemValue="#{province.code}"/>
                                                            <p:ajax listener="#{bizInfoSummary.onChangeProvince}"
                                                                    update=":frmMain:districtCode,:frmMain:subDistrictCode,:frmMain:provinceCode"/>
                                                        </p:selectOneMenu>
                                                    </td>
                                                    <td>
                                                        <p:selectOneMenu  id="districtCode" size="1" style="min-width: 200px; width: 200px; max-width: 200px;"
                                                                          value="#{bizInfoSummary.bizInfoSummaryView.district.id}"
                                                                          required="#{not empty param[addBizInfoSummary.clientId]}" >
                                                            <f:selectItem itemLabel="- Please Select -" itemValue=""/>
                                                            <f:selectItems value="#{bizInfoSummary.districtList}"
                                                                           var="district"
                                                                           itemLabel="#{district.name}"
                                                                           itemValue="#{district.id}"/>
                                                            <p:ajax listener="#{bizInfoSummary.onChangeDistrict()}" update=":frmMain:subDistrictCode,:frmMain:districtCode"/>
                                                        </p:selectOneMenu>
                                                    </td>
                                                    <td>
                                                        <p:selectOneMenu  id="subDistrictCode" size="1" style="min-width: 200px; width: 200px; max-width: 200px;"
                                                                          value="#{bizInfoSummary.bizInfoSummaryView.subDistrict.code}"
                                                                          required="#{not empty param[addBizInfoSummary.clientId]}" onchange="event">
                                                            <f:selectItem itemLabel="- Please Select -" itemValue=""/>
                                                            <f:selectItems value="#{bizInfoSummary.subDistrictList}"
                                                                           var="subDistrict"
                                                                           itemLabel="#{subDistrict.name}"
                                                                           itemValue="#{subDistrict.code}"/>
                                                            <p:ajax event="change" update=":frmMain:subDistrictCode"/>
                                                        </p:selectOneMenu>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td class="title"><p:outputLabel value="#{msg.get('app.bizInfoSummary.label.postCode')}"/> :</td>
                                                    <td colspan="3"><p:inputMask mask="99999" styleClass="medium" id="posCode" value="#{bizInfoSummary.bizInfoSummaryView.postCode}" required="#{not empty param[addBizInfoSummary.clientId] }"/></td>
                                                </tr>
                                                <tr>
                                                    <td class="title"><p:outputLabel value="#{msg.get('app.bizInfoSummary.label.country')}"/> :</td>
                                                    <td colspan="3">
                                                        <p:selectOneMenu  id="countryId" style="min-width: 200px; width: 200px; max-width: 200px;"
                                                                          value="#{bizInfoSummary.bizInfoSummaryView.country.id}"
                                                                          required="#{not empty param[addBizInfoSummary.clientId]}" >
                                                            <f:selectItem itemLabel="- Please Select -" itemValue=""/>
                                                            <f:selectItems value="#{bizInfoSummary.countryList}"
                                                                           var="country"
                                                                           itemLabel="#{country.name}"
                                                                           itemValue="#{country.id}"/>
                                                        </p:selectOneMenu>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td class="title"><p:outputLabel value="#{msg.get('app.bizInfoSummary.label.AddressEN')}"/> :</td>
                                                    <td colspan="3"><p:inputText style="width: 608px;" id="addressEng"
                                                                                 value="#{bizInfoSummary.bizInfoSummaryView.addressEng}" /></td>
                                                </tr>
                                            </table>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="title"><p:outputLabel value="#{msg.get('app.bizInfoSummary.label.phoneNo')}"/> : </td>
                                        <td colspan="3">
                                            <p:inputText styleClass="large" id="phoneNo" value="#{bizInfoSummary.bizInfoSummaryView.phoneNo}"
                                                         onkeydown="return onKeyDownTelNo(event);" onkeypress="return onKeyPressTelNo(event);"
                                                         required="#{not empty param[addBizInfoSummary.clientId]}" />
                                            <p:spacer width="20" height="5" />
                                            <p:outputLabel value="#{msg.get('app.bizInfoSummary.label.extension')}" styleClass="title" for="extension"/>
                                            <p:spacer width="20" height="5"></p:spacer>
                                            <p:inputText styleClass="smaller" id="extension" onkeydown="return onKeyDownTelNo(event);" onkeypress="return onKeyPressTelNo(event);"
                                                         value="#{bizInfoSummary.bizInfoSummaryView.extension}"  />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td colspan="4"><p:spacer width="5"/></td>
                                    </tr>
                                    <tr>
                                        <td colspan="4" class="title">
                                            <h:outputLabel value="#{msg.get('app.bizInfoSummary.label.businessPeriod')}"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="title">
                                            <h:outputLabel  class="title" value="#{msg.get('app.bizInfoSummary.label.registrationDate')}"/> :
                                        </td>
                                        <td colspan="3">
                                            <clv:BECalendar id="registrationDate" showOn="button" navigator="true" locale="th_TH"
                                                            value="#{bizInfoSummary.bizInfoSummaryView.registrationDate}"
                                                            yearRange="1950:2100"
                                                            pattern="dd/MM/yyyy"
                                                            mindate="01/01/1950"
                                                            showButtonPanel="true"
                                                            defaultdate="#{bizInfoSummary.currentDateDDMMYY}"
                                                            maxdate="#{bizInfoSummary.currentDateDDMMYY}">
                                            </clv:BECalendar>
                                        </td>
                                    </tr>
                                    <tr >
                                        <td class="title">
                                            <h:outputLabel  class="title" value="#{msg.get('app.bizInfoSummary.label.establishDate')}"/> :
                                        </td>
                                        <td style="width: 180px">
                                            <clv:BECalendar id="establishDate" showOn="button" navigator="true" locale="th_TH"
                                                            value="#{bizInfoSummary.bizInfoSummaryView.establishDate}"
                                                            yearRange="1950:2100"
                                                            pattern="dd/MM/yyyy"
                                                            showButtonPanel="true"
                                                            defaultdate="#{bizInfoSummary.currentDateDDMMYY}"
                                                            mindate="01/01/1950"
                                                            maxdate="#{bizInfoSummary.currentDateDDMMYY}">
                                            </clv:BECalendar>
                                        </td>
                                        <td class="title left" style="width: 70px">
                                            <h:outputLabel  class="title" value="#{msg.get('app.bizInfoSummary.label.referredExp')}"/> :
                                        </td>
                                        <td>
                                            <p:selectOneMenu  size="1"  value="#{bizInfoSummary.bizInfoSummaryView.referredExperience.id}" required="#{not empty param[addBizInfoSummary.clientId]}"
                                                              id="referExpId">
                                                <f:selectItem itemLabel="- Please Select -" itemValue=""/>
                                                <f:selectItems value="#{bizInfoSummary.referredExperienceList}"
                                                               var="referExp"
                                                               itemLabel="#{referExp.description}"
                                                               itemValue="#{referExp.id}"/>
                                            </p:selectOneMenu>
                                        </td>
                                    </tr>
                                </table>
                            </td>
                        </tr>
                        <tr>
                            <td><p:spacer width="2px"/></td>
                        </tr>
                        <tr>
                            <td><p:separator/></td>
                        </tr>
                        <tr>
                            <td class="left title">
                                <p:spacer width="2"/><h:outputText value="#{msg.get('app.bizInfoSummary.label.bizInterviewInfo')}"/>
                            </td>
                        </tr>
                        <tr>
                            <td class="left title">
                                <table class="table_content" style="padding: 0%" >
                                    <tr>
                                        <th>
                                            <h:outputLabel value="#{msg.get('app.bizInfoSummary.table.column.list')}"/>
                                        </th>
                                        <th>
                                            <h:outputLabel value="#{msg.get('app.bizInfoSummary.table.column.amount')}"/>
                                        </th>
                                        <th>
                                            <h:outputLabel value="#{msg.get('app.bizInfoSummary.table.column.percent')}"/>
                                        </th>
                                    </tr>
                                    <tr>
                                        <td>
                                            <h:outputLabel value="#{msg.get('app.bizInfoSummary.label.circulation')}"/>
                                        </td>
                                        <td>
                                            <p:inputText id="circulationAmount" styleClass="right" value="#{bizInfoSummary.bizInfoSummaryView.circulationAmount}" readonly="true"
                                                         required="#{not empty param[addBizInfoSummary.clientId] }">
                                                <f:convertNumber pattern="#,##0" minFractionDigits="2" maxFractionDigits="2"  />
                                                <p:ajax event="blur" update=":frmMain:circulationAmount"/>
                                            </p:inputText>
                                        </td>
                                        <td>
                                            <p:inputText id="circulationPercentage" styleClass="right" value="#{bizInfoSummary.bizInfoSummaryView.circulationPercentage}" readonly="true"
                                                         required="#{not empty param[addBizInfoSummary.clientId] }">
                                                <f:convertNumber pattern="#,##0"  minFractionDigits="2" maxFractionDigits="2" />
                                                <p:ajax event="blur" update=":frmMain:circulationPercentage"/>
                                            </p:inputText>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="title" >
                                            <h:outputLabel value="#{msg.get('app.bizInfoSummary.label.productionCosts')}"/>
                                        </td>
                                        <td>
                                            <p:inputText id="productionCostsAmount" styleClass="right" value="#{bizInfoSummary.bizInfoSummaryView.productionCostsAmount}"
                                                         onkeydown="return onKeyDownMoney(event);"
                                                         onkeypress="return onKeyPressMoney(event)" readonly="true"
                                                         required="#{not empty param[addBizInfoSummary.clientId] }">
                                                <f:convertNumber pattern="#,##0" minFractionDigits="2" maxFractionDigits="2" />
                                                <p:ajax event="blur" update=":frmMain:productionCostsAmount"/>
                                            </p:inputText>
                                        </td>
                                        <td>
                                            <p:inputText id="productionCostsPercentage" styleClass="right"
                                                         onkeydown="return onKeyDownMoney(event);" onkeypress="return onKeyPressMoney(event);"
                                                         value="#{bizInfoSummary.bizInfoSummaryView.productionCostsPercentage}"
                                                         required="#{not empty param[addBizInfoSummary.clientId] }">
                                                <!--readonly="#{bizInfoSummary.readonlyInterview}"-->
                                                <f:convertNumber pattern="##0.00"  minFractionDigits="2" maxFractionDigits="2" maxIntegerDigits="3"  />
                                                <f:validateDoubleRange maximum="100"/>
                                                <p:ajax event="blur" update=":frmMain" listener="#{bizInfoSummary.onCalSummaryTable}" />
                                            </p:inputText>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="title" >
                                            <h:outputLabel value="#{msg.get('app.bizInfoSummary.label.profitMargin')}"/>
                                        </td>
                                        <td>
                                            <p:inputText id="profitMarginAmount" styleClass="right" value="#{bizInfoSummary.bizInfoSummaryView.profitMarginAmount}"
                                                         onkeydown="return onKeyDownMoney(event);"
                                                         onkeypress="return onKeyPressMoney(event)" readonly="true"
                                                         required="#{not empty param[addBizInfoSummary.clientId] }">
                                                <f:convertNumber pattern="#,##0" minFractionDigits="2" maxFractionDigits="2"  />
                                                <p:ajax event="blur" update=":frmMain:profitMarginAmount"/>
                                            </p:inputText>
                                        </td>
                                        <td>
                                            <p:inputText id="profitMarginPercentage" styleClass="right" value="#{bizInfoSummary.bizInfoSummaryView.profitMarginPercentage}"
                                                         onkeydown="return onKeyDownMoney(event);" onkeypress="return onKeyPressMoney(event);" readonly="true"
                                                         required="#{not empty param[addBizInfoSummary.clientId] }">
                                                <f:convertNumber pattern="##0.00"  minFractionDigits="2" maxFractionDigits="2" maxIntegerDigits="3"  />
                                                <f:validateDoubleRange maximum="100"/>
                                                <p:ajax event="blur" update=":frmMain:profitMarginPercentage"/>
                                            </p:inputText>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="title" >
                                            <h:outputLabel value="#{msg.get('app.bizInfoSummary.label.operatingExpense')}"/>
                                        </td>
                                        <td>
                                            <p:inputText id="operatingExpenseAmount" styleClass="right"
                                                         onkeydown="return onKeyDownMoney(event);" onkeypress="return onKeyPressMoney(event);"
                                                         value="#{bizInfoSummary.bizInfoSummaryView.operatingExpenseAmount}"
                                                         required="#{not empty param[addBizInfoSummary.clientId] }">
                                                <!--readonly="#{bizInfoSummary.readonlyInterview}"-->
                                                <f:convertNumber pattern="#,##0" minFractionDigits="2"  maxFractionDigits="2"  />
                                                <p:ajax event="blur" update=":msgBoxSystemMessagePanel,:frmMain" listener="#{bizInfoSummary.onCalSummaryTable}" />
                                            </p:inputText>
                                        </td>
                                        <td>
                                            <p:inputText id="operatingExpensePercentage" styleClass="right" value="#{bizInfoSummary.bizInfoSummaryView.operatingExpensePercentage}"
                                                         onkeydown="return onKeyDownMoney(event);"
                                                         onkeypress="return onKeyPressMoney(event)" readonly="true"
                                                         required="#{not empty param[addBizInfoSummary.clientId] }">
                                                <f:convertNumber pattern="##0.00"  minFractionDigits="2" maxFractionDigits="2" maxIntegerDigits="3"  />
                                                <f:validateDoubleRange maximum="100"/>
                                                <p:ajax event="blur" update=":frmMain:operatingExpensePercentage"/>
                                            </p:inputText>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="title" >
                                            <h:outputLabel value="#{msg.get('app.bizInfoSummary.label.earningsBeforeTax')}"/>
                                        </td>
                                        <td>
                                            <p:inputText id="earningsBeforeTaxAmount" styleClass="right"
                                                         value="#{bizInfoSummary.bizInfoSummaryView.earningsBeforeTaxAmount}"
                                                         onkeydown="return onKeyDownMoney(event);"
                                                         onkeypress="return onKeyPressMoney(event)" readonly="true"
                                                         required="#{not empty param[addBizInfoSummary.clientId] }">
                                                <f:convertNumber pattern="#,##0"  minFractionDigits="2" maxFractionDigits="2"  />
                                                <p:ajax event="blur" update=":frmMain:earningsBeforeTaxAmount"/>
                                            </p:inputText>
                                        </td>
                                        <td>
                                            <p:inputText id="earningsBeforeTaxPercentage" styleClass="right" value="#{bizInfoSummary.bizInfoSummaryView.earningsBeforeTaxPercentage}"
                                                         onkeydown="return onKeyDownMoney(event);"
                                                         onkeypress="return onKeyPressMoney(event)" readonly="true">
                                                <f:convertNumber pattern="##0.00"  minFractionDigits="2" maxFractionDigits="2" maxIntegerDigits="3"  />
                                                <f:validateDoubleRange maximum="100"/>
                                                <p:ajax event="blur" update=":frmMain:earningsBeforeTaxPercentage"/>
                                            </p:inputText>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="title" >
                                            <h:outputLabel value="#{msg.get('app.bizInfoSummary.label.reduceInterest')}"/>
                                        </td>
                                        <td>
                                            <p:inputText id="reduceInterestAmount" styleClass="right"
                                                         onkeydown="return onKeyDownMoney(event);" onkeypress="return onKeyPressMoney(event);" maxlength="18"
                                                         value="#{bizInfoSummary.bizInfoSummaryView.reduceInterestAmount}"
                                                         required="#{not empty param[addBizInfoSummary.clientId] }">
                                                <!--readonly="#{bizInfoSummary.readonlyInterview}"-->
                                                <f:convertNumber pattern="#,##0" minFractionDigits="2"  maxFractionDigits="2"  />
                                                <p:ajax event="blur" update=":msgBoxSystemMessagePanel,:frmMain" listener="#{bizInfoSummary.onCalSummaryTable}" />
                                            </p:inputText>
                                        </td>
                                        <td>
                                            <p:inputText id="reduceInterestPercentage" styleClass="right" value="#{bizInfoSummary.bizInfoSummaryView.reduceInterestPercentage}"
                                                         onkeydown="return onKeyDownMoney(event);"
                                                         onkeypress="return onKeyPressMoney(event)" readonly="true"
                                                         required="#{not empty param[addBizInfoSummary.clientId] }">
                                                <f:convertNumber pattern="##0.00"  minFractionDigits="2" maxFractionDigits="2" maxIntegerDigits="3"  />
                                                <f:validateDoubleRange maximum="100"/>
                                                <p:ajax event="blur" update=":frmMain:reduceInterestPercentage"/>
                                            </p:inputText>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="title" >
                                            <h:outputLabel value="#{msg.get('app.bizInfoSummary.label.reduceTax')}"/>
                                        </td>
                                        <td>
                                            <p:inputText id="reduceTaxAmount" styleClass="right"
                                                         onkeydown="return onKeyDownMoney(event);" onkeypress="return onKeyPressMoney(event);" maxlength="18"
                                                         value="#{bizInfoSummary.bizInfoSummaryView.reduceTaxAmount}"
                                                         required="#{not empty param[addBizInfoSummary.clientId] }">
                                                <!--readonly="#{bizInfoSummary.readonlyInterview}"-->
                                                <f:convertNumber pattern="#,##0" minFractionDigits="2"  maxFractionDigits="2" />
                                                <p:ajax event="blur" update=":msgBoxSystemMessagePanel,:frmMain" listener="#{bizInfoSummary.onCalSummaryTable}" />
                                            </p:inputText>
                                        </td>
                                        <td>
                                            <p:inputText id="reduceTaxPercentage" styleClass="right" value="#{bizInfoSummary.bizInfoSummaryView.reduceTaxPercentage}"
                                                         onkeydown="return onKeyDownMoney(event);"
                                                         onkeypress="return onKeyPressMoney(event)" readonly="true"
                                                         required="#{not empty param[addBizInfoSummary.clientId] }">
                                                <f:convertNumber pattern="##0.00"  minFractionDigits="2" maxFractionDigits="2" maxIntegerDigits="3"  />
                                                <f:validateDoubleRange maximum="100"/>
                                                <p:ajax event="blur" update=":frmMain:reduceTaxPercentage" />
                                            </p:inputText>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="title" >
                                            <h:outputLabel value="#{msg.get('app.bizInfoSummary.label.netMargin')}"/>
                                        </td>
                                        <td>
                                            <p:inputText id="netMarginAmount" styleClass="right" value="#{bizInfoSummary.bizInfoSummaryView.netMarginAmount}"
                                                         onkeydown="return onKeyDownMoney(event);"
                                                         onkeypress="return onKeyPressMoney(event)" readonly="true"
                                                         required="#{not empty param[addBizInfoSummary.clientId] }">
                                                <f:convertNumber pattern="#,##0"  minFractionDigits="2" maxFractionDigits="2" />
                                                <p:ajax event="blur" update=":frmMain:netMarginAmount"/>
                                            </p:inputText>
                                        </td>
                                        <td>
                                            <p:inputText id="netMarginPercentage" styleClass="right" value="#{bizInfoSummary.bizInfoSummaryView.netMarginPercentage}"
                                                         onkeydown="return onKeyDownMoney(event);"
                                                         onkeypress="return onKeyPressMoney(event)" readonly="true"
                                                         required="#{not empty param[addBizInfoSummary.clientId] }">
                                                <f:convertNumber pattern="##0.00"  minFractionDigits="2" maxFractionDigits="2" maxIntegerDigits="3"  />
                                                <f:validateDoubleRange maximum="100"/>
                                                <p:ajax event="blur" update=":frmMain:netMarginPercentage"/>
                                            </p:inputText>
                                        </td>
                                    </tr>
                                </table>
                            </td>
                        </tr>
                        <tr>
                            <td><p:spacer width="2px"/></td>
                        </tr>
                        <tr>
                            <td>
                                <table style="border-spacing: 0;">
                                <tr>
                                    <td class="title" style="min-width: 210px; width: 210px; max-width: 210px;">
                                        <p:outputLabel value="#{msg.get('app.bizInfoSummary.label.netFixAsset')}"/> :
                                    </td>
                                    <td class="left">
                                        <p:inputText id="netFixAsset" styleClass="right" value="#{bizInfoSummary.bizInfoSummaryView.netFixAsset}"
                                                     onkeydown="return onKeyDownMoney(event);" onkeypress="return onKeyPressMoney(event);" maxlength="18"
                                                     required="#{not empty param[addBizInfoSummary.clientId]}">
                                            <f:convertNumber pattern="#,##0" minFractionDigits="2" maxFractionDigits="2" />
                                            <p:ajax event="blur" update=":frmMain:netFixAsset"/>
                                        </p:inputText>
                                        <p:spacer width="10px"/>
                                        <h:outputLabel value="#{msg.get('app.bizInfoSummary.label.money.unit')}"/>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="left title">
                                        <p:outputLabel value="#{msg.get('app.bizInfoSummary.label.noOfEmployee')}"/> :
                                    </td>
                                    <td class="left">
                                        <p:inputText id="noOfEmployee" styleClass="right"
                                                     onkeydown="return onKeyDownNumber(event);" onkeypress="return onKeyPressNumber(event);"
                                                     value="#{bizInfoSummary.bizInfoSummaryView.noOfEmployee}" required="#{not empty param[addBizInfoSummary.clientId] }">
                                            <f:convertNumber pattern="#,##0" integerOnly="true"/>
                                            <p:ajax event="blur" update=":frmMain:noOfEmployee"/>
                                        </p:inputText>
                                        <p:spacer width="10px"/>
                                        <h:outputLabel value="#{msg.get('app.bizInfoSummary.label.labor.unit')}"/>
                                    </td>
                                </tr>
                                </table>
                            </td>
                        </tr>
                        <tr>
                            <td><p:spacer width="2px"/></td>
                        </tr>
                        <tr>
                            <td><p:separator/></td>
                        </tr>
                        <tr>
                            <td><p:spacer width="2px"/></td>
                        </tr>
                        <tr>
                            <td class="left">
                                <p:commandButton id="btnAddBizInfoDetail" styleClass="medium" binding="#{addBizInfoDetail}"
                                                 value="#{msg.get('app.button.add')}"
                                                 oncomplete="confirmAddBizInfoDetailDlg.show()"
                                                 process="@this"
                                                 update="frmMain"
                                        >
                                    <f:setPropertyActionListener value="addDetail" target="#{bizInfoSummary.redirect}"/>
                                </p:commandButton>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <p:dataTable id="businessInfoTable"
                                             var="bizInfoDetailx"
                                             value="#{bizInfoSummary.bizInfoDetailViewList}"
                                             rowKey="#{bizInfoDetail.bizComment}"
                                             rowIndexVar="rowIndex">

                                    <p:column headerText="" styleClass="center" style="width:25px;">
                                        <p:outputLabel value="#{rowIndex+1}"/>
                                    </p:column>
                                    <p:column headerText="#{msg.get('app.bizInfoSummary.table.column.business.bizCode')}" styleClass="center" style="width: 70px;">
                                        <p:outputLabel value="#{bizInfoDetailx.bizCode}"/>
                                    </p:column>
                                    <p:column headerText="#{msg.get('app.bizInfoSummary.table.column.business.bizType')}" styleClass="center" style="width: 100px;">
                                        <p:outputLabel value="#{bizInfoDetailx.bizType.name}"/>
                                    </p:column>
                                    <p:column headerText="#{msg.get('app.bizInfoSummary.table.column.business.bizGroup')}" styleClass="center" style="width: 100px;">
                                        <p:outputLabel value="#{bizInfoDetailx.bizGroup.name}"/>
                                    </p:column>
                                    <p:column headerText="#{msg.get('app.bizInfoSummary.table.column.business.bizDesc')}" styleClass="center" style="width: 140px;">
                                        <p:outputLabel value="#{bizInfoDetailx.bizDesc.name}"/>
                                    </p:column>
                                    <p:column headerText="#{msg.get('app.bizInfoSummary.table.column.business.incomeAmount')}" styleClass="right" style="width: 140px;">
                                        <p:outputLabel styleClass="right" value="#{bizInfoDetailx.incomeAmount}" >
                                            <f:convertNumber pattern="#,##0"  minFractionDigits="2" maxFractionDigits="2"/>
                                        </p:outputLabel>
                                    </p:column>
                                    <p:column headerText="#{msg.get('app.bizInfoSummary.table.column.business.incomePercent')}" styleClass="right" style="width: 140px;">
                                        <p:outputLabel styleClass="right" value="#{bizInfoDetailx.percentBiz}">
                                            <f:convertNumber pattern="#,##0"  minFractionDigits="2" maxFractionDigits="2"/>
                                        </p:outputLabel>
                                    </p:column>
                                    <p:column headerText="#{msg.get('app.bizInfoSummary.table.column.business.incomeFactorPercent')}" styleClass="right" style="width: 100px;">
                                        <p:outputLabel styleClass="right" value="#{bizInfoDetailx.incomeFactor}">
                                            <f:convertNumber pattern="#,##0"  minFractionDigits="2" maxFractionDigits="2"/>
                                        </p:outputLabel>
                                    </p:column>
                                    <p:column headerText="#{msg.get('app.bizInfoSummary.table.column.business.InterviewedIncomeFactorPercent')}" styleClass="right" style="width: 100px;">
                                        <p:outputLabel styleClass="right" value="#{bizInfoDetailx.adjustedIncomeFactor}">
                                            <f:convertNumber pattern="#,##0"  minFractionDigits="2" maxFractionDigits="2"/>
                                        </p:outputLabel>
                                    </p:column>
                                    <p:column headerText="#{msg.get('app.bizInfoSummary.table.column.business.AR')}" styleClass="right" style="width: 50px;">
                                        <p:outputLabel styleClass="right"  value="#{bizInfoDetailx.bizDesc.ar}">
                                            <f:convertNumber pattern="#,##0"  minFractionDigits="2" maxFractionDigits="2"/>
                                        </p:outputLabel>
                                    </p:column>
                                    <p:column headerText="#{msg.get('app.bizInfoSummary.table.column.business.AP')}" styleClass="right" style="width: 50px;">
                                        <p:outputLabel styleClass="right" value="#{bizInfoDetailx.bizDesc.ap}">
                                            <f:convertNumber pattern="#,##0"  minFractionDigits="2" maxFractionDigits="2"/>
                                        </p:outputLabel>
                                    </p:column>
                                    <p:column headerText="#{msg.get('app.bizInfoSummary.table.column.business.INV')}" styleClass="right" style="width: 50px;">
                                        <p:outputLabel styleClass="right" value="#{bizInfoDetailx.bizDesc.inv}">
                                            <f:convertNumber pattern="#,##0"  minFractionDigits="2" maxFractionDigits="2"/>
                                        </p:outputLabel>
                                    </p:column>
                                    <p:column headerText="#{msg.get('app.bizInfoSummary.table.column.business.IndustryComment')}" styleClass="center" style="width: 100px;">
                                        <p:outputLabel value="#{bizInfoDetailx.bizComment}"/>
                                    </p:column>
                                    <p:column headerText="" styleClass="left" style="width:100px;">

                                        <p:commandButton icon="ui-icon-pencil"
                                                         title="Edit" process="@this"
                                                         oncomplete="confirmAddBizInfoDetailDlg.show()" >
                                            <f:setPropertyActionListener value="#{bizInfoDetailx}" target="#{bizInfoSummary.selectBizInfoDetailView}"/>
                                            <f:setPropertyActionListener value="viewDetail" target="#{bizInfoSummary.redirect}"/>
                                        </p:commandButton>

                                        <p:commandButton icon="ui-icon-trash" rendered="#{rowIndex!=0}"
                                                         title="Remove" process="@this"
                                                         oncomplete="confirmDeleteBizInfoDetailDlg.show();" >
                                            <f:setPropertyActionListener value="#{bizInfoDetailx}" target="#{bizInfoSummary.selectBizInfoDetailView}"/>
                                        </p:commandButton>
                                    </p:column>

                                    <p:columnGroup type="footer">
                                        <p:row>
                                            <p:column colspan="5" footerText="#{msg.get('app.bizInfoSummary.table.footer.sumIncomeAmount')}"
                                                      style="background-color:#f4f8b6; text-align:left;">
                                            </p:column>

                                            <p:column style="background-color:#f4f8b6; text-align:right;">
                                                <f:facet name="footer">
                                                    <p:outputLabel value="#{bizInfoSummary.bizInfoSummaryView.sumIncomeAmount}">
                                                        <f:convertNumber pattern="#,##0"  minFractionDigits="2" maxFractionDigits="2"/>
                                                     </p:outputLabel>
                                                </f:facet>
                                             </p:column>
                                            <p:column style="background-color:#f4f8b6; text-align:right;">
                                                <f:facet name="footer">
                                                    <p:outputLabel value="#{bizInfoSummary.bizInfoSummaryView.sumIncomePercent}">
                                                        <f:convertNumber pattern="#,##0"  minFractionDigits="2" maxFractionDigits="2"/>
                                                    </p:outputLabel>
                                                </f:facet>
                                            </p:column>

                                            <p:column style="background-color:#f4f8b6;" colspan="7" />
                                        </p:row>
                                        <p:row>
                                            <p:column colspan="7" footerText="#{msg.get('app.bizInfoSummary.table.footer.sumWeight')}"
                                                      style="background-color:#f8d0b6;; text-align:left;"/>

                                            <p:column footerText="-"
                                                      style="background-color:#f8d0b6; text-align:right;">

                                            </p:column>

                                            <p:column
                                                      style="background-color:#f8d0b6; text-align:right;">
                                                <f:facet name="footer">
                                                    <p:outputLabel value="#{bizInfoSummary.bizInfoSummaryView.sumWeightInterviewedIncomeFactorPercent}">
                                                        <f:convertNumber pattern="#,##0"  minFractionDigits="2" maxFractionDigits="2"/>
                                                    </p:outputLabel>
                                                </f:facet>
                                            </p:column>

                                            <p:column style="background-color:#f8d0b6; text-align:right;">
                                                <f:facet name="footer">
                                                    <p:outputLabel value="#{bizInfoSummary.bizInfoSummaryView.sumWeightAR}">
                                                        <f:convertNumber pattern="#,##0"  minFractionDigits="2" maxFractionDigits="2"/>
                                                    </p:outputLabel>
                                                </f:facet>
                                            </p:column>

                                            <p:column style="background-color:#f8d0b6; text-align:right;">
                                                <f:facet name="footer">
                                                    <p:outputLabel value="#{bizInfoSummary.bizInfoSummaryView.sumWeightAP}">
                                                        <f:convertNumber pattern="#,##0"  minFractionDigits="2" maxFractionDigits="2"/>
                                                    </p:outputLabel>
                                                </f:facet>
                                            </p:column>

                                            <p:column style="background-color:#f8d0b6; text-align:right;">
                                                <f:facet name="footer">
                                                    <p:outputLabel value="#{bizInfoSummary.bizInfoSummaryView.sumWeightINV}">
                                                        <f:convertNumber pattern="#,##0"  minFractionDigits="2" maxFractionDigits="2"/>
                                                    </p:outputLabel>
                                                </f:facet>
                                            </p:column>

                                            <p:column footerText="-"
                                                      style="background-color:#f8d0b6; text-align:center;"/>

                                            <p:column style="background-color:#f8d0b6;"/>
                                        </p:row>
                                    </p:columnGroup>

                                </p:dataTable>
                            </td>
                        </tr>
                        <tr>
                            <td><p:spacer width="2px"/></td>
                        </tr>
                        <tr>
                            <td><p:separator/></td>
                        </tr>
                        <tr>
                            <td><p:spacer width="2px"/></td>
                        </tr>
                        <tr>
                            <td class="center">
                                <p:commandButton id="btnAddBizInfoSummary" binding="#{addBizInfoSummary}" styleClass="small"
                                                 value="#{msg.get('app.button.save')}"
                                                 process="@form"
                                                 update=":msgBoxSystemMessagePanel,:frmMain"
                                                 action="#{bizInfoSummary.onSaveBizInfoSummary()}"/>

                                <p:commandButton id="btnCancelBizInfoSummary" value="#{msg.get('app.button.cancel')}" styleClass="small"
                                                 process="@this"
                                                 update=":frmMain"
                                                 action="#{bizInfoSummary.onCreation()}"/>
                            </td>
                        </tr>
                        </table>
                    </div>
                </div>

                <div class="bottom_line"></div>
            </div>
            <div class="clear"></div>
            <!-- Start Footer -->
            <ui:include src="include/footer.xhtml" />
            <!-- End Footer -->
        </div>
        <p:blockUI block=":frmMain" trigger=":frmMain:btnAddBizInfoSummary, :frmMain:btnAddBizInfoDetail, :frmMain:btnCancelBizInfoSummary">
            LOADING<br />
            <p:graphicImage value="/resources/images/shared/ajax-loader.gif"/>
        </p:blockUI>
        </h:form>
    </p:panel>
        <ui:include src="dialog/confirmDeleteDlg.xhtml">
            <ui:param name="id" value="confirmDeleteBizInfoDetailDialog"/>
            <ui:param name="name" value="confirmDeleteBizInfoDetailDlg"/>
            <ui:param name="formId" value="frmConfirmDeleteBizInfoDetail"/>
            <ui:param name="controller" value="#{bizInfoSummary}"/>
            <ui:param name="action" value="onDeleteBizInfoToDB"/>
            <ui:param name="update" value=":frmMain"/>
        </ui:include>

    <p:panel id="msgBoxSystemMessagePanel" styleClass="panel">
        <p:confirmDialog id="msgBoxSystemMessageDialog" widgetVar="msgBoxSystemMessageDlg" width="350px"
                         header="#{bizInfoSummary.messageHeader}" message="#{bizInfoSummary.message}" >
            <p:commandButton value="OK"
                             process="@this"
                             update="frmMain"
                             oncomplete="msgBoxSystemMessageDlg.hide()"/>
        </p:confirmDialog>
    </p:panel>

    <ui:include src="dialog/confirmChangeScreenDlg.xhtml">
        <ui:param name="headerMessage" value="คำเตือน"/>
        <ui:param name="message" value="เมื่อทำการเปลี่ยนหน้าจอ จะทำการบันทึกหน้าปัจจุบัน"/>
        <ui:param name="id" value="confirmAddBizInfoDetailDialog"/>
        <ui:param name="name" value="confirmAddBizInfoDetailDlg"/>
        <ui:param name="formId" value="frmConfirmAddBizInfoDetail"/>
        <ui:param name="controller" value="#{bizInfoSummary}"/>
        <ui:param name="action" value="onSaveBizInfoSummary"/>
        <ui:param name="redirectValue" value="#{bizInfoSummary.redirect}"/>
        <ui:param name="update" value=":msgBoxSystemMessagePanel,:frmMain"/>
    </ui:include>

    </h:body>
</f:view>
</html>
