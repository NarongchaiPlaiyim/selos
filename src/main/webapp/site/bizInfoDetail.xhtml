<!DOCTYPE html>
<html>
<f:view xmlns="http://www.w3.org/1999/xhtml"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:p="http://primefaces.org/ui"
        xmlns:clv="http://clevel.com/ui">

    <h:head>
        <title>Business Information Detail</title>
        <h:outputStylesheet name="css/style.css" />
        <h:outputScript library="js" name="custom.js" />
        <h:outputScript library="js" name="jquery.ui.datepicker.min.js" />
    </h:head>
    <h:body>
    <p:panel id="pnl_maincontainer" style="border:0; margin:0; padding: 0;">
        <h:form id="frmMain">
        <div id="main_container">
            <!-- Start Header Logo -->
            <ui:include src="include/header_logo.xhtml" />
            <!-- End Header Logo -->
            <!-- Start Header Detail -->
            <ui:include src="include/header_detail.xhtml" />
            <!-- End Header Detail -->
            <!-- Start Menu -->
            <ui:include src="include/menubar.xhtml" />
            <!-- End Menu -->
            <div id="content_container">
                <div id="content_name"><p:outputLabel value="#{msg.get('app.bizInfoDetail.header')}"/></div>
                <div id="content">
                    <div id="content_info">
                        <div id="content_trackchange">[ View Track Change ]</div>
                        <div id="content_lastupdate">Last update by <h:outputText value="#{bizInfoDetail.bizInfoDetailView.modifyBy.userName}"/>,
                            <h:outputText value="#{bizInfoDetail.bizInfoDetailView.modifyDate}"/></div>
                    </div>
                    <div id="content_form">
                        <table class="content_table_form" border="0">
                        <tr>
                            <td class="title" style="min-width: 270px; width: 270px; max-width: 270px;"><p:outputLabel value="#{msg.get('app.bizInfoDetail.label.businessInfoDetail')}"/></td>
                            <td colspan="3">
                                <p:inputText style="min-width: 381px; width: 381px; max-width: 381px;" value="#{bizInfoDetail.bizInfoDetailView.bizInfoText}"/>
                                <h:inputHidden value="#{bizInfoDetail.bizInfoDetailView.id}"/>
                            </td>
                        </tr>
                        <tr>
                            <td class="title"><p:outputLabel value="#{msg.get('app.bizInfoDetail.label.tradeType')}"/></td>
                            <td colspan="3">
                                <p:selectOneMenu style="min-width: 390px; width: 390px; max-width: 390px;" size="1"
                                                 value="#{bizInfoDetail.bizInfoDetailView.bizActivity.code}"  required="#{not empty param[saveButton.clientId]}">
                                    <f:selectItem itemLabel="- Please Select -" itemValue=""/>
                                    <f:selectItems value="#{bizInfoDetail.businessActivityList}"
                                                   var="bizActivity"
                                                   itemLabel="#{bizActivity.description}"
                                                   itemValue="#{bizActivity.code}"/>
                                </p:selectOneMenu>
                            </td>
                        </tr>
                        <tr>
                            <td class="title"><p:outputLabel value="#{msg.get('app.bizInfoDetail.label.bizType')}"/></td>
                            <td colspan="3">
                                <p:selectOneMenu id="bizTypeId" style="min-width: 390px; width: 390px; max-width: 390px;" size="1"
                                                 value="#{bizInfoDetail.bizInfoDetailView.bizType.id}" required="#{not empty param[saveButton.clientId]}">
                                    <f:selectItem itemLabel="- Please Select -" itemValue=""/>
                                    <f:selectItems value="#{bizInfoDetail.businessTypeList}"
                                                   var="bizType"
                                                   itemLabel="#{bizType.name}"
                                                   itemValue="#{bizType.id}"/>
                                </p:selectOneMenu>
                            </td>
                        </tr>
                        <tr>
                            <td class="title"><p:outputLabel value="#{msg.get('app.bizInfoDetail.label.bizGroup')}"/></td>
                            <td colspan="3">
                                <p:selectOneMenu style="min-width: 390px; width: 390px; max-width: 390px;" size="1"
                                                 value="#{bizInfoDetail.bizInfoDetailView.bizGroup.id}" required="#{not empty param[saveButton.clientId]}"
                                                 id="businessGroupId">
                                    <f:selectItem itemLabel="- Please Select -" itemValue=""/>
                                    <f:selectItems value="#{bizInfoDetail.businessGroupList}"
                                                   var="businessGroup"
                                                   itemLabel="#{businessGroup.name}"
                                                   itemValue="#{businessGroup.id}"/>
                                    <p:ajax process="@this" listener="#{bizInfoDetail.onChangeBusinessGroup()}" update=":frmMain:businessDescriptionId" />
                                </p:selectOneMenu>
                            </td>
                        </tr>
                        <tr>
                            <td class="title" ><p:outputLabel value="#{msg.get('app.bizInfoDetail.label.bizDesc')}"/></td>
                            <td colspan="3">
                                <p:selectOneMenu style="min-width: 390px; width: 390px; max-width: 390px;" size="1"
                                                 value="#{bizInfoDetail.bizInfoDetailView.bizDesc.id}"  required="#{not empty param[saveButton.clientId]}"
                                                 id="businessDescriptionId">
                                    <f:selectItem itemLabel="- Please Select -" itemValue=""/>
                                    <f:selectItems value="#{bizInfoDetail.businessDescriptionList}"
                                                   var="businessDescription"
                                                   itemLabel="#{businessDescription.name}"
                                                   itemValue="#{businessDescription.id}"/>
                                    <p:ajax process=":frmMain" listener="#{bizInfoDetail.onChangeBusinessDesc()}" update=":frmMain" />
                                </p:selectOneMenu>
                            </td>
                        </tr>
                        <tr>
                            <td class="title"><p:outputLabel value="#{msg.get('app.bizInfoDetail.label.bizCode')}"/></td>
                            <td colspan="3">
                                <p:inputText id="bizCode" styleClass="large" value="#{bizInfoDetail.bizInfoDetailView.bizCode}" readonly="true"/>
                            </td>
                        </tr>
                        <tr>
                            <td class="title">
                                <p:outputLabel value="#{msg.get('app.bizInfoDetail.label.incomeFactor')}"/>
                            </td>
                            <td style="min-width: 370px; width: 370px; max-width: 370px;">
                                <p:inputText styleClass="right large" id="incomeFactor" value="#{bizInfoDetail.bizInfoDetailView.incomeFactor}" readonly="true">
                                    <f:convertNumber pattern="#,##0" minFractionDigits="2" maxFractionDigits="2"/>
                                    <p:ajax event="blur" update=":frmMain:incomeFactor"/>
                                </p:inputText>
                                <p:outputLabel styleClass="title" value="#{msg.get('app.bizInfoDetail.label.adjustedIncomeFactor')}" style="float: right"/>
                            </td>
                            <!--<td class="title right" style="min-width: 270px; width: 270px; max-width: 270px;">-->
                                <!--<p:outputLabel value="#{msg.get('app.bizInfoDetail.label.adjustedIncomeFactor')}"/>-->
                            <!--</td>-->
                            <td>
                                <p:inputText style="text-align: right" id="adjustedIncomeFactor"
                                             value="#{bizInfoDetail.bizInfoDetailView.adjustedIncomeFactor}"
                                             onkeydown="return onKeyDownMoney(event);"
                                             onkeypress="return onKeyPressMoney(event)"
                                             required="#{not empty param[saveButton.clientId]}">
                                    <f:convertNumber pattern="##0.00" minFractionDigits="2" maxFractionDigits="2" maxIntegerDigits="3"/>
                                    <f:validateDoubleRange maximum="100"/>
                                    <p:ajax event="blur" update=":frmMain:adjustedIncomeFactor"/>
                                </p:inputText>
                            </td>
                        </tr>
                        <tr>
                            <td class="title">
                                <p:outputLabel value="#{msg.get('app.bizInfoDetail.label.bizComment')}"/>
                            </td>
                            <td colspan="3">
                                <p:inputText styleClass="large" value="#{bizInfoDetail.bizInfoDetailView.bizComment}" readonly="true"/>
                            </td>
                        </tr>
                        <tr>
                            <td class="title"><p:outputLabel value="#{msg.get('app.bizInfoDetail.label.percentBusiness')}"/></td>
                            <td colspan="3">
                                <p:inputText styleClass="right" id="percentBiz" value="#{bizInfoDetail.bizInfoDetailView.percentBiz}"
                                             onkeydown="return onKeyDownMoney(event);" onkeypress="return onKeyPressMoney(event);" maxlength="18"
                                             required="#{not empty param[saveButton.clientId]}">
                                    <f:convertNumber pattern="##0.00" minFractionDigits="2" maxFractionDigits="2" maxIntegerDigits="3"/>
                                    <f:validateDoubleRange maximum="100"/>
                                    <p:ajax event="blur" update=":frmMain:percentBiz"/>
                                </p:inputText>
                                <h:inputHidden id="sumBizPercent" value="#{bizInfoDetail.sumBizPercent}"/>
                            </td>
                        </tr>
                        <tr>
                            <td class="title"><p:outputLabel value="#{msg.get('app.bizInfoDetail.label.bizPermission')}"/></td>
                            <td colspan="1" class="title">
                                <table border="0" style="float: left;width: 100%">
                                    <tr>
                                        <td>
                                            <p:selectOneRadio id="bizPermissionRadio" value="#{bizInfoDetail.bizInfoDetailView.bizPermission}"
                                                              required="#{not empty param[saveButton.clientId]}" layout="grid" columns="1">
                                                <f:selectItem itemLabel="No"  itemValue="N" />
                                                <f:selectItem itemLabel="Yes" itemValue="Y" />
                                                <p:ajax process="@this" update=":frmMain:bizDocPermission,:frmMain:bizDocExpiryDate" listener="#{bizInfoDetail.onChangeBizPermission}"/>
                                            </p:selectOneRadio>

                                        </td>
                                        <td style="margin-top: 50px">
                                            <div style="margin-top: 28px; float: right">
                                                <p:outputLabel value="#{msg.get('app.bizInfoDetail.label.bizDocPermission')}"/>
                                            </div>
                                            <!--<table border="1" style="margin-top: 28px; float: right;width: auto">-->
                                                <!--<tr>-->
                                                    <!--<td class="right">-->
                                                        <!--<p:outputLabel value="#{msg.get('app.bizInfoDetail.label.bizDocPermission')}"/>-->
                                                    <!--</td>-->
                                                <!--</tr>-->
                                            <!--</table>-->
                                        </td>
                                    </tr>
                                </table>
                            </td>
                            <td>
                                <div style="margin-top: 28px; float: left">
                                    <p:inputText style="width: 350px" id="bizDocPermission" value="#{bizInfoDetail.bizInfoDetailView.bizDocPermission}"
                                                 readonly="#{bizInfoDetail.bizInfoDetailView.bizPermission == 'N'}"
                                                 required="#{bizInfoDetail.bizInfoDetailView.bizPermission == 'Y' and not empty param[saveButton.clientId]}">
                                        <p:ajax event="blur" update=":frmMain:bizDocPermission"/>
                                    </p:inputText>
                                </div>
                            </td>
                        </tr>
                        <!--<tr>-->
                            <!--<td class="title"></td>-->
                            <!--<td class="title right" colspan="2">-->
                                <!--<p:outputLabel value="#{msg.get('app.bizInfoDetail.label.bizDocPermission')}"/>-->
                            <!--</td>-->
                            <!--<td>-->
                                <!--<p:inputText id="bizDocPermission" value="#{bizInfoDetail.bizInfoDetailView.bizDocPermission}"-->
                                             <!--readonly="#{bizInfoDetail.bizInfoDetailView.bizPermission == 'N'}"-->
                                             <!--required="#{bizInfoDetail.bizInfoDetailView.bizPermission == 'Y' and not empty param[saveButton.clientId]}">-->
                                    <!--<p:ajax event="blur" update=":frmMain:bizDocPermission"/>-->
                                <!--</p:inputText>-->
                            <!--</td>-->
                        <!--</tr>-->
                        <tr>
                            <td colspan="1"></td>
                            <td class="title right">
                                <p:outputLabel value="#{msg.get('app.bizInfoDetail.label.bizDocExpiryDate')}"/>
                            </td>
                            <td>
                                <clv:BECalendar id="bizDocExpiryDate" showOn="button" navigator="true" locale="th_TH"
                                                readonly="#{bizInfoDetail.bizInfoDetailView.bizPermission == 'N'}"
                                                disabled="#{bizInfoDetail.bizInfoDetailView.bizPermission == 'N'}"
                                                required="#{bizInfoDetail.bizInfoDetailView.bizPermission == 'Y' and not empty param[saveButton.clientId]}"
                                                value="#{bizInfoDetail.bizInfoDetailView.bizDocExpiryDate}"
                                                defaultdate="#{bizInfoDetail.currentDateDDMMYY}"
                                                mindate="#{bizInfoDetail.currentDateDDMMYY}"
                                                pattern="dd/MM/yyyy"
                                                yearRange="1950:2100"
                                                showButtonPanel="true">
                                    <f:convertDateTime pattern="dd/MM/yyyy" locale="th_TH"/>
                                </clv:BECalendar>
                            </td>
                        </tr>
                        <tr>
                            <td class="title"><p:outputLabel value="#{msg.get('app.bizInfoDetail.label.expIndCountryName')}"/></td>
                            <td colspan="3">
                                <p:inputText styleClass="large" id="exportIndirectCountryName" value="#{bizInfoDetail.bizInfoDetailView.expIndCountryName}"/>
                            </td>
                        </tr>
                        <tr>
                            <td class="title"><p:outputLabel value="#{msg.get('app.bizInfoDetail.label.percentExpIndCountryName')}"/></td>
                            <td colspan="3">
                                <p:inputText styleClass="large right" id="percentExpIndCountryName" value="#{bizInfoDetail.bizInfoDetailView.percentExpIndCountryName}"
                                             onkeydown="return onKeyDownMoney(event);" onkeypress="return onKeyPressMoney(event);">
                                    <f:convertNumber pattern="##0.00" minFractionDigits="2" maxFractionDigits="2" />
                                    <f:validateDoubleRange maximum="100"/>
                                    <p:ajax event="blur" update=":frmMain:percentExpIndCountryName"/>
                                </p:inputText></td>
                        </tr>
                        <tr>
                            <td colspan="4" style="text-align: center;"><p:spacer width="2px"/></td>
                        </tr>
                        <tr>
                            <td colspan="4" style="text-align: center;"><p:separator/></td>
                        </tr>
                        <tr>
                            <td colspan="4" style="text-align: center;"><p:spacer width="2px"/></td>
                        </tr>
                        <tr>
                            <td class="left" colspan="4">
                                <p:commandButton id="btnAddBizProduct"
                                                 value="#{msg.get('app.button.add')}"
                                                 styleClass="medium"
                                                 process="@this"
                                                 actionListener="#{bizInfoDetail.onAddBizProductDetailView()}"
                                                 update=":bizProductViewDlgForm"
                                                 oncomplete="bizProductViewDlg.show()">
                                    <p:resetInput target=":bizProductViewDlgForm" />
                                </p:commandButton>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="4">
                                <p:dataTable styleClass="main_container" style="width: 100%"
                                             id="bizProductViewTable"
                                             var="bizProductDetailView"
                                             value="#{bizInfoDetail.bizInfoDetailView.bizProductDetailViewList}"
                                             paginator="false"
                                             rowKey="#{bizProductView.no}"
                                             rowIndexVar="rowIndex" >
                                    <p:column headerText="" styleClass="center" style="width:4%;">
                                        <p:outputLabel value="#{bizProductDetailView.no}"/>
                                    </p:column>
                                    <p:column headerText="#{msg.get('app.bizInfoDetail.bizProduct.table.productType')}" styleClass="left" style="width: 30%;">
                                        <p:outputLabel value="#{bizProductDetailView.productType}"/>
                                    </p:column>
                                    <p:column headerText="#{msg.get('app.bizInfoDetail.bizProduct.table.percentSalesVolume')}" styleClass="right" style="width: 20%;">
                                        <p:outputLabel value="#{bizProductDetailView.percentSalesVolume}">
                                            <f:convertNumber pattern="#,##0"  minFractionDigits="2" maxFractionDigits="2"/>
                                        </p:outputLabel>
                                    </p:column>
                                    <p:column headerText="#{msg.get('app.bizInfoDetail.bizProduct.table.percentEBIT')}" styleClass="right" style="width: 20%;">
                                        <p:outputLabel value="#{bizProductDetailView.percentEBIT}">
                                            <f:convertNumber pattern="#,##0"  minFractionDigits="2" maxFractionDigits="2"/>
                                        </p:outputLabel>
                                    </p:column>
                                    <p:column headerText="#{msg.get('app.bizInfoDetail.bizProduct.table.productDetail')}" styleClass="left" style="width: 30%;">
                                        <p:outputLabel value="#{bizProductDetailView.productDetail}"/>
                                    </p:column>
                                    <p:column headerText="" styleClass="center" style="width:8%;">
                                        <p:commandButton icon="ui-icon-pencil" id="onEditBizProductDetailView"
                                                         action="#{bizInfoDetail.onEditBizProductDetailView()}"
                                                         update=":bizProductViewDlgForm"
                                                         process=":frmMain:bizProductViewTable"
                                                         oncomplete="bizProductViewDlg.show();">
                                            <f:setPropertyActionListener value="#{bizProductDetailView}"
                                                                         target="#{bizInfoDetail.selectBizProductDetail}"/>
                                            <f:setPropertyActionListener value="#{rowIndex}"
                                                                         target="#{bizInfoDetail.rowIndex}"/>
                                            <p:resetInput target=":bizProductViewDlgForm"/>
                                        </p:commandButton>
                                        <p:commandButton title="Remove" process="@this"
                                                         icon="ui-icon-trash"
                                                         oncomplete="confirmDeleteBizProductDlg.show()" >
                                            <f:setPropertyActionListener value="#{bizProductDetailView}"
                                                                         target="#{bizInfoDetail.selectBizProductDetail}"/>
                                            <f:setPropertyActionListener value="#{rowIndex}"
                                                                         target="#{bizInfoDetail.rowIndex}"/>
                                        </p:commandButton>
                                    </p:column>
                                </p:dataTable>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="4"><p:spacer width="10px"/></td>
                        </tr>
                        <tr>
                            <td colspan="4"><p:separator/></td>
                        </tr>
                        <tr>
                            <td colspan="4"><p:spacer width="10px"/></td>
                        </tr>
                        <tr>
                            <td class="title" colspan="4">
                                <p:outputLabel value="#{msg.get('app.bizInfoDetail.label.supplierDetail')}"/>
                                <p:spacer width="10px"/>
                                <p:commandButton value="#{msg.get('app.button.add')}"
                                                 styleClass="medium"
                                                 process="@this"
                                                 action="#{bizInfoDetail.onAddBizStakeHolderDetailView()}"
                                                 update=":stakeholderViewDlgForm" oncomplete="stakeholderViewDlg.show()">
                                    <p:resetInput target=":stakeholderViewDlgForm" />
                                    <f:setPropertyActionListener value="1" target="#{bizInfoDetail.stakeType}"/>

                                </p:commandButton>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="4">
                                    <p:dataTable
                                            id="supplierTable"
                                            var="supplierItem"
                                            styleClass="medium"
                                            value="#{bizInfoDetail.supplierDetailList}"
                                            paginator="false"
                                            rowKey="#{supplierItem.no}"
                                            rowIndexVar="rowIndex">

                                        <p:columnGroup type="header">
                                            <p:row>
                                                <p:column style="min-width: 35px;  width: 35px;  max-width: 35px;"  />
                                                <p:column style="min-width: 200px; width: 200px; max-width: 200px;" headerText="#{msg.get('app.bizInfoDetail.bizStakeHolder.table.supplierName')}" />
                                                <p:column style="min-width: 170px; width: 170px; max-width: 170px;" headerText="#{msg.get('app.bizInfoDetail.bizStakeHolder.table.contactName')}" />
                                                <p:column style="min-width: 100px; width: 100px; max-width: 100px;"    headerText="#{msg.get('app.bizInfoDetail.bizStakeHolder.table.phoneNo')}" />
                                                <p:column style="min-width: 50px;  width: 50px;  max-width: 50px;"    headerText="#{msg.get('app.bizInfoDetail.bizStakeHolder.table.contactYear')}" />
                                                <p:column style="min-width: 100px; width: 100px; max-width: 100px;" headerText="#{msg.get('app.bizInfoDetail.bizStakeHolder.table.percentSalesVolume')}" />
                                                <p:column style="min-width: 100px; width: 100px; max-width: 100px;" headerText="#{msg.get('app.bizInfoDetail.bizStakeHolder.table.percentCash')}" />
                                                <p:column style="min-width: 100px; width: 100px; max-width: 10px;" headerText="#{msg.get('app.bizInfoDetail.bizStakeHolder.table.percentCredit')}" />
                                                <p:column style="min-width: 100px; width: 100px; max-width: 100px;" headerText="#{msg.get('app.bizInfoDetail.bizStakeHolder.table.creditTerm')}" />
                                                <p:column style="min-width: 50px;  width: 50px;  max-width: 50px;" />
                                            </p:row>
                                        </p:columnGroup>

                                        <p:column styleClass="center">
                                            <p:outputLabel value="#{supplierItem.no}"/>
                                        </p:column>
                                        <p:column styleClass="left" >
                                            <p:outputLabel value="#{supplierItem.name}"/>
                                        </p:column>
                                        <p:column styleClass="left">
                                            <p:outputLabel value="#{supplierItem.contactName}"/>
                                        </p:column>
                                        <p:column styleClass="left">
                                            <p:outputLabel value="#{supplierItem.phoneNo}"/>
                                        </p:column>
                                        <p:column styleClass="right">
                                            <p:outputLabel styleClass="right" value="#{supplierItem.contactYear}">
                                                <f:convertNumber pattern="#,##0" />
                                            </p:outputLabel>
                                        </p:column>
                                        <p:column styleClass="right">
                                            <p:outputLabel styleClass="right" value="#{supplierItem.percentSalesVolume}">
                                                <f:convertNumber pattern="#,##0"  minFractionDigits="2" maxFractionDigits="2"/>
                                            </p:outputLabel>
                                        </p:column>
                                        <p:column styleClass="right">
                                            <p:outputLabel styleClass="right" value="#{supplierItem.percentCash}">
                                                <f:convertNumber pattern="#,##0"  minFractionDigits="2" maxFractionDigits="2"/>
                                            </p:outputLabel>
                                        </p:column>
                                        <p:column styleClass="right">
                                            <p:outputLabel styleClass="right" value="#{supplierItem.percentCredit}">
                                                <f:convertNumber pattern="#,##0"  minFractionDigits="2" maxFractionDigits="2"/>
                                            </p:outputLabel>
                                        </p:column>
                                        <p:column styleClass="right">
                                            <p:outputLabel styleClass="right" value="#{supplierItem.creditTerm}"/>
                                        </p:column>
                                        <p:column>
                                            <p:commandButton icon="ui-icon-pencil"
                                                             title="Edit"
                                                             action="#{bizInfoDetail.onEditBizStakeHolderDetailView}"
                                                             update=":stakeholderViewDlgForm,:frmMain:supplierTable"
                                                             process=":frmMain:supplierTable"
                                                             oncomplete="stakeholderViewDlg.show();">
                                                <f:setPropertyActionListener value="1"
                                                                             target="#{bizInfoDetail.stakeType}"/>
                                                <f:setPropertyActionListener value="#{supplierItem}"
                                                                             target="#{bizInfoDetail.selectStakeHolder}"/>
                                                <f:setPropertyActionListener value="#{rowIndex}"
                                                                             target="#{bizInfoDetail.rowIndex}"/>
                                                <p:resetInput target=":stakeholderViewDlgForm"/>
                                            </p:commandButton>

                                            <p:commandButton icon="ui-icon-trash"
                                                             title="Remove" process="@this"
                                                             oncomplete="confirmDeleteStakeholderDlg.show()">
                                                <f:setPropertyActionListener value="#{supplierItem}"
                                                                             target="#{bizInfoDetail.selectStakeHolder}"/>
                                                <f:setPropertyActionListener value="1"
                                                                             target="#{bizInfoDetail.stakeType}"/>
                                                <f:setPropertyActionListener value="#{rowIndex}"
                                                                             target="#{bizInfoDetail.rowIndex}"/>
                                            </p:commandButton>
                                        </p:column>
                                        <p:columnGroup type="footer">
                                            <p:row>
                                                <p:column colspan="5" footerText="#{msg.get('app.bizInfoDetail.bizStakeHolder.table.footer.total')}"
                                                          style="background-color:#f4f8b6; text-align:left;"/>

                                                <p:column style="background-color:#f4f8b6; text-align:right;">
                                                    <f:facet name="footer">
                                                        <p:inputText id="supplierTotalPercentBuyVolume" styleClass="right" readonly="true" style="width: 100px"
                                                                     value="#{bizInfoDetail.bizInfoDetailView.supplierTotalPercentBuyVolume}">
                                                            <f:convertNumber pattern="#,##0"  minFractionDigits="2" maxFractionDigits="2" />
                                                            <p:ajax event="blur" update=":frmMain:supplierTable:supplierTotalPercentBuyVolume"/>
                                                        </p:inputText>
                                                    </f:facet>
                                                </p:column>

                                                <p:column colspan="2"  style="background-color:#f4f8b6; text-align:right;">
                                                    <f:facet name="footer">
                                                        <p:inputText id="supplierTotalPercentCredit" styleClass="right" readonly="true" style="width: 100px"
                                                                     value="#{bizInfoDetail.bizInfoDetailView.supplierTotalPercentCredit}">
                                                            <f:convertNumber pattern="#,##0"  minFractionDigits="2" maxFractionDigits="2" />
                                                            <p:ajax event="blur" update=":frmMain:supplierTable:supplierTotalPercentCredit"/>
                                                        </p:inputText>
                                                    </f:facet>
                                                </p:column>

                                                <p:column  style="background-color:#f4f8b6; text-align:right;">
                                                    <f:facet name="footer">
                                                        <p:inputText id="supplierTotalCreditTerm" styleClass="right" readonly="true" style="width: 100px"
                                                                     value="#{bizInfoDetail.bizInfoDetailView.supplierTotalCreditTerm}">
                                                            <f:convertNumber pattern="#,##0"  minFractionDigits="2" maxFractionDigits="2"  />
                                                            <p:ajax event="blur" update=":frmMain:supplierTable:supplierTotalCreditTerm"/>
                                                        </p:inputText>
                                                    </f:facet>
                                                </p:column>
                                                <p:column style="background-color:#f4f8b6;" />
                                            </p:row>
                                            <p:row>
                                                <p:column colspan="7" footerText="#{msg.get('app.bizInfoDetail.bizStakeHolder.table.footer.adjustByUW')}"
                                                          style="background-color:#f8d0b6;; text-align:left;"/>

                                                <p:column style="background-color:#f8d0b6; text-align:right;">
                                                    <f:facet name="footer">
                                                        <p:inputText id="supplierUWAdjustPercentCredit" styleClass="right" readonly="true" style="width: 100px"
                                                                     onkeydown="return onKeyDownMoney(event);" onkeypress="return onKeyPressMoney(event);"
                                                                     value="#{bizInfoDetail.bizInfoDetailView.supplierUWAdjustPercentCredit}">
                                                            <f:convertNumber pattern="##0.00" minFractionDigits="2" maxFractionDigits="2" maxIntegerDigits="3"/>
                                                            <f:validateDoubleRange maximum="100"/>
                                                            <p:ajax event="blur" update=":frmMain:supplierTable:supplierUWAdjustPercentCredit"/>
                                                        </p:inputText>
                                                    </f:facet>
                                                </p:column>

                                                <p:column style="background-color:#f8d0b6; text-align:right;">
                                                    <f:facet name="footer">
                                                        <p:inputText id="supplierUWAdjustCreditTerm" styleClass="right" readonly="true"  style="width: 100px"
                                                                     onkeydown="return onKeyDownMoney(event);" onkeypress="return onKeyPressMoney(event);"
                                                                     value="#{bizInfoDetail.bizInfoDetailView.supplierUWAdjustCreditTerm}">
                                                            <f:convertNumber pattern="##0.00" minFractionDigits="2" maxFractionDigits="2" maxIntegerDigits="3"/>
                                                            <f:validateDoubleRange maximum="100"/>
                                                            <p:ajax event="blur" update=":frmMain:supplierTable:supplierUWAdjustCreditTerm"/>
                                                        </p:inputText>
                                                    </f:facet>
                                                </p:column>

                                                <p:column style="background-color:#f8d0b6;" />
                                            </p:row>
                                        </p:columnGroup>
                                    </p:dataTable>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="4"><p:spacer width="2px"/></td>
                        </tr>
                        <tr>
                            <td colspan="4"><p:separator/></td>
                        </tr>
                        <tr>
                            <td colspan="4"><p:spacer width="2px"/></td>
                        </tr>
                        <tr>
                            <td class="title" colspan="6">
                                <p:outputLabel value="#{msg.get('app.bizInfoDetail.label.buyerDetail')}"/>
                                <p:spacer width="10px"/>
                                <p:commandButton value="#{msg.get('app.button.add')}"
                                                 process="@this"
                                                 styleClass="medium"
                                                 action="#{bizInfoDetail.onAddBizStakeHolderDetailView()}"
                                                 update=":stakeholderViewDlgForm" oncomplete="stakeholderViewDlg.show()">
                                    <p:resetInput target=":stakeholderViewDlgForm" />
                                    <f:setPropertyActionListener value="2"
                                                                 target="#{bizInfoDetail.stakeType}"/>

                                </p:commandButton>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="4">
                                    <p:dataTable id="buyerTable"
                                                 var="buyerItem"
                                                 value="#{bizInfoDetail.buyerDetailList}"
                                                 paginator="false"
                                                 rowKey="#{buyer.no}"
                                                 rowIndexVar="rowIndex">

                                        <p:columnGroup type="header">
                                            <p:row>
                                                <p:column style="min-width: 35px; width: 35px; max-width: 35px;"  />
                                                <p:column style="min-width: 200px; width: 200px; max-width: 200px;" headerText="#{msg.get('app.bizInfoDetail.bizStakeHolder.table.buyerName')}" />
                                                <p:column style="min-width: 170px; width: 170px; max-width: 170px;" headerText="#{msg.get('app.bizInfoDetail.bizStakeHolder.table.contactName')}" />
                                                <p:column style="min-width: 100px; width: 100px; max-width: 100px;"    headerText="#{msg.get('app.bizInfoDetail.bizStakeHolder.table.phoneNo')}" />
                                                <p:column style="min-width: 50px; width: 50px; max-width: 50px;"    headerText="#{msg.get('app.bizInfoDetail.bizStakeHolder.table.contactYear')}" />
                                                <p:column style="min-width: 100px; width: 100px; max-width: 100px;" headerText="#{msg.get('app.bizInfoDetail.bizStakeHolder.table.percentBuysVolume')}" />
                                                <p:column style="min-width: 100px; width: 100px; max-width: 100px;" headerText="#{msg.get('app.bizInfoDetail.bizStakeHolder.table.percentCash')}" />
                                                <p:column style="min-width: 100px; width: 100px; max-width: 10px;" headerText="#{msg.get('app.bizInfoDetail.bizStakeHolder.table.percentCredit')}" />
                                                <p:column style="min-width: 100px; width: 100px; max-width: 100px;" headerText="#{msg.get('app.bizInfoDetail.bizStakeHolder.table.creditTerm')}" />
                                                <p:column style="min-width: 50px; width: 50px; max-width: 50px;" />
                                            </p:row>
                                        </p:columnGroup>

                                        <p:column styleClass="center">
                                            <p:outputLabel value="#{buyerItem.no}"/>
                                        </p:column>
                                        <p:column styleClass="left">
                                            <p:outputLabel value="#{buyerItem.name}"/>
                                        </p:column>
                                        <p:column styleClass="left">
                                            <p:outputLabel value="#{buyerItem.contactName}">
                                                <f:convertNumber pattern="#,##0" />
                                            </p:outputLabel>
                                        </p:column>

                                        <p:column styleClass="left" >
                                            <p:outputLabel value="#{buyerItem.phoneNo}"/>
                                        </p:column>
                                        <p:column styleClass="right">
                                            <p:outputLabel styleClass="right" value="#{buyerItem.contactYear}">
                                                <f:convertNumber pattern="#,##0" />
                                            </p:outputLabel>
                                        </p:column>
                                        <p:column styleClass="right">
                                            <p:outputLabel styleClass="right" value="#{buyerItem.percentSalesVolume}">
                                                <f:convertNumber pattern="#,##0"  minFractionDigits="2" maxFractionDigits="2"/>
                                            </p:outputLabel>
                                        </p:column>
                                        <p:column styleClass="right">
                                            <p:outputLabel styleClass="right" value="#{buyerItem.percentCash}">
                                                <f:convertNumber pattern="#,##0"  minFractionDigits="2" maxFractionDigits="2"/>

                                            </p:outputLabel>
                                        </p:column>
                                        <p:column styleClass="right">
                                            <p:outputLabel styleClass="right" value="#{buyerItem.percentCredit}">
                                                <f:convertNumber pattern="#,##0"  minFractionDigits="2" maxFractionDigits="2"/>
                                            </p:outputLabel>
                                        </p:column>
                                        <p:column  styleClass="right" >
                                            <p:outputLabel styleClass="right" value="#{buyerItem.creditTerm}"/>
                                        </p:column>
                                        <p:column styleClass="center">
                                            <p:commandButton icon="ui-icon-pencil"
                                                             title="Edit"
                                                             action="#{bizInfoDetail.onEditBizStakeHolderDetailView}"
                                                             update=":stakeholderViewDlgForm,:frmMain:buyerTable"
                                                             process=":frmMain:buyerTable"
                                                             oncomplete="stakeholderViewDlg.show();">
                                                <f:setPropertyActionListener value="2"
                                                                             target="#{bizInfoDetail.stakeType}"/>
                                                <f:setPropertyActionListener value="#{buyerItem}"
                                                                             target="#{bizInfoDetail.selectStakeHolder}"/>
                                                <f:setPropertyActionListener value="#{rowIndex}"
                                                                             target="#{bizInfoDetail.rowIndex}"/>
                                                <p:resetInput target=":stakeholderViewDlgForm"/>
                                            </p:commandButton>
                                            <p:commandButton icon="ui-icon-trash"
                                                             title="Remove" process="@this"
                                                             oncomplete="confirmDeleteStakeholderDlg.show()">

                                                <f:setPropertyActionListener value="#{buyerItem}"
                                                                             target="#{bizInfoDetail.selectStakeHolder}"/>
                                                <f:setPropertyActionListener value="2"
                                                                             target="#{bizInfoDetail.stakeType}"/>
                                            </p:commandButton>
                                        </p:column>

                                        <p:columnGroup type="footer">
                                            <p:row>
                                                <p:column colspan="5" footerText="#{msg.get('app.bizInfoDetail.bizStakeHolder.table.footer.total')}"
                                                          style="background-color:#f4f8b6; text-align:left;"/>

                                                <p:column style="background-color:#f4f8b6; text-align:right;">
                                                    <f:facet name="footer">
                                                        <p:inputText id="buyerTotalPercentBuyVolume" styleClass="right" readonly="true" style="width: 100px"
                                                                     value="#{bizInfoDetail.bizInfoDetailView.buyerTotalPercentBuyVolume}">
                                                            <f:convertNumber pattern="#,##0"  minFractionDigits="2" maxFractionDigits="2" />
                                                            <p:ajax event="blur" update=":frmMain:buyerTable:buyerTotalPercentBuyVolume"/>
                                                        </p:inputText>
                                                    </f:facet>
                                                </p:column>

                                                <p:column colspan="2"  style="background-color:#f4f8b6; text-align:right;">
                                                    <f:facet name="footer">
                                                        <p:inputText id="buyerTotalPercentCredit" styleClass="right" readonly="true"   style="width: 100px"
                                                                     value="#{bizInfoDetail.bizInfoDetailView.buyerTotalPercentCredit}">
                                                            <f:convertNumber pattern="#,##0"  minFractionDigits="2" maxFractionDigits="2"  />
                                                            <p:ajax event="blur" update=":frmMain:buyerTable:buyerTotalPercentCredit"/>
                                                        </p:inputText>
                                                    </f:facet>
                                                </p:column>

                                                <p:column  style="background-color:#f4f8b6; text-align:right;">
                                                    <f:facet name="footer">
                                                        <p:inputText id="buyerTotalCreditTerm" styleClass="right" readonly="true" style="width: 100px"
                                                                     value="#{bizInfoDetail.bizInfoDetailView.buyerTotalCreditTerm}">
                                                            <f:convertNumber pattern="#,##0"  minFractionDigits="2" maxFractionDigits="2"  />
                                                            <p:ajax event="blur" update=":frmMain:buyerTable:buyerTotalCreditTerm"/>
                                                        </p:inputText>
                                                    </f:facet>
                                                </p:column>
                                                <p:column style="background-color:#f4f8b6;" />
                                            </p:row>
                                            <p:row>
                                                <p:column colspan="7" footerText="#{msg.get('app.bizInfoDetail.bizStakeHolder.table.footer.adjustByUW')}"
                                                          style="background-color:#f8d0b6;; text-align:left;"/>

                                                <p:column style="background-color:#f8d0b6; text-align:right;">
                                                    <f:facet name="footer">
                                                        <p:inputText id="buyerUWAdjustPercentCredit" styleClass="right" readonly="true" style="width: 100px"
                                                                     onkeydown="return onKeyDownMoney(event);" onkeypress="return onKeyPressMoney(event);"
                                                                     value="#{bizInfoDetail.bizInfoDetailView.buyerUWAdjustPercentCredit}">
                                                            <f:convertNumber pattern="##0.00" minFractionDigits="2" maxFractionDigits="2" maxIntegerDigits="3"/>
                                                            <f:validateDoubleRange maximum="100"/>
                                                            <p:ajax event="blur" update=":frmMain:buyerTable:buyerUWAdjustPercentCredit"/>
                                                        </p:inputText>
                                                    </f:facet>
                                                </p:column>

                                                <p:column style="background-color:#f8d0b6; text-align:right;">
                                                    <f:facet name="footer">
                                                        <p:inputText id="buyerUWAdjustCreditTerm" styleClass="right" readonly="true" style="width: 100px"
                                                                     onkeydown="return onKeyDownMoney(event);" onkeypress="return onKeyPressMoney(event);"
                                                                     value="#{bizInfoDetail.bizInfoDetailView.buyerUWAdjustCreditTerm}">
                                                            <f:convertNumber pattern="##0.00" minFractionDigits="2" maxFractionDigits="2" maxIntegerDigits="3"/>
                                                            <f:validateDoubleRange maximum="100"/>
                                                            <p:ajax event="blur" update=":frmMain:buyerTable:buyerUWAdjustCreditTerm"/>
                                                        </p:inputText>
                                                    </f:facet>
                                                </p:column>

                                                <p:column style="background-color:#f8d0b6;" />
                                            </p:row>
                                        </p:columnGroup>
                                    </p:dataTable>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="4"><p:spacer width="2px"/></td>
                        </tr>
                        <tr>
                            <td colspan="4"><p:separator/></td>
                        </tr>
                        <tr>
                            <td colspan="4"><p:spacer width="2px"/></td>
                        </tr>
                        <tr>
                            <td colspan="4">
                                <table class="table_content" >
                                    <colgroup>
                                        <col style="width:300px;"/>
                                        <col style="width:130px;"/>
                                        <col style="width:300px;"/>
                                        <col style="width:130px;"/>
                                        <col style="width:300px;"/>
                                        <col style="width:130px;"/>
                                    </colgroup>
                                    <tr>
                                        <th colspan="2" style="width:33%;">การจัดซื้อ</th>
                                        <th colspan="2" style="width:33%;">การขาย</th>
                                        <th colspan="2" style="width:33%;">Stock</th>
                                    </tr>
                                    <tr style="background-color: #FAFAFA">
                                        <td style="line-height: 15px"><p:outputLabel value="#{msg.get('app.bizInfoDetail.label.standardAccountReceivable')}"/>  </td>
                                        <td>
                                            <p:inputText styleClass="right" style="width: 95%;" id="standardAccountReceivable" readonly="true"
                                                         value="#{bizInfoDetail.bizInfoDetailView.standardAccountReceivable}">
                                                <f:convertNumber pattern="#,##0" />
                                                <p:ajax event="blur" update=":frmMain:standardAccountReceivable"/>
                                            </p:inputText>
                                        </td>
                                        <td style="line-height: 15px"><p:outputLabel value="#{msg.get('app.bizInfoDetail.label.standardAccountPayable')}"/></td>
                                        <td>
                                            <p:inputText styleClass="right" style="width: 95%;" id="standardAccountPayable" readonly="true"
                                                         value="#{bizInfoDetail.bizInfoDetailView.standardAccountPayable}">
                                                <f:convertNumber pattern="#,##0" />
                                                <p:ajax event="blur" update=":frmMain:standardAccountPayable"/>
                                            </p:inputText>
                                        </td>
                                        <td style="line-height: 15px"><p:outputLabel value="#{msg.get('app.bizInfoDetail.label.standardStock')}"/></td>
                                        <td>
                                            <p:inputText styleClass="right" style="width: 95%;" id="standardStock" readonly="true"
                                                         value="#{bizInfoDetail.bizInfoDetailView.standardStock }">
                                                <f:convertNumber pattern="#,##0" />
                                                <p:ajax event="blur" update=":frmMain:standardStock"/>
                                            </p:inputText>
                                        </td>
                                    </tr>
                                    <tr style="background-color: #efefef">
                                        <td style="line-height: 15px"><p:outputLabel value="#{msg.get('app.bizInfoDetail.label.averagePurchaseAmount')}"/></td>
                                        <td>
                                            <p:inputText styleClass="right" style="width: 95%;" id="averagePurchaseAmount" readonly="true"
                                                         value="#{bizInfoDetail.bizInfoDetailView.averagePurchaseAmount}">
                                                <f:convertNumber pattern="#,##0" minFractionDigits="2" maxFractionDigits="2" />
                                                <p:ajax event="blur" update=":frmMain:averagePurchaseAmount"/>
                                            </p:inputText>
                                        </td>
                                        <td style="line-height: 15px"><p:outputLabel value="#{msg.get('app.bizInfoDetail.label.averagePayableAmount')}"/></td>
                                        <td>
                                            <p:inputText styleClass="right" style="width: 95%;" id="averagePayableAmount" readonly="true"
                                                         value="#{bizInfoDetail.bizInfoDetailView.averagePayableAmount}">
                                                <f:convertNumber pattern="#,##0" minFractionDigits="2" maxFractionDigits="2" />
                                                <p:ajax event="blur" update=":frmMain:averagePayableAmount"/>
                                            </p:inputText>
                                        </td>
                                        <td style="line-height: 15px"><p:outputLabel value="#{msg.get('app.bizInfoDetail.label.stockDurationBDM')}"/></td>
                                        <td>
                                            <p:inputText styleClass="right" style="width: 95%;" id="stockDurationBDM"
                                                         onkeydown="return onKeyDownNumber(event);" onkeypress="return onKeyPressNumber(event);"
                                                         value="#{bizInfoDetail.bizInfoDetailView.stockDurationBDM}"
                                                         required="#{not empty param[saveButton.clientId]}">
                                                <!--readonly="#{bizInfoDetail.readonlyIsBDM}"-->
                                                <f:convertNumber pattern="#,##0"   />
                                                <p:ajax event="blur" update=":frmMain:stockDurationBDM,:frmMain:stockValueBDM" />
                                            </p:inputText>
                                        </td>
                                    </tr>
                                    <tr style="background-color: #FAFAFA">
                                        <td style="line-height: 15px"><p:outputLabel value="#{msg.get('app.bizInfoDetail.label.purchasePercentCash')}"/></td>
                                        <td>
                                            <p:inputText styleClass="right" style="width: 95%;" id="purchasePercentCash" readonly="true"
                                                         onkeydown="return onKeyDownMoney(event);" onkeypress="return onKeyPressMoney(event);"
                                                         value="#{bizInfoDetail.bizInfoDetailView.purchasePercentCash}"
                                                         required="#{not empty param[saveButton.clientId]}">
                                                <f:convertNumber pattern="##0.00" minFractionDigits="2" maxFractionDigits="2" maxIntegerDigits="3"/>
                                                <f:validateDoubleRange maximum="100"/>
                                                <p:ajax event="blur" update=":frmMain:purchasePercentCash,:frmMain:purchasePercentCredit" listener="#{bizInfoDetail.onCalCashCredit('purchasePercentCash')}"/>
                                            </p:inputText>
                                        </td>
                                        <td style="line-height: 15px"><p:outputLabel value="#{msg.get('app.bizInfoDetail.label.payablePercentCash')}"/></td>
                                        <td>
                                            <p:inputText styleClass="right" style="width: 95%;" id="payablePercentCash"  readonly="true"
                                                         onkeydown="return onKeyDownMoney(event);" onkeypress="return onKeyPressMoney(event);"
                                                         value="#{bizInfoDetail.bizInfoDetailView.payablePercentCash}"
                                                         required="#{not empty param[saveButton.clientId]}">
                                                <f:convertNumber pattern="##0.00" minFractionDigits="2" maxFractionDigits="2" maxIntegerDigits="3"/>
                                                <f:validateDoubleRange maximum="100"/>
                                                <p:ajax event="blur" update=":frmMain:payablePercentCash,:frmMain:payablePercentCredit" listener="#{bizInfoDetail.onCalCashCredit('payablePercentCash')}"/>
                                            </p:inputText>
                                        </td>
                                        <td style="line-height: 15px"><p:outputLabel value="#{msg.get('app.bizInfoDetail.label.stockDurationUW')}"/></td>
                                        <td>
                                            <p:inputText styleClass="right" style="width: 95%;" id="stockDurationUW" value="#{bizInfoDetail.bizInfoDetailView.stockDurationUW}" readonly="true">
                                                <!--readonly="#{bizInfoDetail.readonlyIsUW}"-->
                                                <f:convertNumber pattern="#,##0"   />
                                                <p:ajax event="blur" update=":frmMain:stockDurationUW,:frmMain:stockValueUW" />
                                            </p:inputText>
                                        </td>
                                    </tr>
                                    <tr style="background-color: #efefef">
                                        <td style="line-height: 15px"><p:outputLabel value="#{msg.get('app.bizInfoDetail.label.purchasePercentCredit')}"/></td>
                                        <td>
                                            <p:inputText styleClass="right" style="width: 95%;" id="purchasePercentCredit" value="#{bizInfoDetail.bizInfoDetailView.purchasePercentCredit}" readonly="true">
                                                <f:convertNumber pattern="#,##0"  minFractionDigits="2" maxFractionDigits="2" />
                                                <p:ajax event="blur" update=":frmMain:purchasePercentCredit"/>
                                            </p:inputText>
                                        </td>
                                        <td style="line-height: 15px"><p:outputLabel value="#{msg.get('app.bizInfoDetail.label.payablePercentCredit')}"/></td>
                                        <td>
                                            <p:inputText styleClass="right" style="width: 95%;" id="payablePercentCredit" value="#{bizInfoDetail.bizInfoDetailView.payablePercentCredit}" readonly="true">
                                                <f:convertNumber pattern="#,##0"  minFractionDigits="2" maxFractionDigits="2" />
                                                <p:ajax event="blur" update=":frmMain:payablePercentCredit"/>
                                            </p:inputText>
                                        </td>
                                        <td style="line-height: 15px"><p:outputLabel value="#{msg.get('app.bizInfoDetail.label.stockValueBDM')}"/></td>
                                        <td>
                                            <p:inputText styleClass="right" style="width: 95%;" id="stockValueBDM"
                                                         onkeydown="return onKeyDownMoney(event);" onkeypress="return onKeyPressMoney(event);"
                                                         value="#{bizInfoDetail.bizInfoDetailView.stockValueBDM}"
                                                         required="#{not empty param[saveButton.clientId]}">
                                                <!--readonly="#{bizInfoDetail.readonlyIsBDM}"-->
                                                <f:convertNumber pattern="#,##0"  minFractionDigits="2" maxFractionDigits="2" />
                                                <p:ajax event="blur" update=":frmMain:stockValueBDM"/>
                                            </p:inputText>
                                        </td>
                                    </tr>
                                    <tr style="background-color: #FAFAFA">
                                        <td style="line-height: 15px"><p:outputLabel value="#{msg.get('app.bizInfoDetail.label.purchasePercentLocal')}"/></td>
                                        <td>
                                            <p:inputText styleClass="right" style="width: 95%;" id="purchasePercentLocal"
                                                         onkeydown="return onKeyDownMoney(event);" onkeypress="return onKeyPressMoney(event);"
                                                         value="#{bizInfoDetail.bizInfoDetailView.purchasePercentLocal}"
                                                         required="#{not empty param[saveButton.clientId]}">
                                                <f:convertNumber pattern="##0.00" minFractionDigits="2" maxFractionDigits="2" maxIntegerDigits="3"/>
                                                <f:validateDoubleRange maximum="100"/>
                                                <p:ajax event="blur" update=":frmMain:purchasePercentLocal,:frmMain:purchasePercentForeign" listener="#{bizInfoDetail.onCalCashCredit('purchasePercentLocal')}"/>
                                            </p:inputText>
                                        </td>
                                        <td style="line-height: 15px"><p:outputLabel value="#{msg.get('app.bizInfoDetail.label.payablePercentLocal')}"/></td>
                                        <td>
                                            <p:inputText styleClass="right" style="width: 95%;" id="payablePercentLocal"
                                                         onkeydown="return onKeyDownMoney(event);" onkeypress="return onKeyPressMoney(event);"
                                                         value="#{bizInfoDetail.bizInfoDetailView.payablePercentLocal}"
                                                         required="#{not empty param[saveButton.clientId]}">
                                                <f:convertNumber pattern="##0.00" minFractionDigits="2" maxFractionDigits="2" maxIntegerDigits="3"/>
                                                <f:validateDoubleRange maximum="100"/>
                                                <p:ajax event="blur" update=":frmMain:payablePercentLocal,:frmMain:payablePercentForeign" listener="#{bizInfoDetail.onCalCashCredit('payablePercentLocal')}"/>
                                            </p:inputText>
                                        </td>
                                        <td style="line-height: 15px"><p:outputLabel value="#{msg.get('app.bizInfoDetail.label.stockValueUW')}"/></td>
                                        <td>
                                            <p:inputText styleClass="right" style="width: 95%;" id="stockValueUW" readonly="true"
                                                         onkeydown="return onKeyDownMoney(event);" onkeypress="return onKeyPressMoney(event);"
                                                         value="#{bizInfoDetail.bizInfoDetailView.stockValueUW}" >
                                                <!--readonly="#{bizInfoDetail.readonlyIsUW}"-->
                                                <f:convertNumber pattern="#,##0"  minFractionDigits="2" maxFractionDigits="2" />
                                                <p:ajax event="blur" update=":frmMain:stockValueUW"/>
                                            </p:inputText>
                                        </td>
                                    </tr>
                                    <tr style="background-color: #efefef">
                                        <td style="line-height: 15px"><p:outputLabel value="#{msg.get('app.bizInfoDetail.label.purchasePercentForeign')}"/></td>
                                        <td>
                                            <p:inputText styleClass="right" style="width: 95%;" id="purchasePercentForeign" value="#{bizInfoDetail.bizInfoDetailView.purchasePercentForeign}" readonly="true">
                                                <f:convertNumber pattern="#,##0"  minFractionDigits="2" maxFractionDigits="2" />
                                                <p:ajax event="blur" update=":frmMain:purchasePercentForeign"/>
                                            </p:inputText>
                                        </td>
                                        <td style="line-height: 15px"><p:outputLabel value="#{msg.get('app.bizInfoDetail.label.payablePercentForeign')}"/></td>
                                        <td>
                                            <p:inputText styleClass="right" style="width: 95%;" id="payablePercentForeign" value="#{bizInfoDetail.bizInfoDetailView.payablePercentForeign}" readonly="true">
                                                <f:convertNumber pattern="#,##0"  minFractionDigits="2" maxFractionDigits="2" />
                                                <p:ajax event="blur" update=":frmMain:payablePercentForeign"/>
                                            </p:inputText>
                                        </td>
                                        <td colspan="2" style="width: 25%;line-height: 15px"></td>
                                    </tr>
                                    <tr style="background-color: #FAFAFA">
                                        <td style="line-height: 15px"><p:outputLabel value="#{msg.get('app.bizInfoDetail.label.purchaseTerm')}"/></td>
                                        <td>
                                            <p:inputText styleClass="right" style="width: 95%;" id="purchaseTerm"
                                                         onkeydown="return onKeyDownNumber(event);" onkeypress="return onKeyPressNumber(event);"
                                                         value="#{bizInfoDetail.bizInfoDetailView.purchaseTerm}">
                                                <f:convertNumber pattern="#,##0"   />
                                                <p:ajax event="blur" update=":frmMain:purchaseTerm"/>
                                            </p:inputText>
                                        </td>
                                        <td style="line-height: 15px"><p:outputLabel value="#{msg.get('app.bizInfoDetail.label.payableTerm')}"/></td>
                                        <td>
                                            <p:inputText styleClass="right" style="width: 95%;" id="payableTerm"
                                                         onkeydown="return onKeyDownNumber(event);" onkeypress="return onKeyPressNumber(event);"
                                                         value="#{bizInfoDetail.bizInfoDetailView.payableTerm}">
                                                <f:convertNumber pattern="#,##0"   />
                                                <p:ajax event="blur" update=":frmMain:payableTerm"/>
                                            </p:inputText>
                                        </td>
                                        <td colspan="2" style="width: 25%;line-height: 15px"></td>
                                    </tr>
                                </table>
                            </td>
                        </tr>
                        <tr><td colspan="4"><p:spacer width="2px"/></td></tr>
                        <tr>
                            <td colspan="4"><p:separator/></td>
                        </tr>
                        <tr><td colspan="4"><p:spacer width="2px"/></td></tr>
                        <tr>
                            <td colspan="4" class="center">
                                <p:commandButton id="btnAddBizInfoDetailFull" binding="#{saveButton}" styleClass="small"
                                                 value="#{msg.get('app.button.save')}"
                                                 process="@form"
                                                 update=":msgBoxSystemMessagePanel,:frmMain"
                                                 action="#{bizInfoDetail.onSaveBizInfoView()}"/>
                                <p:commandButton value="#{msg.get('app.button.cancel')}" styleClass="small"
                                                 oncomplete="confirmChangeScreenSumDlg.show()"/>
                            </td>
                        </tr>
                        </table>
                    </div>
                </div>
                <div class="bottom_line"></div>
            </div>
            <div class="clear"></div>
                <!-- Start Footer -->
            <ui:include src="include/footer.xhtml" />
                <!-- End Footer -->
            <h:inputHidden id="pagename" value="mnuprescreen"/>
            <h:inputHidden id="subpagename" value="submnuprescreen"/>
        </div>
    </h:form>
    </p:panel>

    <p:dialog id="stakeholderViewDialog" header="stakeholderView Information" widgetVar="stakeholderViewDlg"  resizable="false"
              modal="true" width="350" height="300">
        <ui:include src="dialog/bizStakeholderDialog.xhtml"/>
    </p:dialog>

    <p:dialog id="bizProductViewDialog" header="bizProductView Information" widgetVar="bizProductViewDlg" resizable="false"
              modal="true" width="380" height="180">
        <ui:include src="dialog/bizProductDialog.xhtml"/>
    </p:dialog>

    <ui:include src="dialog/confirmDeleteDlg.xhtml">
        <ui:param name="id" value="confirmDeleteBizProductDialog"/>
        <ui:param name="name" value="confirmDeleteBizProductDlg"/>
        <ui:param name="formId" value="frmConfirmDeleteBizProduct"/>
        <ui:param name="controller" value="#{bizInfoDetail}"/>
        <ui:param name="action" value="onDeleteBizProductDetailView"/>
        <ui:param name="update" value=":frmMain:bizProductViewTable"/>
    </ui:include>

    <ui:include src="dialog/confirmDeleteDlg.xhtml">
        <ui:param name="id" value="confirmDeleteStakeholderDialog"/>
        <ui:param name="name" value="confirmDeleteStakeholderDlg"/>
        <ui:param name="formId" value="frmConfirmDeleteStakeholder"/>
        <ui:param name="controller" value="#{bizInfoDetail}"/>
        <ui:param name="action" value="onDeleteBizStakeHolderDetailView"/>
        <ui:param name="update" value=":frmMain:supplierTable,:frmMain:buyerTable,:frmMain:supplierTable,:frmMain:buyerTable"/>
    </ui:include>

    <ui:include src="dialog/confirmChangeScreenDlg.xhtml">
        <ui:param name="headerMessage" value="คำเตือน"/>
        <ui:param name="message" value="ย้อนกลับไปยังหน้าจอ Summary และยกเลิกการกระทำหน้าปัจจุบัน"/>
        <ui:param name="id" value="confirmChangeScreenSumDialog"/>
        <ui:param name="name" value="confirmChangeScreenSumDlg"/>
        <ui:param name="formId" value="frmConfirmChangeScreenSum"/>
        <ui:param name="controller" value="#{bizInfoDetail}"/>
        <ui:param name="action" value="onCancel"/>
    </ui:include>

    <p:panel id="msgBoxSystemMessagePanel" styleClass="panel">
        <p:confirmDialog id="msgBoxSystemMessageDialog" widgetVar="msgBoxSystemMessageDlg" width="350px"
                         header="#{bizInfoDetail.messageHeader}" message="#{bizInfoDetail.message}" >
            <p:commandButton value="OK"
                             process="@this"
                             update="frmMain"
                             oncomplete="msgBoxSystemMessageDlg.hide()"/>
        </p:confirmDialog>
    </p:panel>
    <p:blockUI block=":frmMain" trigger=":frmMain:btnAddBizInfoDetailFull">
        LOADING<br />
        <p:graphicImage value="/resources/images/shared/ajax-loader.gif"/>
    </p:blockUI>
    </h:body>
</f:view>
</html>
