<!DOCTYPE html>
<html>
<f:view xmlns="http://www.w3.org/1999/xhtml"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:p="http://primefaces.org/ui">

<h:head>
    <title>SE-LOS : Reassign</title>
    <h:outputStylesheet name="css/style.css" />
    <h:outputScript library="js" name="custom.js" />
    
    <style type="text/css">
        table.ui-selectoneradio.nolabel_radio {
            border-collapse: collapse;
            margin: 0;
            padding: 0;
            width: 100%;
        }
        table.ui-selectoneradio.nolabel_radio tr,
        table.ui-selectoneradio.nolabel_radio td {
            border-spacing: 0;
            padding: 0;
        }
        .dialog_noheader.ui-dialog .ui-dialog-titlebar {
            display:none;
        }
        .div_row {
            display: block;
            height: 28px;
            line-height: 28px;
            padding: 1px;
        }
        table table.ui-selectoneradio,
        table table.ui-selectoneradio td,
        table table.ui-selectoneradio tr {
            border: medium none !important;
        }
        .full_table table.ui-selectoneradio td {
            padding : 0 10px 0 0 !important;
        }
        .full_table table.ui-selectoneradio {
            width : auto !important;
        }

        .ui-datatable thead th, .ui-datatable tbody td, .ui-datatable tfoot td {
            padding: 1px 10px !important;
            overflow: hidden !important;
            white-space: normal !important;
            border-width: 1px !important;
            border-style: solid !important;
            border-color: #868686;
        }
    </style>


</h:head>

<h:body>
<h:form id="frmMain" style="position: relative; min-height: 100%; height: 100%;">
<p:panel id="pnl_maincontainer">
    
        <div id="main_container">
            <!-- Start Header Logo -->
            <ui:include src="include/header_logo.xhtml"/>
            <ui:include src="include/menubar_inbox.xhtml"/>
            <!-- End Menu -->
            <div id="content_container">
                <div id="content_name">Reassign</div>
                <div id="content">
                    <table id="content_form">
                        <!--<tr>
                            <td colspan="100%" style="color: red;line-height: 15px;"><label style="font-weight: bold">Reassign:</label></td>
                        </tr>
                        <tr>
                            <td colspan="100%" style="color: red;line-height: 15px;"><label style="font-weight: bold">Change Owner:</label></td>
                        </tr>-->
                        <tr>
                            <td colspan="100%" class="title"><h2>Search On Hand Case</h2></td>
                        </tr>
                       <tr>
                                           <td class="title" style="width: 150px;"> Team Lead Unit Name </td>
                                           <td>
                                                <h:selectOneMenu id="teamnameselectbox" class="largest" value="#{reassignteamnames.selectedTeamName}"  valueChangeListener="#{reassignteamnames.valueChangeMethod}" >
                                                    <f:selectItem itemValue="" itemLabel="-Please Select-"  />
                                                    <f:selectItems value="#{reassignteamnames.reasignteamnames}" var="reassign" itemValue="#{reassign.teamid}" itemLabel="#{reassign.teamid} - #{reassign.teamname}"/>
                                                    <p:ajax event="change" update="@form" />
                                                </h:selectOneMenu>
                                           </td>

                                    </tr>

                                    <tr>

                                        <td class="title" style="width: 150px;"> User Name </td>
                                        <td>
                                            <h:selectOneMenu id="usernameselectbox" class="largest" value="#{reassignteamnames.selectedUserName}" >
                                                <f:selectItem itemValue="" itemLabel="-Please Select-" />
                                                <f:selectItems value="#{reassignteamnames.teamuserslist}" />

                                            </h:selectOneMenu>
                                            <p:spacer width="15px"/>
                                            <p:commandButton  id="btnSearchFacility" styleClass="medium" value="Search" ajax="false" action="#{reassignteamnames.reassignSearch()}" />
                                        </td>

                                    </tr>

                                    <tr>
                                        <!-- <p:commandButton  id="btnSearchFacility" styleClass="medium" value="Search" action="{change.changOwnerSearchQuery()}" ajax="false"></p:commandButton>
                                       <h:commandButton  id="btnSearchFacility" styleClass="medium" value="Search" ajax="true"
                                                          action="{reassignteamnames.reassignSearch()}">
                                                          <f:ajax execute="teamnameselectbox usernameselectbox" render="@form"></f:ajax></h:commandButton>-->
                                        <!--<p:commandButton  id="btnSearchFacility" styleClass="medium" value="Search" ajax="true"
                                                          actionListener="{reassignteamnames.reassignSearch()}"
                                                          process="@form"
                                                          update=":frmMain,:pnl_menu_inbox1"/>-->


                                    </tr>


                        <tr>
                            <td colspan="100%" style="line-height: 10px;"><p:spacer width="2px"/></td>
                        </tr>
                        <tr>
                            <td colspan="100%"><p:separator/></td>
                        </tr>

                        <h:panelGroup id="pnl_menu_inbox1" rendered='#{reassignteamnames.reassignSearchViewList != null}' styleClass="panel" >
                         <table>

                        <tr>
                            <td colspan="100%" style="color: red;"><p:commandButton value="Reassign" styleClass="medium" onclick="reassignDlg.show()" readonly="#{reassignteamnames.selectedUserName eq 'ALL' }" disabled="#{reassignteamnames.selectedUserName eq 'ALL'}" /><p:spacer width="20px;"/> </td>
                        </tr>

                        <tr>
                            <td >

                                           <p:dataTable id="reassignResult" var="item"

                                             value="#{reassignteamnames.reassignSearchViewList}"

                                             selection="#{reassignteamnames.searchViewSelectItem}"

                                             selectionMode="single"

                                             paginator="true"

                                             rows ="10"

                                             rowKey="#{item.fwobnumber}"

                                             rowIndexVar="rowIndex"

                                             rowsPerPageTemplate="20,40,60">

                                    <p:column headerText="" styleClass="center" style="width:22px;">
                                        <h:outputText value="#{rowIndex+1}"/>
                                    </p:column>

                                    <p:column headerText="" styleClass="center" style="width:22px;" >
                                        <h:selectBooleanCheckbox disabled="false" value="#{reassignteamnames.checked[item.fwobnumber]}"/>
                                    </p:column>

                                    <p:column headerText="Lock" styleClass="center" style="width:8px;" >
                                          <h:graphicImage value="../resources/images/table/Lock1.png" rendered="#{item.locked eq 1}" />
                                    </p:column>

                                    <p:column headerText="Received Date" styleClass="center" style="width: 130px;" sortBy="#{item.receiveddate}" >
                                        <h:outputText value="#{item.receiveddate}"/>
                                    </p:column>

                                    <p:column headerText="At User Team" styleClass="center" style="width: 130px;">
                                        <h:outputText value="#{item.atuserteam}" />
                                    </p:column>

                                    <p:column headerText="Application Number" styleClass="center" style="width: 110px;" sortBy="#{item.applicationno}">
                                        <h:outputText value="#{item.applicationno}"/>
                                    </p:column>

                                    <p:column headerText="Name" styleClass="center" style="width: 110px;">
                                        <h:outputText value="#{item.name}"/>
                                    </p:column>

                                    <p:column headerText="Product Group" style="width: 120px;" styleClass="center" sortBy="#{item.productgroup}">
                                        <h:outputText value="#{item.productgroup}"/>
                                    </p:column>

                                    <p:column headerText="Request Type" style="width: 120px;" styleClass="center" >
                                        <h:outputText value="#{item.requestTypeStr}"/>
                                    </p:column>

                                    <p:column headerText="Step" styleClass="center" style="width: 110px;" sortBy="#{item.step}">
                                        <h:outputText  value="#{item.step}"/>
                                    </p:column>

                                    <p:column headerText="Status" styleClass="center" style="width: 110px;" sortBy="#{item.status}">
                                        <h:outputText value="#{item.status}"/>
                                    </p:column>

                                    <p:column headerText="From User" styleClass="center" style="width: 110px;" >
                                        <h:outputText value="#{item.fromuser}"/>
                                    </p:column>

                                    <p:column headerText="At User" styleClass="center" style="width: 110px;" >
                                        <h:outputText value="#{item.atuser}"/>
                                    </p:column>

                                    <p:column headerText="Appointment Date" styleClass="center" style="width: 110px;" >
                                        <h:outputText value="#{item.appointmentdate}"/>
                                    </p:column>

                                    <p:column headerText="DOA Level" styleClass="center" style="width: 110px;" >
                                        <h:outputText value="#{item.doalevel}"/>
                                    </p:column>

                                    <p:column headerText="Action" styleClass="center" style="width: 110px;"  >
                                        <h:outputText  value="#{item.action}"/>
                                    </p:column>

                                    <p:column headerText="SLA End Date" styleClass="center" style="width: 110px;  background-color : #{item.slastatus eq 'A' ? 'yellow' : (item.slastatus eq 'R' ? 'red' : 'default')};" sortBy="#{item.slaenddate}" >
                                        <h:outputText  value="#{item.slaenddate}"/>
                                    </p:column>

                                    <p:column headerText="Total Time Spent At User " styleClass="center" style="width: 110px;" sortBy="#{item.totaltimespentatuser}">
                                        <h:outputText  value="#{item.totaltimespentatuser}"/>
                                    </p:column>

                                    <p:column headerText="Total Time Spent At Process" styleClass="center" style="width: 110px;" sortBy="#{item.totaltimespentatprocess}">
                                        <h:outputText value="#{item.totaltimespentatprocess}"/>
                                    </p:column>

                                </p:dataTable>


                            </td>
                        </tr>
                        </table>
                        </h:panelGroup>
                        <tr><td colspan="100%"><p:spacer width="2"/></td></tr>
                    </table>

                </div>
                <div class="bottom_line"><!-- --></div>
            </div>
            <div class="clear"></div>
            <p:dialog id="reassignDialog" header="Reassign Information" widgetVar="reassignDlg" modal="true" >

                    <table class="content_form" style="width: 600px;">
                    <tr>
                        <td>
                          <h:panelGrid columns="2">
                                <tr>
                                    <td class="title" style="width: 220px;"> Team Lead Unit Name : </td>
                                    <td>
                                        <h:selectOneMenu class="largest" id="teamNameReassign" label="teamNameReassign" value="#{reassignteamnames.popupselectedteamname}" >
                                            <f:selectItem itemValue="" itemLabel="-Please Select-"/>
                                            <f:selectItems value="#{reassignteamnames.popupreasignteamnames}" var="popupreassign" itemValue="#{popupreassign.teamid}" itemLabel="#{popupreassign.teamname}"/>
                                            <f:ajax listener="#{reassignteamnames.changeUserNameBasedOnTeamName}" render="userNameReassign" execute="@this"/>
                                        </h:selectOneMenu>
                                    </td>
                                </tr>

                                <tr>

                                    <td class="title" style="width: 220px;"> User Name : </td>
                                    <td>
                                        <h:selectOneMenu class="largest" id="userNameReassign" label="userNameReassign" value="#{reassignteamnames.popupselectedusername}">
                                            <f:selectItem itemValue="" itemLabel="-Please Select-"/>
                                            <f:selectItems value="#{reassignteamnames.poupreasignUsernames}" />
                                        </h:selectOneMenu>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="title">Remark : </td>
                                    <td><h:inputTextarea cols="50" rows="3" value="#{reassignteamnames.popupremark}" ></h:inputTextarea></td>
                                 </tr>

                            </h:panelGrid>

                        </td>
                    </tr>

                    <tr>
                        <td colspan="2" align="center">
                            <p:commandButton value="Submit" styleClass="small" action="#{reassignteamnames.reassignDisptchRecords()}" onclick="reassignDlg.close();"/>
                            <p:commandButton value="Cancel" styleClass="small" onclick="reassignDlg.close();"/>
                        </td>
                    </tr>
                </table>

            </p:dialog>
            <!-- Start Footer -->
            <ui:include src="include/footer_inbox.xhtml" />
            <!-- End Footer -->
        </div>
</p:panel>
    </h:form>

</h:body>

</f:view>
</html>
