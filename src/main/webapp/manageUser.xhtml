<!DOCTYPE html>
<html>
<f:view xmlns="http://www.w3.org/1999/xhtml"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:p="http://primefaces.org/ui"
        xmlns:ui="http://java.sun.com/jsf/facelets">
    <h:head>
        <title>ManageUser</title>
        <link type="text/css" rel="stylesheet" href="#{request.contextPath}/resources/css/style.css"/>
        <script type="text/javascript" language="javascript"
                src="#{request.contextPath}/resources/js/jquery.numeric.js"/>
        <script type="text/javascript" language="javascript" src="#{request.contextPath}/resources/js/custom.js"/>
    </h:head>
    <h:body>
        <p:panel id="pnl_maincontainer">
            <div id="main_container">
                <div id="header_logo">
                    <div id="header_logo_image">
                        <img src="#{request.contextPath}/resources/images/shared/header_logo.jpg" alt=""
                             title="TMB SE-LOS Application"/>
                    </div>
                </div>

                <div id="content_container">
                    <h:form id="userTableData">
                        <div id="content_info"/>
                            <p:panelGrid columns="3">
                                <p:inputText/>
                                <p:commandButton value="Search"/>
                                <h:outputText value=" TotalUser : #{isa.userSize}"/>
                            </p:panelGrid>

                        <p:dataTable id="dataTable" var="c" value="#{isa.userDetail}" styleClass="center"
                                     selection="#{isa.selectUserDetail}" rowKey="#{c.id}"
                                     rowIndexVar="rowIndex" rows="20" paginator="true">

                            <p:column selectionMode="multiple"/>

                            <p:column headerText="userId">
                                <h:outputText value="#{c.id}"/>
                            </p:column>
                            <p:column headerText="Username">
                                <h:outputText value="#{c.userName}"/>
                            </p:column>
                            <!--<p:column headerText="EmailAddress">-->
                                <!--<h:outputText value="#{c.emailAddress}"/>-->
                            <!--</p:column>-->
                            <p:column headerText="Active">
                                <h:outputText value="#{c.active}"/>
                            </p:column>
                            <!--<p:column headerText="BuCode">-->
                                <!--<h:outputText value="#{c.buCode}"/>-->
                            <!--</p:column>-->
                            <p:column headerText="LastIp">
                                <h:outputText value="#{c.lastIP}"/>
                            </p:column>
                            <p:column headerText="LastLogon">
                                <h:outputText value="#{c.lastLogon}"/>
                            </p:column>
                            <!--<p:column headerText="PhoneNumber">-->
                                <!--<h:outputText value="#{c.phoneNumber}"/>-->
                            <!--</p:column>-->
                            <p:column headerText="Role">
                                <h:outputText value="#{c.role.name}"/>
                            </p:column>
                            <p:column headerText="Department">
                                <h:outputText value="#{c.department.name}"/>
                            </p:column>
                            <p:column headerText="Division">
                                <h:outputText value="#{c.division.name}"/>
                            </p:column>
                            <p:column headerText="Region">
                                <h:outputText value="#{c.region.name}"/>
                            </p:column>
                            <p:column headerText="Team">
                                <h:outputText value="#{c.team.name}"/>
                            </p:column>
                            <p:column headerText="Title">
                                <h:outputText value="#{c.title.name}"/>
                            </p:column>
                            <p:column headerText="Zone">
                                <h:outputText value="#{c.zone.name}"/>
                            </p:column>

                            <p:column headerText="Status">
                                <h:outputText value="#{c.userStatus}"/>
                            </p:column>
                            <p:column headerText="Management">
                                <p:commandButton icon="ui-icon-pencil"
                                                 title="${c.id}"
                                                 action="#{isa.onOpenEditForm()}"
                                                 oncomplete="manageUserDlg.show()"
                                                 update=":manageDialogForm">
                                    <f:setPropertyActionListener value="#{c.id}"
                                                                 target="#{isa.id}"  />
                                        </p:commandButton>

                                <p:commandButton icon="ui-icon-trash"
                                                 title="Remove"
                                                 oncomplete="confirmDeleteUserDlg.show()">
                                        <f:setPropertyActionListener value="#{c.id}"
                                                                     target="#{isa.id}"  />

                                        </p:commandButton>

                            </p:column>
                        </p:dataTable>


                        <p:commandButton value="Add New User" actionListener="#{isa.onOpenNewUserForm()}"
                                         oncomplete="PF('manageUserDlg').show()"
                                         update=":manageDialogForm">
                                        <!--<f:setPropertyActionListener value="#{isa.createUserView.flag}"-->
                                                                     <!--target="#{}"/>-->
                                </p:commandButton>

                        <p:commandButton value="Delete" actionListener="#{isa.onDeleteUserList()}"
                                update=":msgBoxSystemMessagePanel"/>
                    </h:form>
                </div>
            </div>
        </p:panel>




        <p:dialog id="manageUserDialog" widgetVar="manageUserDlg" header="Manage User !"
                                   onShow="hideWindowsScrollBar()" onHide="showWindowsScrollBar()" resizable="false"
                                   modal="true" width="600" height="500">
        <ui:include src="site/dialog/isaManageDialog.xhtml"/>
    </p:dialog>



        <p:panel id="msgBoxSystemMessagePanel" styleClass="panel">
            <p:confirmDialog id="msgBoxSystemMessageDialog" widgetVar="msgBoxSystemMessageDlg"
                             header="#{isa.messageHeader}" message="#{isa.message}" >
                <p:commandButton value="OK"
                                 process="@this"
                                 update=":userTableData"
                                 oncomplete="msgBoxSystemMessageDlg.hide()"/>
            </p:confirmDialog>
        </p:panel>


        <ui:include src="site/dialog/confirmDeleteDlg.xhtml">
            <ui:param name="id" value="confirmDeleteUserDialog"/>
            <ui:param name="name" value="confirmDeleteUserDlg"/>
            <ui:param name="formId" value="frmConfirmDeleteUser"/>
            <ui:param name="controller" value="#{isa}"/>
            <ui:param name="action" value="onDelete"/>
            <ui:param name="update" value=":userTableData"/>
        </ui:include>

        <ui:include src="site/dialog/confirmDeleteDlg.xhtml">
            <ui:param name="id" value="confirmDeleteUserListDialog"/>
            <ui:param name="name" value="confirmDeleteUserListDlg"/>
            <ui:param name="formId" value="frmConfirmDeleteUserList"/>
            <ui:param name="controller" value="#{isa}"/>
            <ui:param name="action" value="deleteUserList"/>
            <ui:param name="update" value=":userTableData"/>
        </ui:include>

    </h:body>

</f:view>
</html>